angular.module("gma").run(["$templateCache",function(e){e.put("partials/application.html",'<div ng-controller=GMACtrl class=gmaApplication ng-class=appEnvironment><nav class="navbar navbar-inverse navbar-static-top"><div class=container><div class=navbar-header><a class=navbar-brand href=javascript:void(0)>{{appName}}</a></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav" ng-if=current.assignment><li class=dropdown dropdown><a href=javascript:void(0) class="dropdown-toggle ministry-title" dropdown-toggle>{{current.assignment.name}} <span class=caret></span></a><ul class=dropdown-menu role=menu><li ng-repeat="a in current.assignments | orderBy:\'name\'" ng-include="\'partials/ministry-item.html\'" ng-class="{\'dropdown-submenu\' : (a.sub_ministries.length)}"></li><li class=divider></li><li><a href=javascript:void(0) ng-click=joinMinistry(true) translate>Join another location / ministry</a></li></ul></li><li class=dropdown ng-if=current.assignment.mccs.length dropdown><a href=javascript:void(0) class=dropdown-toggle dropdown-toggle>{{mccLabels[current.mcc]}} <span class=caret></span></a><ul class=dropdown-menu role=menu><li ng-repeat="mcc in current.assignment.mccs | orderBy:mccSort"><a href=javascript:void(0) ng-click="current.mcc = mcc">{{mccLabels[mcc] | translate}}</a></li></ul></li><li><a href=javascript:void(0) ng-click=prevPeriod()><span class="glyphicon glyphicon-chevron-left"></span></a></li><li class=dropdown dropdown><a href=javascript:void(0) class=dropdown-toggle dropdown-toggle>{{current.period.format(\'YYYY-MM\')}} <span class=caret></span></a><ul class=dropdown-menu role=menu><li ng-repeat="period in periods"><a href=javascript:void(0) ng-click="current.period = period">{{period.format(\'YYYY-MM\')}}</a></li></ul></li><li><a href=javascript:void(0) ng-click=nextPeriod()><span class="glyphicon glyphicon-chevron-right"></span></a></li></ul><ul class="nav navbar-nav navbar-right" ng-if=current.user><li class=dropdown dropdown><a href=javascript:void(0) class=dropdown-toggle dropdown-toggle role=button aria-expanded=false><span class="top-user-info pull-left"><span class=top-user-name>{{current.user.cas_username}}</span> <span class=top-user-role><i class="flag flag-indicator ng-class:langFlagClass"></i><span class="small text-capitalize">{{(current.assignment.team_role).replace(\'_\',\' - \')}}</span></span></span> <span class=caret></span></a><ul class=dropdown-menu role=menu><li><a href=javascript:void(0) ng-click=showUserPreference()><i class="glyphicon glyphicon-star"></i> <span translate>My Preferences</span></a></li><li class=divider></li><li><a href=javascript:void(0) ng-click=logout()><i class="glyphicon glyphicon-off"></i> <span translate>Logout</span></a></li></ul></li></ul></div></div></nav><div class=container><div><ul class="nav nav-tabs" role=tablist><li ng-repeat="tab in tabs | filter:tabFilter" ng-class="{active: $location.path() === tab.path}"><a ng-href=#{{tab.path}}><i class="glyphicon {{tab.icon}}"></i> {{tab.name | translate}}</a></li></ul><div class=tab-content><div class="tab-pane active"><div ng-view></div><div ng-include="\'partials/spinner.html\'" ng-hide=current.isLoaded></div></div></div></div><div class=row ng-if=mobileApps><div class=col-xs-12><div class=text-center><span translate>Mobile Apps</span>: <a target=_blank ng-repeat-start="app in mobileApps" ng-href={{app.link}}>{{app.label}}</a> <span ng-repeat-end ng-if=!$last>|</span></div></div></div><footer><span>&copy; 2015 - Campus Crusade for Christ</span> <span class=pull-right>{{appVersion}}</span></footer></div></div><div growl limit-messages=5></div>')}]),angular.module("gma").run(["$templateCache",function(e){e.put("partials/join-ministry.html",'<div class=modal-header><h3 class=modal-title translate-comment="Modal Title" translate>Join Ministry/Team</h3><p translate>Please identify a ministry team that you work most closely with and request to join that team.</p></div><div class="modal-body form-horizontal"><div class=form-group><label for=ministryName class="col-xs-4 control-label" translate>Ministry/Team:</label><div class=col-xs-8><input id=ministryName class=form-control ng-model=ministry typeahead="m as m.name for m in ministries | filter:$viewValue | limitTo:8" typeahead-min-length=2 typeahead-editable=false><p class=help-block translate>Start typing to search for ministry</p></div></div><div class=form-group ng-if=!allowClose><label class="col-sm-4 control-label" translate>Supported staff</label><div class=col-sm-8 ng-init="$parent.user_preference.supported_staff = 0"><label class=radio-inline><input type=radio value=1 ng-model=$parent.user_preference.supported_staff translate> Yes</label> <label class=radio-inline><input type=radio value=0 ng-model=$parent.user_preference.supported_staff translate> No</label></div></div></div><div class=modal-footer><button type=button class="btn btn-primary" ng-disabled=!ministry ng-click=join() translate-comment="Verb - Button" translate>Join Ministry/Team</button> <button ng-if=allowClose type=button class="btn btn-default" ng-click=cancel() translate-comment="Verb - Button" translate>Cancel</button></div>')}]),angular.module("gma").run(["$templateCache",function(e){e.put("partials/ministry-item.html",'<a href=javascript:void(0) ng-click="current.assignment = a" class=dropdown-toggle data-toggle=dropdown>{{a.name}}</a><ul class=dropdown-menu ng-if=a.sub_ministries.length><li ng-repeat="a in a.sub_ministries" ng-include="\'partials/ministry-item.html\'" ng-class="{\'dropdown-submenu\' : (a.sub_ministries.length)}"></li></ul>')}]),angular.module("gma").run(["$templateCache",function(e){e.put("partials/spinner.html",'<div class=spinner><div class="spinner-container container1"><div class=circle1></div><div class=circle2></div><div class=circle3></div><div class=circle4></div></div><div class="spinner-container container2"><div class=circle1></div><div class=circle2></div><div class=circle3></div><div class=circle4></div></div><div class="spinner-container container3"><div class=circle1></div><div class=circle2></div><div class=circle3></div><div class=circle4></div></div></div>')}]),angular.module("gma").run(["$templateCache",function(e){e.put("partials/admin/_edit-ministry.html",'<div class=admin-item><div class="panel panel-default"><div class=panel-heading><h3 class=panel-title translate>Edit current ministry</h3><div class=clearfix></div></div><div class=panel-body><form name=form class=form-horizontal><div class="form-group row"><label for=ministryName class="col-sm-4 control-label" translate>Ministry name</label><div class=col-sm-6><input id=ministryName maxlength=255 type=text name=name class=form-control ng-model=ministry.name ng-required=true> <small class=help-text ng-show="form.name.$dirty && form.name.$invalid"><span class=text-danger ng-show=form.name.$error.required translate>Ministry name is required.</span></small></div></div><div class="form-group row" ng-show=ableToChangeParentMinistry(ministry.parent_id)><label class="col-sm-4 control-label" translate>Parent ministry</label><div class=col-sm-6><select name=prent class=form-control ng-model=ministry.parent_id ng-options="m.ministry_id as m.name for m in current.ministries | roleFilter:[\'admin\',\'inherited_admin\',\'leader\',\'inherited_leader\'] | orderBy:\'name\'"><option translate>No parent ministry</option></select></div></div><div class="form-group row"><label class="col-sm-4 control-label" translate>MCCs</label><div class=col-sm-6><div class=checkbox ng-repeat="mcc in mccs"><label><input type=checkbox ng-model=mcc.checked ng-init="mcc.checked = getMCCValue(mcc.value)" ng-change=createMCCArray(mcc.checked,mcc.value)> {{mcc.text}}</label></div></div></div><hr><div class=form-group><label class="col-sm-4 control-label" translate>Default MCC</label><div class=col-sm-6><select class=form-control ng-model=ministry.default_mcc ng-options="mcc.value as mcc.text for mcc in mccs | mccFilter:ministry.mccs"><option translate>Default</option></select></div></div><div class=form-group><label class="col-sm-4 control-label" translate>Hide reports tab by default</label><div class=col-sm-6><label class=radio-inline><input type=radio value=1 ng-model=ministry.hide_reports_tab> <span translate>Hide</span></label> <label class=radio-inline><input type=radio value=0 ng-model=ministry.hide_reports_tab> <span translate>Show</span></label></div></div><div class=form-group><label class="col-sm-4 control-label" translate>Supported languages</label><div class=col-sm-6><select size=10 multiple class=form-control ng-model=ministry.content_locales ng-options="lang.iso_code as lang.english_name for lang in current.langList"><optgroup label="Select Languages"></optgroup></select><small class=help-text translate>CTRL + click to select multiple languages</small></div></div></form></div><div class=panel-footer><button type=button class="btn btn-primary pull-right btn-sm" ng-click=saveDetails() ng-disabled="form.$invalid || (saveDetailsResource && !saveDetailsResource.$resolved)"><i class="glyphicon glyphicon-pencil"></i> <span translate>Update Ministry</span></button><div class=clearfix></div></div></div></div>')}]),angular.module("gma").run(["$templateCache",function(e){e.put("partials/admin/_measurement.html",'<div class=admin-item><div class="panel panel-default"><div class="panel-heading clearfix" style="padding: 5px 15px;"><h3 class="panel-title pull-left" style="padding-top: 6px" translate>Measurements</h3><button type=button class="pull-right btn btn-primary btn-sm" ng-click=addNewMeasurement()><i class="glyphicon glyphicon-plus"></i> <span translate>Add Measurement</span></button><div class=clearfix></div></div><div class=panel-body><table class="table table-striped table-hover table-condensed"><thead><tr class=active><th translate>Name</th><th translate>Column</th><th translate>Section</th><th class=text-center style="width: 25%" translate>Actions</th></tr></thead><tr ng-repeat="type in measurementTypes"><td class=no-overflow>{{type.english}}</td><td class=text-capitalize>{{type.column}}</td><td class=text-capitalize>{{type.section}}</td><td class=text-center><div class=btn-group><label class="btn btn-default btn-xs" ng-model=type.visible btn-radio=true translate>Show</label> <label class="btn btn-default btn-xs" ng-model=type.visible btn-radio=false translate>Hide</label></div><button ng-if=current.assignment.content_locales.length type=button ng-click=editMeasurement(type) class="btn btn-xs btn-default"><span class="glyphicon glyphicon-globe"></span> <span translate>Localize</span></button></td></tr></table></div><div class=panel-footer><button type=button class="btn btn-primary pull-right btn-sm" ng-click=saveDetails() ng-disabled="saveDetailsResource && !saveDetailsResource.$resolved"><i class="glyphicon glyphicon-pencil"></i> <span translate>Save changes</span></button><div class=clearfix></div></div></div></div>')}]),angular.module("gma").run(["$templateCache",function(e){e.put("partials/admin/_team-members.html",'<div class=admin-item ng-init=initTeamAndMembers();><section class="row panel panel-default panel-custom"><div class=panel-body><div class="pull-left form-inline"><input autofocus type=text ng-model=filter.memberSearch placeholder="{{\'Search Members\'|translate}}.." class="form-control input-sm">&emsp; <label title=Toggle class=checkbox-inline><input type=checkbox ng-model=filter.deletedUser> <span translate>Deleted</span></label> <label title=Toggle class=checkbox-inline><input type=checkbox ng-model=filter.formerMember> <span translate>Former members</span></label> <label title=Toggle class=checkbox-inline><input type=checkbox ng-model=filter.inheritedLeader> <span translate>Inherited leaders</span></label> <label title=Toggle class=checkbox-inline><input type=checkbox ng-model=filter.inheritedAdmin> <span translate>Inherited admins</span></label></div><div class=pull-right><button class="btn btn-default btn-sm" type=button ng-click=loadMinistryMembers(activeTeam.ministry_id) title="Refresh Members List"><i class="glyphicon glyphicon-refresh"></i><span class=sr-only translate>Refresh members list</span></button> <button class="btn btn-primary btn-sm" type=button ng-click=addNewTeamMember()><i class="glyphicon glyphicon-user"></i> <span translate>Add member</span></button> <button ng-if="current.hasRole([\'admin\',\'inherited_admin\'])" class="btn btn-primary btn-sm" type=button ng-click=addNewSubMinistry()><i class="glyphicon glyphicon-plus"></i> <span translate>Add sub ministry</span></button></div><div class=clearfix></div></div></section><section class=row id=team-member-pane><aside class="col-md-3 pull-left teams-list"><script type=text/ng-template id=teams-tree.html><li ng-repeat="team in teams" role="treeitem" ng-hide="team.hide_after_drop===true"> <span class="outer" ng-init="teamCollapsed = true" ng-class="{\'active\' : (activeTeam.ministry_id === team.ministry_id)}" data-drop="true" jqyoui-droppable="{index: {{$index}},onOver:\'teamOnOver(teamCollapsed)\',onOut:\'teamOnOut\',onDrop:\'teamOnDrop(team)\',beforeDrop:\'teamBeforeDrop(team)\'}" data-drag="{{current.assignment.ministry_id !== team.ministry_id}}" jqyoui-draggable="{index: {{$index}},placeholder:\'keep\',animate:true,onStart:\'teamOnStart(team)\'}" jqyoui-options="teamDraggableOptions" > <i class="glyphicon" title="Toggle" ng-class="{\'glyphicon-certificate\' : (!team.sub_ministries.length || team.sub_ministries.length == 0), \'glyphicon-triangle-right\' : (teamCollapsed == true && (team.sub_ministries.length || team.sub_ministries.length >= 0)), \'glyphicon-triangle-bottom\' : (teamCollapsed == false && (team.sub_ministries.length || team.sub_ministries.length >= 0))}" ng-click="teamCollapsed = !teamCollapsed;" ></i> <span class="inner" ng-click="setActiveTeam(team)" >{{team.name}}</span> </span> <ul ng-if="team.sub_ministries.length" collapse="teamCollapsed" ng-include="\'teams-tree.html\'" onload="teams = team.sub_ministries" role="tree"></ul> </li></script><ul ng-include="\'teams-tree.html\'" onload="teams = allCurrentTeams" role=tree></ul></aside><aside class="col-md-9 pull-right members-list"><div ng-include="\'partials/spinner.html\'" ng-hide=membersLoaded></div><table class="table table-striped table-hover members-table" ng-hide=!membersLoaded><thead><tr><th translate>First Name</th><th translate>Last Name</th><th translate>Email</th><th translate>Actions</th></tr></thead><tbody><tr class=active><td>{{current.user.first_name}}</td><td>{{current.user.last_name}}</td><td>{{current.user.cas_username}}</td><td>{{getCurrentUserRole(activeTeam.team_role)}}</td></tr><tr ng-repeat="member in activeTeamMembers | orderBy:[\'first_name\', \'last_name\'] | filter:filter.checkAdmin | filter : filter.checkLeader | filter:filter.checkDeleted |filter:filter.checkFormer | filter : filter.memberSearch" ng-if="current.user.person_id !== member.person_id" ng-class="{\'danger\':(member.team_role===\'blocked\')}" data-drag=isMemberDraggable(member) ng-model=member jqyoui-draggable="{index: {{$index}},animate:true,placeholder:\'keep\',onStart:\'memberOnStart(member)\'}" jqyoui-options=memberDraggableOptions><td>{{member.first_name}}</td><td>{{member.last_name}}</td><td>{{member.key_username}}</td><td class=text-center><select ng-change="updateUserRole(\'{{member.team_role}}\',member)" class="form-control input-sm" style="width: 150px;" ng-model=member.team_role><option ng-repeat="role in roles" ng-disabled="role.value === \'inherited_admin\' || role.value ===\'inherited_leader\'" ng-selected="{{role.value === member.team_role}}" value={{role.value}} ng-class="{\'text-danger\' : (role.value===\'blocked\')}">{{role.text|translate}}</option></select></td></tr></tbody></table></aside></section></div>')}]),angular.module("gma").run(["$templateCache",function(e){e.put("partials/admin/add-measurement-type.html",'<div class=modal-header><button type=button class=close ng-click=close()><span aria-hidden=true>&times;</span><span class=sr-only translate>Close</span></button><h4 class=modal-title translate>Add new measurement</h4></div><div class="modal-body form-horizontal"><form name=form class=form-horizontal><div class=form-group><label for=newMeasurementName class="col-sm-3 control-label" translate>Name</label><div class=col-sm-8><input id=newMeasurementName name=name type=text class=form-control ng-maxlength=200 ng-model=newMeasurement.english ng-required=true> <small class=help-text ng-show="form.name.$dirty && form.name.$invalid"><span class=text-danger ng-show=form.name.$error.required translate>Name is required</span> <span class=text-danger ng-show=form.name.$error.maxlength translate>Name should not exceed 200 characters</span></small></div></div><div class=form-group><label for=newMeasurementDesc class="col-sm-3 control-label" translate>Description</label><div class=col-sm-8><textarea id=newMeasurementDesc name=description class=form-control ng-maxlength=200 ng-model=newMeasurement.description ng-required=true style="resize: vertical;max-height: 200px;"></textarea> <small class=help-text ng-show="form.description.$dirty && form.description.$invalid"><span class=text-danger ng-show=form.description.$error.required translate>Description is required</span> <span class=text-danger ng-show=form.name.$error.maxlength translate>Description should not exceed 200 characters</span></small></div></div><div class=form-group><label for=newMeasurementPermalink class="col-sm-3 control-label" translate>Permalink</label><div class=col-sm-8><input id=newMeasurementPermalink name=permalink placeholder=name_name ng-maxlength=100 type=text class=form-control ng-model=newMeasurement.perm_link_stub ng-required=true ng-pattern="/^[\\w&-]+$/"> <small class=help-text ng-show="form.permalink.$dirty && form.permalink.$invalid"><span class=text-danger ng-show=form.permalink.$error.required translate>Permalink is required</span> <span class=text-danger ng-show=form.permalink.$error.pattern translate>Permalink is invalid. Please match with required format</span> <span class=text-danger ng-show=form.name.$error.maxlength translate>Permalink should not exceed 100 characters</span></small></div></div><div class=form-group><label class="col-sm-3 control-label" translate>Column</label><div class=col-sm-8><select class=form-control style="width: 150px;" ng-model=newMeasurement.column ng-required=true><option value=faith translate>Faith</option><option value=fruit translate>Fruit</option><option value=outcome translate>Outcome</option><option value=other translate>Other</option></select></div></div><div class=form-group><label class="col-sm-3 control-label" translate>Section</label><div class=col-sm-8><select class=form-control style="width: 150px;" ng-model=newMeasurement.section ng-required=true><option value=win translate>Win</option><option value=build translate>Build</option><option value=send translate>Send</option><option value=other translate>Other</option></select></div></div></form></div><div class=modal-footer><button type=button class="btn btn-default" ng-click=close()><i class="glyphicon glyphicon-remove"></i> <span translate>Close</span></button> <button type=button ng-disabled=form.$invalid class="btn btn-primary" ng-click=add()><i class="glyphicon glyphicon-ok"></i> <span translate>Create</span></button></div>')}]),angular.module("gma").run(["$templateCache",function(e){e.put("partials/admin/add-sub-ministry.html",'<div class=modal-header><button type=button class=close ng-click=close()><span aria-hidden=true>&times;</span><span class=sr-only translate>Close</span></button><h4 class=modal-title><span translate>Add a new sub ministry to</span> - {{activeTeamName}}</h4></div><div class=modal-body><form name=form class=form-horizontal><div class=form-group><label for=sbName class="col-sm-4 control-label" translate>Ministry name</label><div class=col-sm-8><input id=sbName name=name type=text class=form-control ng-model=newMinistry.name ng-required=true> <small class=help-text ng-show="form.name.$dirty && form.name.$invalid"><span class=text-danger ng-show=form.min_code.$error.required translate>Ministry name is required.</span></small></div></div></form></div><div class=modal-footer><button type=button class="btn btn-default" ng-click=close()><i class="glyphicon glyphicon-remove"></i> <span translate>Close</span></button> <button type=button ng-disabled=form.$invalid class="btn btn-primary" ng-click=add()><i class="glyphicon glyphicon-floppy-disk"></i> <span translate>Create</span></button></div>')}]),angular.module("gma").run(["$templateCache",function(e){e.put("partials/admin/add-team-member.html",'<div class=modal-header><button type=button class=close ng-click=close()><span aria-hidden=true>&times;</span><span class=sr-only>Close</span></button><h4 class=modal-title><span translate>Add new member to</span> - {{activeTeamName}}</h4></div><div class=modal-body><form name=form class=form-horizontal><div class=form-group><label class="col-sm-4 control-label" translate>TheKey username</label><div class=col-sm-8><input name=username type=email class=form-control placeholder=user@ccci.org ng-model=newMember.username ng-required=true> <small class=help-text ng-show="form.username.$dirty && form.username.$invalid"><span class=text-danger ng-show=form.username.$error.required translate>Username is required.</span> <span class=text-danger ng-show=form.username.$error.email translate>Invalid email format</span></small></div></div><div class=form-group><label class="col-sm-4 control-label" translate>Role</label><div class=col-sm-8><select name=team_role class=form-control style="width: 150px;" ng-model=newMember.team_role ng-options="r.value as r.text for r in roles | filter :{ value : \'!inherited_admin\' } | filter :{ value : \'!inherited_leader\' } | filter :{ value : \'!former_member\' }" ng-required=true></select></div></div></form></div><div class=modal-footer><button type=button class="btn btn-default" ng-click=close()><i class="glyphicon glyphicon-remove"></i> <span translate>Close</span></button> <button type=button ng-disabled=form.$invalid class="btn btn-primary" ng-click=add()><i class="glyphicon glyphicon-floppy-disk"></i> <span translate>Save</span></button></div>')}]),angular.module("gma").run(["$templateCache",function(e){e.put("partials/admin/admin.html",'<div ng-if=current.isLoaded><ul class="nav nav-pills" ng-init=initSubTabs()><li ng-repeat="tab in adminTabTemplates" ng-if=current.hasRole(tab.requiredRoles) ng-click=selectTab(tab.name) role=presentation ng-class="{active: activePill === tab.name}"><a style="padding: 8px 10px" href=javascript:void(0)>{{tab.label|translate}}</a></li></ul><div ng-include=currentAdminTab.url></div></div>')}]),angular.module("gma").run(["$templateCache",function(e){e.put("partials/admin/confirm-member-drop.html",'<div class=modal-header><button type=button class=close ng-click=no()><span aria-hidden=true>&times;</span><span class=sr-only translate>Close</span></button><h4 class=modal-title translate>Move member to this team ?</h4></div><div class="modal-body form-horizontal"><ul class=list-unstyled><li><span translate>Name</span>: {{member.first_name + \' \'+member.last_name}}</li><li><span translate>Current role</span>: {{getRoleName(member.team_role)}}</li><li><span translate>Target team</span>: {{team.name}}</li><li><i class="glyphicon glyphicon-warning-sign text-danger"></i> <span translate>Current role will be set to former-member</span></li></ul></div><div class=modal-footer><button type=button class="btn btn-default" ng-click=no()><i class="glyphicon glyphicon-remove"></i> <span translate>No</span></button> <button type=button class="btn btn-primary" ng-click=yes()><i class="glyphicon glyphicon-ok"></i> <span translate>Yes</span></button></div>')}]),angular.module("gma").run(["$templateCache",function(e){e.put("partials/admin/confirm-team-drop.html",'<div class=modal-header><button type=button class=close ng-click=no()><span aria-hidden=true>&times;</span><span class=sr-only translate>Close</span></button><h4 class=modal-title translate>Move sub-team to this team ?</h4></div><div class="modal-body form-horizontal"><ul class=list-unstyled><li><span translate>Source Name</span>: {{source_team}}</li><li><span translate>Target Team</span>: {{target_team}}</li></ul></div><div class=modal-footer><button type=button class="btn btn-default" ng-click=no()><i class="glyphicon glyphicon-remove"></i> <span translate>No</span></button> <button type=button class="btn btn-primary" ng-click=yes()><i class="glyphicon glyphicon-ok"></i> <span translate>Yes</span></button></div>')}]),angular.module("gma").run(["$templateCache",function(e){e.put("partials/admin/confirm-update-role.html",'<div class=modal-header><button type=button class=close ng-click=no()><span aria-hidden=true>&times;</span><span class=sr-only translate>Close</span></button><h4 class=modal-title translate>Update Team Member Role ?</h4></div><div class="modal-body form-horizontal"><ul class=list-unstyled><li><span translate>Member</span>: {{userInfo.user.first_name + \' \' + userInfo.user.last_name}}</li><li><span translate>Old Role</span>: {{getRoleName(userInfo.old_role)}}</li><li><span translate>New Role</span>: {{getRoleName(userInfo.user.team_role)}}</li></ul></div><div class=modal-footer><button type=button class="btn btn-default" ng-click=no()><i class="glyphicon glyphicon-remove"></i> <span translate>No</span></button> <button type=button class="btn btn-primary" ng-click=yes()><i class="glyphicon glyphicon-ok"></i> <span translate>Yes</span></button></div>')}]),angular.module("gma").run(["$templateCache",function(e){e.put("partials/admin/edit-measurement-type.html",'<div class=modal-header><button type=button class=close ng-click=close()><span aria-hidden=true>&times;</span><span class=sr-only translate>Close</span></button><h4 class=modal-title translate>Localize</h4></div><div class="modal-body form-horizontal"><form name=form class=form-horizontal><div class=form-group><label class="col-sm-3 control-label" translate>Language</label><div class=col-sm-8><select class=form-control ng-model=measurement.locale ng-options="lang.iso_code as lang.english_name for lang in current.langList | filter:filterByLangCode" ng-required=true ng-change=changeLocale(measurement.locale)></select></div></div><div class=form-group><label class="col-sm-3 control-label" translate>English name</label><div class=col-sm-8><p class=form-control-static>{{original.english}}</p></div></div><div class=form-group><label class="col-sm-3 control-label" translate>English description</label><div class=col-sm-8><p class=form-control-static>{{original.description}}</p></div></div><div ng-show=isLocaleLoaded><div class=form-group><label for=measurementName class="col-sm-3 control-label" translate>Localized name</label><div class=col-sm-8><input id=measurementName name=name type=text class=form-control ng-maxlength=200 ng-model=measurement.localized_name ng-required=true> <small class=help-text ng-show="form.name.$dirty && form.name.$invalid"><span class=text-danger ng-show=form.name.$error.required translate>Name is required</span> <span class=text-danger ng-show=form.name.$error.maxlength translate>Name should not exceed 200 characters</span></small></div></div><div class=form-group><label for=measurementDesc class="col-sm-3 control-label" translate>Localized description</label><div class=col-sm-8><textarea rows=4 id=measurementDesc name=description class=form-control ng-maxlength=200 ng-model=measurement.localized_description ng-required=true style="resize: vertical;max-height: 200px;"></textarea> <small class=help-text ng-show="form.description.$dirty && form.description.$invalid"><span class=text-danger ng-show=form.description.$error.required translate>Description is required</span> <span class=text-danger ng-show=form.description.$error.maxlength translate>Description should not exceed 200 characters</span></small></div></div></div><div ng-include="\'partials/spinner.html\'" ng-hide=isLocaleLoaded></div></form></div><div class=modal-footer><button type=button class="btn btn-default" ng-click=close()><i class="glyphicon glyphicon-remove"></i> <span translate>Close</span></button> <button type=button ng-disabled="form.$invalid || isLocaleLoaded == false" class="btn btn-primary" ng-click=save()><i class="glyphicon glyphicon-ok"></i> <span translate>Save</span></button></div>')}]),angular.module("gma").run(["$templateCache",function(e){e.put("partials/error/error.html",'<div class=jumbotron><h1><small class="glyphicon glyphicon-alert"></small> <span translate>Invalid Session</span></h1><p translate>You have been logged out or your session has expired due to inactivity.</p><p translate>Use the button below to log back in.</p><p><a class="btn btn-primary btn-lg" href={{loginUrl}} role=button><i class="glyphicon glyphicon-log-in"></i> <span translate>Log In</span></a></p></div>')}]),angular.module("gma").run(["$templateCache",function(e){e.put("partials/map/_confirmation-dialog.html",'<div class=modal-header><button type=button class=close ng-click=no()><span aria-hidden=true>&times;</span><span class=sr-only translate>Close</span></button><h4 class=modal-title translate>Confirm ?</h4></div><div class=panel-body><h4 translate>Are you sure you want to delete ?</h4></div><div class=modal-footer><button type=button class="btn btn-default" ng-click=no()><i class="glyphicon glyphicon-remove"></i> <span translate>Cancel</span></button> <button type=button class="btn btn-warning" ng-click=yes()><i class="glyphicon glyphicon-trash"></i> <span translate>Delete</span></button></div>')}]),angular.module("gma").run(["$templateCache",function(e){e.put("partials/map/edit-church.html",'<div id=church_window><div style=clear:both></div><div class=church-window><h4>{{edit_church.name}}<br><small>{{edit_church.size}} <span translate>members</span></small> <small ng-if="!edit_church.editable && edit_church.created_by_email"><br>{{edit_church.created_by_email}}</small></h4><form name=form novalidate><table class="table table-condensed"><tr><td><b translate>Contact Name</b></td><td><input type=text class="form-control input-sm" ng-show=edit_church.editable ng-model=edit_church.contact_name> <label ng-hide=edit_church.editable>{{edit_church.contact_name}}</label></td></tr><tr><td><b translate>Contact Email</b></td><td><input type=email name=email class="form-control input-sm" ng-show=edit_church.editable ng-model=edit_church.contact_email> <small class=help-text ng-show="form.email.$dirty && form.email.$invalid"><span class=text-danger ng-show=form.email.$error.email translate>Invalid email format</span></small> <label ng-hide=edit_church.editable>{{edit_church.contact_email}}</label></td></tr><tr><td><b translate>Contact Mobile</b></td><td><input type=text name=mobile placeholder="{{\'+99 99999999\'|translate}}" class="form-control input-sm" ng-show=edit_church.editable ng-model=edit_church.contact_mobile ng-pattern="/^(\\d+|\\+)*(\\s|\\d)+$/"> <small class=help-text ng-show="form.mobile.$dirty && form.mobile.$invalid"><span class=text-danger ng-show=form.mobile.$error.pattern translate>Mobile number is invalid.</span></small> <label ng-hide=edit_church.editable>{{edit_church.contact_mobile}}</label></td></tr><tr><td><b translate>Jesus film activity</b></td><td><div ng-show=edit_church.editable><label class=radio-inline><input name=jf_contrib type=radio value=1 ng-model=edit_church.jf_contrib ng-required=true> <span translate>Yes</span></label> <label class=radio-inline><input name=jf_contrib type=radio value=0 ng-model=edit_church.jf_contrib ng-required=true> <span translate>No</span></label><br><small ng-show=form.jf_contrib.$invalid class="help-text text-danger" translate>Please make a choice</small></div><label ng-hide=edit_church.editable ng-switch=edit_church.jf_contrib><span ng-switch-when=true translate>Yes</span> <span ng-switch-when=false translate>No</span></label></td></tr><tr ng-show=edit_church.editable><td><b translate>Type</b></td><td><select class="form-control input-sm" ng-model=edit_church.development ng-disabled=!edit_church.editable ng-required=true><option value=1 translate>Target</option><option value=2 translate>Group</option><option value=3 translate>Church</option><option value=5 translate>Multiplying Church</option></select></td></tr><tr ng-show=edit_church.editable><td><b translate>Size</b></td><td><input type=number class="form-control input-sm" ng-disabled=!edit_church.editable ng-model=edit_church.size min=0 max=2147483647 ng-maxlength=10></td></tr><tr ng-show=edit_church.editable ng-if="!current.hasRole(\'blocked\')"><td><b translate>Security</b></td><td><select class="form-control input-sm" name=security ng-model=edit_church.security ng-disabled=!edit_church.editable ng-required=true><option value=1 translate>Private</option><option value=2 translate>Registered Users</option><option value=3 translate>Public</option></select><small class=help-text ng-show="form.security.$dirty && form.security.$invalid"><span class=text-danger ng-show=form.security.$error.required translate>Security is a required field</span></small></td></tr><tr ng-if="edit_church.editable && current.hasRole([\'admin\',\'inherited_admin\',\'leader\', \'inherited_leader\'])"><td><b translate>Ministry</b></td><td><select class="form-control input-sm" ng-model=edit_church.ministry_id ng-options="m.ministry_id as m.name for m in current.ministries | roleFilter:[\'admin\',\'inherited_admin\',\'leader\',\'inherited_leader\'] | orderBy:\'name\'"></select></td></tr></table></form><div ng-if=edit_church.editable class="btn-group btn-group-sm btn-group-justified" role=group><div class="btn-group btn-group-sm dropup" dropdown><button type=button class="btn btn-default dropdown-toggle" dropdown-toggle><span translate>Options</span> <span class=caret></span></button><ul class=dropdown-menu role=menu><li ng-if=canAddStories(edit_church)><a ng-click="addStoryToIcon(edit_church,\'church\')"><span class="glyphicon glyphicon-tag" aria-hidden=true></span> <span translate>Add Story</span></a></li><li><a ng-click=makeMovableIcon.MoveChurch()><span class="glyphicon glyphicon-move" aria-hidden=true></span> <span translate>Move Church</span></a></li><li><a ng-click=SetParent() ng-if="edit_church.parents.length == 0"><span class="glyphicon glyphicon-resize-small" aria-hidden=true></span> <span translate>Set Parent Church</span></a> <a ng-click=RemoveParent() ng-if="edit_church.parents.length == 1"><span class="glyphicon glyphicon-remove-circle" aria-hidden=true></span> <span translate>Remove Parent Church</span></a></li><li ng-if="edit_church.child_count == 0" role=presentation class=divider></li><li ng-if="edit_church.child_count == 0"><a ng-click=DeleteChurch()><span class="glyphicon glyphicon-trash" aria-hidden=true></span> <span translate>Delete Church</span></a></li></ul></div><a ng-disabled=form.$invalid class="btn btn-primary" ng-click="(form.$valid) ? updateChurch() : false"><span class="glyphicon glyphicon-pencil" aria-hidden=true></span> <span translate>Save Changes</span></a></div><div ng-if="!edit_church.editable && canAddStories(edit_church)" class="btn-group btn-group-justified" role=group><a ng-click=churchWindow.close() class="btn btn-sm btn-default">Close</a> <a ng-click="addStoryToIcon(edit_church,\'church\')" class="btn btn-primary btn-sm"><span class="glyphicon glyphicon-tag" aria-hidden=true></span> <span translate>Add Story</span></a></div></div></div>');
}]),angular.module("gma").run(["$templateCache",function(e){e.put("partials/map/edit-target-city.html",'<div id=edit_target_city_window><div class=clearfix></div><div class=target-city-window><h4 translate>Edit Target City</h4><form name=form novalidate><table class="table table-condensed"><tr><td><b translate>Name</b></td><td><input type=text name=name class="form-control input-sm" maxlength=200 placeholder="{{\'Name\'|translate}}" ng-model=edit_targetCity.name ng-required=true> <small class=help-text ng-show="form.name.$dirty && form.name.$invalid"><span class=text-danger ng-show=form.name.$error.required translate>Name is required.</span></small></td></tr><tr ng-if="current.assignment.area_code===\'GLBL\'"><td><b translate>Area</b></td><td><select class="form-control input-sm" name=area_code ng-options="code as name for (code,name) in area_codes" ng-model=new_targetCity.area_code ng-required=true><optgroup label="Select an area"></optgroup></select></td></tr><tr><td><b translate>Country</b></td><td><select class="form-control input-sm" name=iso_country ng-options="lang.iso3 as lang.name for lang in ISOCountries" ng-model=edit_targetCity.iso_country_code ng-required=true><optgroup label="Select country"></optgroup></select></td></tr><tr><td><b translate>Stage</b></td><td><select class="form-control input-sm" name=stage ng-model=edit_targetCity.stage ng-change="edit_targetCity.substage=\'\'" ng-required=true><option value=0>0</option><option value=1>1</option><option value=2>2</option><option value=3>3</option></select></td></tr><tr><td><b translate>Sub Stage</b></td><td><select class="form-control input-sm" ng-options="substage.val as substage.name for substage in targetCitySubStages | filter :{ stage : edit_targetCity.stage }" ng-model=edit_targetCity.substage><option translate>None</option></select></td></tr></table></form><div><div class="btn-group btn-group-sm btn-group-justified" role=group><div class="btn-group btn-group-sm dropup" dropdown><button type=button class="btn btn-default dropdown-toggle" dropdown-toggle><span translate>Options</span> <span class=caret></span></button><ul class=dropdown-menu role=menu><li><a ng-click=makeMovableIcon.MoveTargetCity()><span class="glyphicon glyphicon-move" aria-hidden=true></span> <span translate>Move Target city</span></a></li><li role=presentation class=divider></li><li><a ng-click=DeleteTargetCity(edit_targetCity)><span class="glyphicon glyphicon-trash" aria-hidden=true></span> <span translate>Delete Target city</span></a></li></ul></div><a ng-disabled=form.$invalid class="btn btn-primary" ng-click="(form.$valid) ? updateTargetCity(edit_targetCity) : false"><span class="glyphicon glyphicon-pencil" aria-hidden=true></span> <span translate>Save Changes</span></a></div></div><div class=clearfix></div></div></div>')}]),angular.module("gma").run(["$templateCache",function(e){e.put("partials/map/edit-training.html",'<div id=edit_training_window><div style=clear:both></div><div class=training-window><h4>{{edit_training.name}} <small>{{edit_training.type}}</small> <small ng-if="!edit_training.editable && edit_training.created_by_email"><br>{{edit_training.created_by_email}}</small></h4><form name=form novalidate><table class="table table-condensed"><tr><td><b translate>Name</b></td><td><input id=tbName name=name class="form-control input-sm" type=text placeholder="{{\'Name\'|translate}}" ng-model=edit_training.name ng-if=edit_training.editable ng-required=true> <small class=help-text ng-show="form.name.$dirty && form.name.$invalid"><span class=text-danger ng-show=form.name.$error.required translate>Name is required.</span></small> <b ng-if=!edit_training.editable>{{edit_training.name}}</b></td></tr><tr><td><b translate>Training Type</b></td><td><select name=type class="form-control input-sm" id=ddlTrainingType ng-model=edit_training.type ng-options="s.value as s.text for s in training_types" ng-if=edit_training.editable ng-required=true></select><b ng-if=!edit_training.editable>{{edit_training.type}}</b></td></tr><tr><td><b translate>Date</b></td><td><input class="form-control input-sm" id=tbDate type=date ng-model=edit_training.date ng-if=edit_training.editable> <b ng-if=!edit_training.editable>{{edit_training.date | date: \'MMM-dd-yyyy\'}}</b></td></tr><tr><td><b translate>MCC</b></td><td class=text-uppercase>{{edit_training.mcc}}</td></tr></table></form><table class="table table-striped"><thead><tr><th translate>Stage</th><th translate>Date</th><th translate>Participants</th><th></th></tr></thead><tbody><tr ng-repeat="comp in edit_training.gcm_training_completions track by comp.phase"><td>{{comp.phase}}</td><td class=training-stages-control><span ng-hide=comp.editMode>{{comp.date | date:\'mediumDate\'}}</span> <input ng-show=comp.editMode class=map-training-date type=date ng-model=comp.date ng-if=edit_training.editable></td><td><span ng-hide=comp.editMode>{{comp.number_completed}}</span> <input ng-show=comp.editMode class=map-training-number type=number ng-model=comp.number_completed min=0 ng-if=edit_training.editable></td><td ng-if=edit_training.editable><a ng-click="comp.editMode=true; comp.orig_date=comp.date; comp.orig_num = comp.number_completed;" ng-show=!comp.editMode>Edit</a><a href=javascript:void(0) ng-click="comp.editMode=false; updateTrainingCompletion(comp);" ng-show=comp.editMode>Save</a> <a href=javascript:void(0) ng-click="comp.editMode=false; comp.date=comp.orig_date; comp.number_completed = comp.orig_num;" ng-show=comp.editMode>Cancel</a> <a href=javascript:void(0) ng-click="deleteTrainingComplete(comp, $index)" translate>Delete</a></td></tr><tr ng-if=edit_training.editable><td>{{training.current_stage}}</td><td class=training-stages-control><input type=date class=map-training-date ng-model=edit_training.insert.date></td><td><input type=number class=map-training-number ng-model=edit_training.insert.number_completed min=0></td><td><a href=javascript:void(0) ng-click=addTrainingStage(edit_training); translate>Add Stage</a></td></tr></tbody></table><div ng-if=edit_training.editable class="btn-group btn-group-sm btn-group-justified" role=group><div class="btn-group btn-group-sm dropup" dropdown><button type=button class="btn btn-default dropdown-toggle" dropdown-toggle><span translate>Options</span> <span class=caret></span></button><ul class=dropdown-menu role=menu><li ng-if=canAddStories(edit_training)><a ng-click="addStoryToIcon(edit_training,\'training\')"><span class="glyphicon glyphicon-tag" aria-hidden=true></span> <span translate>Add Story</span></a></li><li><a ng-click=makeMovableIcon.MoveTraining()><span class="glyphicon glyphicon-move" aria-hidden=true></span> <span translate>Move Training</span></a></li><li role=presentation class=divider></li><li><a ng-click=DeleteTraining()><span class="glyphicon glyphicon-trash" aria-hidden=true></span> <span translate>Delete Training</span></a></li></ul></div><a ng-disabled=form.$invalid class="btn btn-primary" ng-click="(form.$valid) ? updateTraining() : false"><span class="glyphicon glyphicon-pencil" aria-hidden=true></span> <span translate>Save Changes</span></a></div></div><div ng-if="!edit_training.editable && canAddStories(edit_training)" class="btn-group btn-group-justified" role=group><a ng-click=trainingWindow.close() class="btn btn-sm btn-default">Close</a> <a ng-click="addStoryToIcon(edit_training,\'training\')" class="btn btn-primary btn-sm"><span class="glyphicon glyphicon-tag" aria-hidden=true></span> <span translate>Add Story</span></a></div><div class=clearfix></div></div>')}]),angular.module("gma").run(["$templateCache",function(e){e.put("partials/map/map.html",'<div id=map_canvas style="width: 100%; height: 650px;"></div><div id=side class=map_side ng-show=current.isLoaded><button title="{{\'Create new target point\' | translate}}" type=button class="btn btn-default btn-sm" ng-click=onAddIcon() ng-if="current.mcc == \'gcm\'"><i class="glyphicon glyphicon-plus"></i> <img ng-src="{{versionUrl(\'img/icon/target.png\')}}" height=25></button> <button title="{{\'Create new training\' | translate}}" type=button class="btn btn-default btn-sm" ng-click=onAddTraining() ng-if=current.assignment.mccs.length><i class="glyphicon glyphicon-plus"></i> <img ng-src="{{versionUrl(\'img/icon/training.png\')}}" height=25></button> <button title="{{\'Create new target city\' | translate}}" type=button class="btn btn-default btn-sm" ng-click=onAddTargetCity() ng-if="isTargetCitiesVisible===true"><i class="glyphicon glyphicon-plus"></i> <img ng-src="{{versionUrl(\'img/icon/target-city.png\')}}" height=25></button> <button title="{{\'My location on map\' | translate}}" type=button class="btn btn-default btn-my-location btn-sm" ng-click=myLocation() ng-if=supportsGeoLocation><span class="glyphicon glyphicon-screenshot"></span></button><div class=map_legend_header ng-click="show_legend = !show_legend"><span><span translate>LEGEND</span> <i class=glyphicon ng-class="{\'glyphicon-triangle-top\': (show_legend===true), \'glyphicon-triangle-bottom\' : (show_legend===false) }"></i></span></div><table class=map_legend ng-show=show_legend ng-init="show_legend=true"><tbody><tr ng-if="current.mcc == \'gcm\'"><td><input type=checkbox id=targetPointCheckBox class=church_development_checkbox ng-model=$parent.iconFilters.target_point development=1 ng-change=loadChurches()></td><td style="text-align:center; padding:2px 12px"><img class=map_legend_icon ng-src="{{versionUrl(\'img/icon/target.png\')}}"></td><td><label for=targetPointCheckBox translate>Target</label></td></tr><tr ng-if="current.mcc == \'gcm\'"><td><input type=checkbox id=groupPeopleCheckBox class=church_development_checkbox ng-model=$parent.iconFilters.group development=2 ng-change=loadChurches()></td><td style="text-align:center; padding:2px 12px"><img class=map_legend_icon ng-src="{{versionUrl(\'img/icon/group.png\')}}"></td><td><label for=groupPeopleCheckBox translate>Group</label></td></tr><tr ng-if="current.mcc == \'gcm\'"><td><input type=checkbox id=churchOrCummunityCheckBox class=church_development_checkbox ng-model=$parent.iconFilters.church development=3 ng-change=loadChurches()></td><td style="text-align:center; padding:2px 12px"><img class=map_legend_icon ng-src="{{versionUrl(\'img/icon/church.png\')}}"></td><td><label for=churchOrCummunityCheckBox translate>Church or community of disciples</label></td></tr><tr ng-if="current.mcc == \'gcm\'"><td><input type=checkbox id=multiplyingChurchCheckBox class=church_development_checkbox ng-model=$parent.iconFilters.mult_church development=5 ng-change=loadChurches()></td><td style="text-align:center; padding:2px 12px"><img class=map_legend_icon ng-src="{{versionUrl(\'img/icon/multiplying.png\')}}"></td><td><label for=multiplyingChurchCheckBox translate>Multiplying church or community of disciples</label></td></tr><tr ng-if="isTargetCitiesVisible===true"><td><input type=checkbox id=targetCityCheckBox class=church_development_checkbox ng-model=iconFilters.targetCity></td><td style="text-align:center; padding:2px 12px"><img class=map_legend_icon ng-src="{{versionUrl(\'img/icon/target-city.png\')}}"></td><td><label for=targetCityCheckBox translate>Target city</label></td></tr><tr ng-if=current.assignment.mccs.length><td><input type=checkbox id=trainingActivityCheckBox class=church_development_checkbox ng-model=iconFilters.training></td><td style="text-align:center; padding:2px 12px"><img class=map_legend_icon ng-src="{{versionUrl(\'img/icon/training.png\')}}"></td><td><label for=trainingActivityCheckBox translate>Training activity</label></td></tr><tr ng-if="current.mcc == \'gcm\'"><td><input type=checkbox id=jesusFilmCheckBox ng-model=$parent.iconFilters.jesus_film></td><td style="text-align:center; padding:2px 12px"><div style="display:inline-block; font-size:10px; font-weight:bold; border:1px solid #2a6800; padding:0px 3px; background-color:yellow; color:black">1</div></td><td><label for=jesusFilmCheckBox translate>Jesus film contribution</label></td></tr><tr ng-if="current.mcc == \'gcm\'"><td><input type=checkbox id=parentLineCheckBox ng-model=$parent.iconFilters.parent_lines></td><td style="text-align:center; padding:2px 12px"><div style="display:inline-block; width:14px; height:2px; background-color:grey"></div></td><td><label for=parentLineCheckBox translate>Parent lines</label></td></tr></tbody></table><div ng-if=current.assignment.mccs.length><div class=map_legend_header ng-click="show_filters = !show_filters"><span><span translate>FILTERS</span> <i class=glyphicon ng-class="{\'glyphicon-triangle-top\': (show_filters===true), \'glyphicon-triangle-bottom\' : (show_filters===false) }"></i></span></div><div class=map-legend ng-show=show_filters ng-init="show_filters=true"><div class=radio><label><input type=radio name=map_scope_filter id=filter_everything ng-model=$parent.map_scope_filter value=everything> <span translate>Everything</span></label></div><div class=radio><label><input type=radio name=map_scope_filter id=filter_my_target_area_only ng-model=$parent.map_scope_filter value=min_only> <span translate>{{current.assignment.name}} only</span></label></div><div class=radio><label><input type=radio name=map_scope_filter id=filterMyTree ng-model=$parent.map_scope_filter value=tree> <span translate>{{current.assignment.name}} + tree</span></label></div></div></div><hr style="margin:8px 0"><div><button type=button class="btn btn-default btn-block btn-sm" ng-click=setMyDefaultMapView() translate>Set as my Ministry Default View</button> <button type=button class="btn btn-default btn-block btn-sm" ng-click=setMinistryDefaultView() ng-if="current.hasRole([\'admin\',\'inherited_admin\'])" translate>Set Ministry Default View for others</button></div></div><div id=map_controls class=map-controls ng-show=current.isLoaded ng-init="mapExpended=false" ng-class="(mapExpended==true)?\'map-search-expand\':\'map-search-collapse\'"><div class="pull-left map-search"><div class=input-group><input id=searchBox type=text class=form-control placeholder="{{\'Search\'|translate}}..." ng-blur="mapExpended=!mapExpended"> <span title="{{\'Click to expand/collapse search\' | translate}}" ng-click="mapExpended=!mapExpended" class=input-group-addon><span class="glyphicon glyphicon-search"></span></span></div></div></div>')}]),angular.module("gma").run(["$templateCache",function(e){e.put("partials/map/new-church.html",'<div id=new_church_window><div class=clearfix></div><div class=church-window><h4 translate>Create New Church</h4><form name=form novalidate><table class="table table-condensed"><tr><td><b translate>Name</b></td><td><input type=text name=name class="form-control input-sm" ng-model=new_church.name ng-required=true> <small class=help-text ng-show="form.name.$dirty && form.name.$invalid"><span class=text-danger ng-show=form.name.$error.required translate>Name is required.</span></small></td></tr><tr><td><b translate>Contact Name</b></td><td><input type=text class="form-control input-sm" ng-model=new_church.contact_name></td></tr><tr><td><b translate>Contact Email</b></td><td><input type=email name=email placeholder="{{\'name@email.com\'|translate}}" class="form-control input-sm" ng-model=new_church.contact_email> <small class=help-text ng-show="form.email.$dirty && form.email.$invalid"><span class=text-danger ng-show=form.email.$error.email translate>Invalid email format</span></small></td></tr><tr><td><b translate>Contact Mobile</b></td><td><input type=text name=mobile placeholder="{{\'+99 99999999\'|translate}}" ng-maxlength=25 class="form-control input-sm" ng-model=new_church.contact_mobile ng-pattern="/^(\\d+|\\+)*(\\s|\\d)+$/"> <small class=help-text ng-show="form.mobile.$dirty && form.mobile.$invalid"><span class=text-danger ng-show=form.mobile.$error.pattern translate>Mobile number is invalid.</span></small></td></tr><tr><td><b translate>Jesus film activity</b></td><td><label class=radio-inline><input name=jf_contrib type=radio value=1 ng-model=new_church.jf_contrib ng-required=true> <span translate>Yes</span></label> <label class=radio-inline><input name=jf_contrib type=radio value=0 ng-model=new_church.jf_contrib ng-required=true> <span translate>No</span></label><br><small ng-show=form.jf_contrib.$invalid class="help-text text-danger" translate>Please make a choice</small></td></tr><tr><td><b translate>Type</b></td><td><select class="form-control input-sm" ng-model=new_church.development ng-required=true><option value=1 translate>Target</option><option value=2 translate>Group</option><option value=3 translate>Church</option><option value=5 translate>Multiplying Church</option></select></td></tr><tr><td><b translate>Size</b></td><td><input class="form-control input-sm" type=number min=0 max=2147483647 ng-maxlength=10 ng-model=new_church.size></td></tr><tr ng-if="!current.hasRole(\'self_assigned\')"><td><b translate>Security</b></td><td><select name=security class="form-control input-sm" ng-model=new_church.security ng-required=true><option value=1 translate>Private</option><option value=2 translate>Registered Users</option><option value=3 translate>Public</option></select><small class=help-text ng-show="form.security.$dirty && form.security.$invalid"><span class=text-danger ng-show=form.security.$error.required translate>Security is a required field</span></small></td></tr></table></form><div><div class="btn-group btn-group-sm btn-group-justified" role=group><a class="btn btn-default" ng-click=cancelAddNewIcon() translate>Cancel</a> <a ng-disabled=form.$invalid class="btn btn-primary" ng-click="(form.$valid) ? addChurch() : false"><span class="glyphicon glyphicon-ok" aria-hidden=true></span> <span translate>Add Church</span></a></div></div><div class=clearfix></div></div></div>')}]),angular.module("gma").run(["$templateCache",function(e){e.put("partials/map/new-target-city.html",'<div id=new_target_city_window><div class=clearfix></div><div class=target-city-window><h4 translate>New Target city</h4><form name=form novalidate><table class="table table-condensed"><tr><td><b translate>Name</b></td><td><input type=text name=name class="form-control input-sm" maxlength=200 placeholder=Name ng-model=new_targetCity.name ng-required=true> <small class=help-text ng-show="form.name.$dirty && form.name.$invalid"><span class=text-danger ng-show=form.name.$error.required translate>Name is required.</span></small></td></tr><tr ng-if="current.assignment.area_code===\'GLBL\'"><td><b translate>Area</b></td><td><select class="form-control input-sm" name=area_code ng-options="code as name for (code,name) in area_codes" ng-model=new_targetCity.area_code ng-required=true><optgroup label="Select an area"></optgroup></select></td></tr><tr><td><b translate>Country</b></td><td><select class="form-control input-sm" name=country ng-options="lang.iso3 as lang.name for lang in ISOCountries" ng-model=new_targetCity.iso_country_code ng-required=true><optgroup label="Select country"></optgroup></select></td></tr><tr><td><b translate>Stage</b></td><td><select class="form-control input-sm" name=stage ng-model=new_targetCity.stage ng-init="new_targetCity.stage=0" ng-change="new_targetCity.substage=\'\'" ng-required=true><option value=0>0</option><option value=1>1</option><option value=2>2</option><option value=3>3</option></select></td></tr><tr><td><b translate>Sub Stage</b></td><td><select class="form-control input-sm" ng-options="substage.val as substage.name for substage in targetCitySubStages | filter :{ stage : new_targetCity.stage }" ng-model=new_targetCity.substage><option translate>None</option></select></td></tr></table></form><div><div class="btn-group btn-group-sm btn-group-justified" role=group><a class="btn btn-default" ng-click=cancelAddNewIcon() translate>Cancel</a> <a ng-disabled=form.$invalid class="btn btn-primary" ng-click="(form.$valid) ? addTargetCity(new_targetCity) : false"><span class="glyphicon glyphicon-ok" aria-hidden=true></span> <span translate>Add Target city</span></a></div></div><div class=clearfix></div></div></div>')}]),angular.module("gma").run(["$templateCache",function(e){e.put("partials/map/new-training.html",'<div id=new_church_window><div class=clearfix></div><div class=church-window><h4 translate>New Church Training Activity</h4><form name=form novalidate><table class="table table-condensed"><tr><td><b translate>Name</b></td><td><input id=tbName name=name type=text class="form-control input-sm" placeholder=Name ng-model=new_training.name ng-required=true> <small class=help-text ng-show="form.name.$dirty && form.name.$invalid"><span class=text-danger ng-show=form.name.$error.required translate>Name is required.</span></small></td></tr><tr><td><b translate>Training Type</b></td><td><select id=ddlTrainingType class="form-control input-sm" ng-model=new_training.type ng-options="s.value as s.text for s in training_types" ng-required=true></select></td></tr><tr><td><b translate>Date</b></td><td><input id=tbDate type=date class="form-control input-sm" placeholder=yyyy-mm-dd ng-model=new_training.date ng-required=true></td></tr><tr><td><b translate>Participants</b></td><td><input id=tbParticipants type=number class="form-control input-sm" placeholder=(Optional) ng-model=new_training.participants min=0></td></tr><tr><td><b translate>MCC</b></td><td class=text-uppercase>{{current.mcc}}</td></tr></table></form><div><div class="btn-group btn-group-sm btn-group-justified" role=group><a class="btn btn-default" ng-click=cancelAddNewIcon() translate>Cancel</a> <a ng-disabled=form.$invalid class="btn btn-primary" ng-click="(form.$valid) ? addTraining() : false"><span class="glyphicon glyphicon-ok" aria-hidden=true></span> <span translate>Add Training</span></a></div></div><div class=clearfix></div></div></div>')}]),angular.module("gma").run(["$templateCache",function(e){e.put("partials/measurements/details.html",'<div class=modal-header><button type=button class=close ng-click=close();><span aria-hidden=true>&times;</span><span class=sr-only translate>Close</span></button><h3 class=modal-title>{{measurement.localized_name || measurement.localize_name || measurement.name}} <small>{{current.period.format(\'YYYY-MM\')}}</small></h3><div class="well well-sm measurement-desc" ng-show=measurement.description>{{measurement.localized_description || measurement.localize_description || measurement.description}}</div></div><div class=modal-body ng-show=spinner ng-include="\'partials/spinner.html\'"></div><div class="modal-body edit_meas_form" ng-hide=spinner><div id=measurement_graph gma-trend ng-model=trend></div><form class=form-horizontal name=editForm><div class=form-group><label class="col-xs-5 control-label text-uppercase" translate>Total</label><div class=col-xs-7><input class=form-control type=number ng-model="details.total[current.period.format(\'YYYY-MM\')]" disabled></div></div><fieldset ng-init="localToggle=false"><legend class=pointer ng-click="localToggle=!localToggle">{{current.assignment.name}} (<span translate>Local Team</span>) <span class="glyphicon pull-right" ng-class="{\'glyphicon-triangle-left\': !localToggle, \'glyphicon-triangle-bottom\': localToggle}"></span></legend><div ng-if="current.hasRole([\'admin\',\'inherited_admin\',\'leader\', \'inherited_leader\'])" ng-show=localToggle><div class=form-group ng-class="{\'has-error\': !editForm.local.$valid}"><label class="col-xs-5 control-label" translate>Local</label><div class=col-xs-7><input class=form-control type=number placeholder="Local Team" name=local ng-model=details.local_breakdown[ns]></div></div><div ng-show=localToggle class=form-group ng-repeat="(name, value) in filterSource(details.local_breakdown)"><label class="col-xs-5 control-label text-capitalize">{{name}}</label><div class=col-xs-7><input class=form-control type=number disabled ng-model=value></div></div></div><div ng-if="current.hasRole(\'member\')" ng-show=localToggle><div class=form-group><label class="col-xs-5 control-label" translate>Total</label><div class=col-xs-7><input class=form-control type=number ng-model=details.local_breakdown.total disabled></div></div></div></fieldset><fieldset ng-init="teamToggle=false"><legend class=pointer ng-click="teamToggle=!teamToggle"><span translate>Team Members</span> <span class="glyphicon pull-right" ng-class="{\'glyphicon-triangle-left\': !teamToggle, \'glyphicon-triangle-bottom\': teamToggle}"></span></legend><div class=form-group ng-class="{\'has-error\': !editForm.person.$valid}" ng-if="current.hasRole([\'member\',\'leader\',\'admin\'])"><label class="col-xs-5 control-label">{{current.user.last_name}}, {{current.user.first_name}}</label><div class=col-xs-7><input class=form-control type=number placeholder=Personal name=person ng-model=details.self_breakdown[ns]></div></div><div ng-show=teamToggle><div class=form-group ng-repeat="member in details.team | orderBy : \'first_name\'" ng-hide="(member.team_role===\'former_member\' && member.total===0)" ng-if="current.hasRole([\'admin\',\'inherited_admin\',\'leader\', \'inherited_leader\'])"><label class="col-xs-5 control-label">{{member.last_name}}, {{member.first_name}}</label><div class=col-xs-7><input class=form-control type=number ng-model=member.total disabled></div></div></div></fieldset><fieldset ng-if=details.sub_ministries.length ng-init="ministryToggle = false"><legend class=pointer ng-click="ministryToggle=!ministryToggle"><span translate>Sub-Ministries / Teams</span> <span class="glyphicon pull-right" ng-class="{\'glyphicon-triangle-left\': !ministryToggle, \'glyphicon-triangle-bottom\': ministryToggle}"></span></legend><div ng-show=ministryToggle><div class=form-group ng-repeat="ministry in details.sub_ministries"><label class="col-xs-5 control-label">{{ministry.name}}</label><div class=col-xs-7><input class=form-control type=number disabled ng-model=ministry.total></div></div></div></fieldset><fieldset ng-init="selfToggle=false" ng-if="current.hasRole([\'admin\',\'inherited_admin\',\'leader\', \'inherited_leader\']) && details.self_assigned.length"><legend class=pointer ng-click="selfToggle=!selfToggle"><span translate>Self Assigned Members (not yet approved)</span> <span class="glyphicon pull-right" ng-class="{\'glyphicon-triangle-left\': !selfToggle, \'glyphicon-triangle-bottom\': selfToggle}"></span></legend><div ng-show=selfToggle><div class=form-group ng-repeat="member in details.self_assigned"><label class="col-xs-5 control-label">{{member.last_name}}, {{member.first_name}}</label><div class=col-xs-7><div class="input-group col-xs-7" ng-class="{\'has-success\':member.success, \'has-error\':member.blocked}"><input class=form-control type=number ng-model=member.total disabled><div class=input-group-btn dropdown><button class="btn btn-default dropdown-toggle" dropdown-toggle aria-expanded=false ng-disabled=member.state ng-class="{\'btn-success\':member.success, \'btn-danger\':member.blocked}"><span ng-switch=member.state><span ng-switch-when=success translate>Approved</span> <span ng-switch-default translate>Approve</span></span> <span class=caret></span></button><ul class="dropdown-menu dropdown-menu-right" role=menu><li><a href=javascript:void(0) ng-click="approveSelfAssigned(member, \'admin\')" translate>Admin</a></li><li><a href=javascript:void(0) ng-click="approveSelfAssigned(member, \'member\')" translate>Member</a></li><li><a href=javascript:void(0) ng-click="approveSelfAssigned(member, \'leader\')" translate>Leader</a></li><li role=presentation class=divider></li><li><a href=javascript:void(0) ng-click="approveSelfAssigned(member, \'blocked\')" translate>Delete</a></li></ul></div></div></div></div></div></fieldset></form></div><div class=modal-footer><button type=button class="btn btn-default" ng-click=close()><i class="glyphicon glyphicon-remove"></i> <span translate>Close</span></button> <button type=button class="btn btn-primary" ng-click=saveDetails() ng-disabled="!editForm.$valid || spinner"><i class="glyphicon glyphicon-pencil"></i> <span translate>Save Measurements</span></button></div>')}]),angular.module("gma").run(["$templateCache",function(e){e.put("partials/measurements/lmi.html",'<div ng-switch=current.assignment.team_role><div class="lmi-item self_assigned" ng-switch-when=self_assigned ng-if=checkMeasureState(m)><div class=lmi-item-name popover="{{m.localized_description || m.localize_description || m.description}}" popover-trigger=mouseenter popover-popup-delay=1000>{{m.localized_name || m.localize_name || m.name}}</div><div class=lmi-input-group><input type=number min=0 class=form-control id={{m.measurement_type_ids.person}} name={{m.measurement_type_ids.person}} ng-model=m.person> <label class=lmi-input-addon for={{m.measurement_type_ids.person}} translate>personal</label></div></div><div class="lmi-item member" ng-switch-when=member ng-if=checkMeasureState(m)><div class=lmi-item-name ng-click=toggleMeasurementState(measurementState,m.perm_link_stub) ng-class="(measurementState[m.perm_link_stub]===1)? \'measurement-collapsed\':\'measurement-expanded\'" popover="{{m.localized_description || m.localize_description || m.description}}" popover-trigger=mouseenter popover-popup-delay=1000>{{m.localized_name || m.localize_name || m.name}}</div><div collapse="(measurementState[m.perm_link_stub]===1)"><div class="lmi-item-section col-xs-6"><div class=lmi-input-group><input type=number min=0 class=form-control id={{m.measurement_type_ids.person}} name={{m.measurement_type_ids.person}} ng-model=m.person> <label class=lmi-input-addon for={{m.measurement_type_ids.person}} translate>personal</label></div></div><div class="lmi-item-section col-xs-6" ng-click=editMeasurementDetails(m); style="cursor: pointer;"><div class=lmi-input-group><div class="form-control total">{{m.total}}</div><label class=lmi-input-addon translate>total</label></div></div><span class=clearfix></span></div></div><div class="lmi-item leader" ng-switch-when=leader ng-if=checkMeasureState(m)><div class=lmi-item-name ng-click=toggleMeasurementState(measurementState,m.perm_link_stub) ng-class="(measurementState[m.perm_link_stub]===1)? \'measurement-collapsed\':\'measurement-expanded\'" popover="{{m.localized_description || m.localize_description || m.description}}" popover-trigger=mouseenter popover-popup-delay=1000>{{m.localized_name || m.localize_name || m.name}}</div><div collapse="(measurementState[m.perm_link_stub]===1)"><div class="lmi-item-section col-xs-4"><div class=lmi-input-group><input type=number min=0 class=form-control id={{m.measurement_type_ids.person}} name={{m.measurement_type_ids.person}} ng-model=m.person> <label class=lmi-input-addon for={{m.measurement_type_ids.person}} translate>personal</label></div></div><div class="lmi-item-section col-xs-4"><div class=lmi-input-group><input type=number class=form-control id={{m.measurement_type_ids.local}} name={{m.measurement_type_ids.local}} ng-model=m.local> <label class=lmi-input-addon for={{m.measurement_type_ids.local}} translate>Team</label></div></div><div class="lmi-item-section col-xs-4" ng-click=editMeasurementDetails(m); style="cursor: pointer;"><div class=lmi-input-group><div class="form-control total">{{m.total}}</div><label class=lmi-input-addon translate>total</label></div></div><span class=clearfix></span></div></div><div class="lmi-item leader" ng-switch-when=admin ng-if=checkMeasureState(m)><div class=lmi-item-name ng-click=toggleMeasurementState(measurementState,m.perm_link_stub) ng-class="(measurementState[m.perm_link_stub]===1)? \'measurement-collapsed\':\'measurement-expanded\'" popover="{{m.localized_description || m.localize_description || m.description}}" popover-trigger=mouseenter popover-popup-delay=1000>{{m.localized_name || m.localize_name || m.name}}</div><div collapse="(measurementState[m.perm_link_stub]===1)"><div class="lmi-item-section col-xs-4"><div class=lmi-input-group><input type=number min=0 class=form-control id={{m.measurement_type_ids.person}} name={{m.measurement_type_ids.person}} ng-model=m.person> <label class=lmi-input-addon for={{m.measurement_type_ids.person}} translate>personal</label></div></div><div class="lmi-item-section col-xs-4"><div class=lmi-input-group><input type=number class=form-control id={{m.measurement_type_ids.local}} name={{m.measurement_type_ids.local}} ng-model=m.local> <label class=lmi-input-addon for={{m.measurement_type_ids.local}} translate>Team</label></div></div><div class="lmi-item-section col-xs-4" ng-click=editMeasurementDetails(m); style="cursor: pointer;"><div class=lmi-input-group><div class="form-control total">{{m.total}}</div><label class=lmi-input-addon translate>total</label></div></div><span class=clearfix></span></div></div><div class="lmi-item inherited_leader" ng-switch-when=inherited_leader ng-if=checkMeasureState(m)><div class=lmi-item-name ng-click=toggleMeasurementState(measurementState,m.perm_link_stub) ng-class="(measurementState[m.perm_link_stub]===1)? \'measurement-collapsed\':\'measurement-expanded\'" popover="{{m.localized_description || m.localize_description || m.description}}" popover-trigger=mouseenter popover-popup-delay=1000>{{m.localized_name || m.localize_name || m.name}}</div><div collapse="(measurementState[m.perm_link_stub]===1)"><div class="lmi-item-section col-xs-6"><div class=lmi-input-group ng-click=toggleMeasurementState(measurementState,m.perm_link_stub) ng-class="(measurementState[m.perm_link_stub]===1)? \'measurement-collapsed\':\'measurement-expanded\'"><input type=number class=form-control id={{m.measurement_type_ids.local}} name={{m.measurement_type_ids.local}} ng-model=m.local> <label class=lmi-input-addon for={{m.measurement_type_ids.local}} translate>Team</label></div></div><div class="lmi-item-section col-xs-6" ng-click=editMeasurementDetails(m); style="cursor: pointer;"><div class=lmi-input-group><div class="form-control total">{{m.total}}</div><label class=lmi-input-addon translate>total</label></div></div><span class=clearfix></span></div></div><div class="lmi-item inherited_leader" ng-switch-when=inherited_admin ng-if=checkMeasureState(m)><div class=lmi-item-name ng-click=toggleMeasurementState(measurementState,m.perm_link_stub) ng-class="(measurementState[m.perm_link_stub]===1)? \'measurement-collapsed\':\'measurement-expanded\'" popover="{{m.localized_description || m.localize_description || m.description}}" popover-trigger=mouseenter popover-popup-delay=1000>{{m.localized_name || m.localize_name || m.name}}</div><div collapse="(measurementState[m.perm_link_stub]===1)"><div class="lmi-item-section col-xs-6"><div class=lmi-input-group><input type=number class=form-control id={{m.measurement_type_ids.local}} name={{m.measurement_type_ids.local}} ng-model=m.local> <label class=lmi-input-addon for={{m.measurement_type_ids.local}} translate>Team</label></div></div><div class="lmi-item-section col-xs-6" ng-click=editMeasurementDetails(m); style="cursor: pointer;"><div class=lmi-input-group><div class="form-control total">{{m.total}}</div><label class=lmi-input-addon translate>total</label></div></div><span class=clearfix></span></div></div></div>');
}]),angular.module("gma").run(["$templateCache",function(e){e.put("partials/measurements/measurements.html",'<div class="panel panel-default" ng-show=current.isLoaded><div class=panel-body><form name=lmiForm class=measurements novalidate><fieldset><legend><div class=col-sm-4><span translate>Local Movement Indicators</span></div><div class="col-sm-8 text-right"><div class=col-sm-5></div><div class=col-sm-4 ng-if=current.assignment.content_locales><select class="form-control input-sm" ng-change=loadMeasurements(currentLanguage) ng-model=currentLanguage ng-options="lang.iso_code as lang.english_name for lang in current.langList | filter:filterByLangCode"><optgroup label="Select a language"></optgroup></select></div><div class="col-sm-3 pull-right"><button type=button class="btn btn-primary pull-right btn-sm" ng-disabled="!(lmiForm.$valid && lmiForm.$dirty)" ng-click=saveMeasurements()><i class="glyphicon glyphicon-floppy-disk"></i> <span translate>Save Changes</span></button></div></div><div class=clearfix></div></legend><table class=lmi_table><thead><tr><th></th><th><h1><small translate>Faith Actions</small></h1></th><th></th><th><h1><small translate>Fruit</small></h1></th><th></th><th><h1><small translate>Outcome</small></h1></th></tr></thead><tbody><tr><td class=vertical-text><h1><small translate>Win</small></h1></td><td><div ng-init="measurementState[m.perm_link_stub] = ((measurementState[m.perm_link_stub] === undefined) ? 0 : measurementState[m.perm_link_stub])" ng-repeat="m in measurements | filter: {section: \'win\', column:\'faith\'} | orderBy:\'sort_order\'" ng-include="\'partials/measurements/lmi.html\'"></div></td><td><span class="glyphicon glyphicon-chevron-right"></span></td><td><div ng-init="measurementState[m.perm_link_stub] = ((measurementState[m.perm_link_stub] === undefined) ? 0 : measurementState[m.perm_link_stub])" ng-repeat="m in measurements | filter: {section: \'win\', column: \'fruit\'} | orderBy:\'sort_order\'" ng-include="\'partials/measurements/lmi.html\'"></div></td><td rowspan=3><span class="glyphicon glyphicon-chevron-right"></span></td><td rowspan=3><div ng-init="measurementState[m.perm_link_stub] = ((measurementState[m.perm_link_stub] === undefined) ? 0 : measurementState[m.perm_link_stub])" ng-repeat="m in measurements | filter:{column: \'outcome\'} | orderBy:\'sort_order\'" ng-include="\'partials/measurements/lmi.html\'"></div></td></tr><tr><td class=vertical-text><h1><small translate>Build</small></h1></td><td><div ng-init="measurementState[m.perm_link_stub] = ((measurementState[m.perm_link_stub] === undefined) ? 0 : measurementState[m.perm_link_stub])" ng-repeat="m in measurements | filter: {section: \'build\', column: \'faith\'} | orderBy:\'sort_order\'" ng-include="\'partials/measurements/lmi.html\'"></div></td><td><span class="glyphicon glyphicon-chevron-right"></span></td><td><div ng-init="measurementState[m.perm_link_stub] = ((measurementState[m.perm_link_stub] === undefined) ? 0 : measurementState[m.perm_link_stub])" ng-repeat="m in measurements | filter: {section: \'build\', column: \'fruit\'} | orderBy:\'sort_order\'" ng-include="\'partials/measurements/lmi.html\'"></div></td></tr><tr><td class=vertical-text><h1><small translate>Send</small></h1></td><td><div ng-init="measurementState[m.perm_link_stub] = ((measurementState[m.perm_link_stub] === undefined) ? 0 : measurementState[m.perm_link_stub])" ng-repeat="m in measurements | filter: {section: \'send\', column: \'faith\'} | orderBy:\'sort_order\'" ng-include="\'partials/measurements/lmi.html\'"></div></td><td><span class="glyphicon glyphicon-chevron-right"></span></td><td><div ng-init="measurementState[m.perm_link_stub] = ((measurementState[m.perm_link_stub] === undefined) ? 0 : measurementState[m.perm_link_stub])" ng-repeat="m in measurements | filter: {section: \'send\', column: \'fruit\'} | orderBy:\'sort_order\'" ng-include="\'partials/measurements/lmi.html\'"></div></td></tr></tbody></table></fieldset><fieldset ng-if=hasOther()><legend translate>Other Measurements</legend><div><div ng-init="measurementState[m.perm_link_stub] = ((measurementState[m.perm_link_stub] === undefined) ? 0 : measurementState[m.perm_link_stub])" class=col-xs-4 ng-repeat="m in measurements | filter: {section: \'other\', column: \'other\'} | orderBy:\'sort_order\'" ng-include="\'partials/measurements/lmi.html\'"></div></div></fieldset></form><div class=pull-right><button type=button class="btn btn-primary btn-sm" ng-click=saveMeasurements() ng-disabled="!(lmiForm.$valid && lmiForm.$dirty)"><i class="glyphicon glyphicon-floppy-disk"></i> <span translate>Save Changes</span></button></div></div></div>')}]),angular.module("gma").run(["$templateCache",function(e){e.put("partials/preference/user-preference-modal.html",'<div class=modal-header><button type=button class=close ng-click=close()><span aria-hidden=true>&times;</span><span class=sr-only translate>Close</span></button><h4 class=modal-title translate>My preferences</h4></div><div class="modal-body form-horizontal"><div class=form-group><label class="col-sm-4 control-label" translate>Preferred ministry</label><div class=col-sm-7><select class=form-control ng-change=changeMCCS(options.preferred_ministry) ng-model=options.preferred_ministry ng-options="ministry.ministry_id as ministry.name for ministry in ministries"><option translate>Default</option></select></div></div><div class=form-group><label class="col-sm-4 control-label" translate>Preferred MCC</label><div class=col-sm-7><select class=form-control ng-model=options.preferred_mcc ng-options="mcc.mcc as mcc.mccLabel for mcc in mccs"><option translate>Default</option></select></div></div><div class=form-group><label class="col-sm-4 control-label" translate>Supported staff</label><div class=col-sm-8><label class=radio-inline><input type=radio value=1 ng-model=options.supported_staff> <span translate>Yes</span></label> <label class=radio-inline><input type=radio value=0 ng-model=options.supported_staff> <span translate>No</span></label></div></div><div class=form-group ng-if=current.assignment.content_locales><label class="col-sm-4 control-label" translate>Content language</label><div class=col-sm-7><select class=form-control ng-model=options.content_locales[current.assignment.ministry_id] ng-options="lang.iso_code as lang.english_name for lang in current.langList | filter:filterByLangCode"></select><small class="help-text text-info"><span translate>Preferred content language for</span> {{current.assignment.name}}</small></div></div><div class=form-group ng-if=staticLocales><label class="col-sm-4 control-label" translate>Application language</label><div class=col-sm-7><select class=form-control ng-model=options.static_locale ng-options="code as name+\' - (\'+code+\')\' for (code,name) in staticLocales"></select></div></div></div><div class=modal-footer><button type=button class="btn btn-default" ng-click=close()><i class="glyphicon glyphicon-remove"></i> <span translate>Cancel</span></button> <button type=button class="btn btn-primary" ng-click=savePreference(options)><i class="glyphicon glyphicon-ok"></i> <span translate>Save</span></button></div>')}]),angular.module("gma").run(["$templateCache",function(e){e.put("partials/reports/reports.html","<div id=reports-chart style=width:100%;height:400px;margin-bottom:50px;></div><div id=reports-table></div>")}]),angular.module("gma").run(["$templateCache",function(e){e.put("partials/stories/edit-story-dialog.html",'<div class=modal-header><button type=button class=close ng-click=close()><span aria-hidden=true>&times;</span><span class=sr-only translate>Close</span></button><h4 class=modal-title translate>Edit story</h4></div><div class=modal-body><form class=form-horizontal name=form ng-submit=updateStory(story) novalidate><div class=form-group><label class="col-md-3 control-label" translate>Title</label><div class=col-md-8><input type=text name=title ng-maxlength=120 class=form-control placeholder=Title ng-model=story.title ng-required=true> <small class=help-text ng-show="form.title.$dirty && form.title.$invalid"><span class=text-danger ng-show=form.title.$error.required translate>Story title field is required</span> <span class=text-danger ng-show=form.title.$error.maxlength translate>Story title should not exceed 120 characters</span></small></div></div><div class=form-group><label class="col-md-3 control-label" translate>Content</label><div class=col-md-8><textarea rows=5 name=content ng-maxlength={{storiesConfig.content_length}} class=form-control ng-model=story.content ng-required=true style="resize: vertical;max-height: 300px;"></textarea> <small class=help-text ng-hide=form.content.$error.maxlength><span>You have {{storiesConfig.content_length - story.content.length}} of {{storiesConfig.content_length}} characters remaining</span><br></small> <small class=help-text ng-show="form.content.$dirty && form.content.$invalid"><span class=text-danger ng-show=form.content.$error.required translate>Story content field is required</span>.<span class=text-danger ng-show=form.content.$error.maxlength><span translate>Story content should not exceed</span> {{storiesConfig.content_length}} <span translate>characters</span></span></small></div></div><div class=form-group><label class="col-md-3 control-label" translate>Upload an image</label><div class=col-md-9><div class=col-md-8><input type=file accept=image/* name=image id=image-file ng-model=image image-resizer image-model=imageFile resize-max-height={{storiesConfig.image_height}} resize-max-width={{storiesConfig.image_width}} resize-quality=1> <small class=help-block><span class=text-info><span translate>Image will be resized to</span> {{storiesConfig.image_height}}x{{storiesConfig.image_width}} px, <span translate>existing image will be replaced</span></span><br><span class=text-danger ng-show=form.image.$error.invalidImage translate>Invalid image file input.</span></small></div><div class="media-right col-md-2" ng-show=imageFile.url><img title=Preview class=thumbnail alt=image-preview height=100 width=100 ng-src={{imageFile.url}}></div></div></div><div class=form-group><label class="col-md-3 control-label" translate>Privacy</label><div class=col-md-9><div class=col-xs-3><select class=form-control ng-model=story.privacy ng-required=true><option value=public>Registered users</option><option value=team_only translate>Team only</option></select></div><div class=col-xs-6><label class="col-xs-6 control-label" translate>Publish status</label><div class=col-xs-6><select class=form-control ng-model=story.state ng-required=true><option value=published translate>Published</option><option value=draft translate>Draft</option><option value=removed translate>Removed</option></select></div></div></div></div><div class=form-group><label class="col-md-3 control-label" translate>Tagged ministry</label><div class=col-md-9><div class=row><div class=col-xs-3><input type=hidden ng-model=story.ministry_id><p class="form-control-static text-center">{{story.ministry_name}}</p></div><div class=col-xs-6 ng-if=story.mcc><label class="col-md-6 control-label" translate>Tagged MCC :</label><div class=col-md-6><input type=hidden ng-model=story.mcc><p class="form-control-static text-center text-uppercase">{{story.mcc}}</p></div></div></div></div></div></form></div><div class=modal-footer><button type=button class="btn btn-default" ng-click=close()><i class="glyphicon glyphicon-remove"></i> Close</button> <button type=button ng-disabled=form.$invalid class="btn btn-primary" ng-click=updateStory(story)><i class=glyphicon ng-class="{\'glyphicon-pencil\': (story.state!==\'removed\'), \'glyphicon-trash\' : (story.state===\'removed\')}"></i> <span translate>Update</span></button></div>')}]),angular.module("gma").run(["$templateCache",function(e){e.put("partials/stories/new-story-dialog.html",'<div class=modal-header><button type=button class=close ng-click=close()><span aria-hidden=true>&times;</span><span class=sr-only translate>Close</span></button><h4 ng-hide=iconName class=modal-title translate>Add new story</h4><h4 ng-show=iconName class=modal-title translate>Add new story to - {{iconName}}</h4></div><div class=modal-body><form class=form-horizontal name=form ng-submit=saveStory(story) novalidate><div class=form-group><label class="col-md-3 control-label" translate>Title</label><div class=col-md-8><input type=text name=title ng-maxlength=120 class=form-control placeholder="{{\'Title\' | translate}}" ng-model=story.title ng-required=true> <small class=help-text ng-show="form.title.$dirty && form.title.$invalid"><span class=text-danger ng-show=form.title.$error.required translate>Story title field is required</span> <span class=text-danger ng-show=form.title.$error.maxlength translate>Story title should not exceed 120 characters</span></small></div></div><div class=form-group><label class="col-md-3 control-label" translate>Content</label><div class=col-md-8><textarea rows=5 name=content ng-maxlength={{storiesConfig.content_length}} class=form-control ng-model=story.content ng-required=true style="resize: vertical;max-height: 300px;"></textarea> <small class=help-text ng-hide=form.content.$error.maxlength><span translate>You have {{storiesConfig.content_length - story.content.length}} of {{storiesConfig.content_length}} characters remaining</span><br></small> <small class=help-text ng-show="form.content.$dirty && form.content.$invalid"><span class=text-danger ng-show=form.content.$error.required translate>Story content field is required</span> <span class=text-danger ng-show=form.content.$error.maxlength translate>Story content should not exceed {{storiesConfig.content_length}} characters</span></small></div></div><div class=form-group><label class="col-md-3 control-label" translate>Upload an image</label><div class=col-md-9><div class=col-md-8><input type=file accept=image/* name=image id=image-file ng-model=image image-resizer image-model=imageFile resize-max-height={{storiesConfig.image_height}} resize-max-width={{storiesConfig.image_width}} resize-quality=1> <small class=help-block><span class=text-info><span translate>Image will be resized to</span> {{storiesConfig.image_height}}x{{storiesConfig.image_width}} px</span><br><span class=text-danger ng-show=form.image.$error.invalidImage translate>Invalid image file input.</span></small></div><div ng-show=imageFile.url class="media-right col-md-2 image-holder"><img title=Preview class=thumbnail alt=image-preview height=100 width=100 ng-src={{imageFile.url}}> <i ng-click=removeImage() class="glyphicon glyphicon-remove-sign" title="{{\'Remove image\' | translate }}"><span class=sr-only translate>Remove image</span></i></div></div></div><div class=form-group><label class="col-md-3 control-label" translate>Privacy</label><div class=col-md-9><div class=col-xs-3><select class=form-control ng-model=story.privacy ng-init="story.privacy=\'team_only\'" ng-required=true><option value=public translate>Registered users</option><option value=team_only translate>Team only</option></select></div><div class=col-xs-6><label class="col-xs-6 control-label" translate>Publish status</label><div class=col-xs-6><select class=form-control ng-model=story.state ng-init="story.state=\'published\'" ng-required=true><option value=published translate>Published</option><option value=draft translate>Draft</option></select></div></div></div></div><div class=form-group><label class="col-md-3 control-label" translate>Tagged ministry</label><div class=col-md-9><div class=row><div class=col-xs-3><input type=hidden ng-model=story.ministry_id ng-init="story.ministry_id=current.assignment.ministry_id"><p class="form-control-static text-center">{{current.assignment.name}}</p></div><div class=col-xs-6 ng-if=current.mcc><label class="col-md-6 control-label" translate>Tagged MCC</label><div class=col-md-6><input type=hidden ng-model=story.mcc ng-init="story.mcc=current.mcc"><p class="form-control-static text-center text-uppercase">{{current.mcc}}</p></div></div></div></div></div></form></div><div class=modal-footer><button type=button class="btn btn-default" ng-click=close()><i class="glyphicon glyphicon-remove"></i> <span translate>Close</span></button> <button ng-disabled="form.title.$invalid || form.content.$invalid" type=button class="btn btn-primary" ng-click=saveStory(story)><i class="glyphicon glyphicon-ok"></i> <span translate>Save</span></button></div>')}]),angular.module("gma").run(["$templateCache",function(e){e.put("partials/stories/stories.html",'<div ng-show=current.isLoaded><aside class="pull-left col-md-6 col-lg-8 stories-section"><section class="row panel panel-default panel-custom"><div class=panel-body><div class=pull-left><label title=Toggle class=checkbox-inline><input type=checkbox ng-change=searchStories(1,storiesParams) ng-model=storiesParams.self_only> <span translate>Created by me</span></label></div><div class=pull-right><button class="btn btn-default btn-sm" ng-click=searchStories(1,storiesParams) type=button title="{{\'Refresh List\' | translate}}"><i class="glyphicon glyphicon-refresh"></i><span class=sr-only translate>Refresh List</span></button> <button class="btn btn-primary btn-sm" ng-click=newStory()><i class="glyphicon glyphicon-plus"></i> <span translate>Add story</span></button></div><div class=clearfix></div></div></section><section ng-hide="storiesLoaded==false"><div class=stories-holder><div class="media media-custom" ng-repeat="story in visibleStories | orderBy : \'-created_at\'"><div class="media-left media-middle"><a ng-click=viewStory(story) title=View href=javascript:void(0) class="thumbnail thumb-128"><img class=media-object ng-src="{{(story.image_url===undefined || story.image_url==\'\') ? versionUrl(\'img/story-128.png\') : story.image_url+\'?v=\'+story.updated_at}}" alt=image height=128 width=128></a></div><div class=media-body><h4 class=media-heading><a ng-click=viewStory(story) href=javascript:void(0)>{{story.title}}</a></h4><p class=story-content>{{story.content}}</p><ul class=list-inline><li ng-show="storiesParams.self_only===true"><span class="text-capitalize label" ng-class="{\'label-success\': (story.state===\'published\'), \'label-default\' : (story.state==\'draft\'), \'label-danger\' : (story.state==\'removed\')}">{{story.state}}</span></li><li ng-hide="storiesParams.self_only===true"><i class="glyphicon glyphicon-user"></i> {{story.created_name}}</li><li><i class="glyphicon glyphicon-time"></i><time>{{story.created_at | date: \'MMM-dd-yyyy\'}}</time></li><li><i class="glyphicon glyphicon-tag"></i> <span>{{story.ministry_name}}</span><span ng-if=story.mcc>,</span> <span class=text-uppercase>{{story.mcc}}</span></li><li ng-show=story.church_name><i class="glyphicon glyphicon-map-marker"></i> {{story.church_name}}</li><li ng-show=story.training_name><i class="glyphicon glyphicon-education"></i> {{story.training_name}}</li><li ng-if=isStoryEditable(story)><a title="Edit story" ng-click=editStory(story) href=javascript:void(0)><i class="glyphicon glyphicon-pencil"></i> <span translate>Edit</span></a></li></ul></div></div><div class=text-center ng-if="storiesLoaded==true && visibleStories.length==0"><h4><i class="glyphicon glyphicon-info-sign"></i> <span translate>No story found</span></h4></div></div><nav class=stories-nav ng-hide="visibleStories.length==0"><pager ng-change=searchStories(storiesNav.currentPage,storiesParams) total-items=storiesNav.totalItems ng-model=storiesNav.currentPage items-per-page=storiesNav.perPage next-text="{{\'Older\'|translate}} »" previous-text="« {{\'Newer\'|translate}}"></pager></nav></section><div ng-include="\'partials/spinner.html\'" ng-hide="storiesLoaded==true"></div></aside><aside class="pull-right col-md-6 col-lg-4 news-feed-section"><div class=news-feeds-holder ng-hide="feedsLoaded==false || (recentNewsFeeds.length===0)"><span class=refresh-feeds ng-click=loadNewsFeeds(1) title="{{\'Refresh Feeds\'|translate}}"><i class="glyphicon glyphicon-refresh"></i><span class=sr-only translate>Refresh Feeds</span></span><ul class="list-group news-feed-ul"><li class=list-group-item ng-repeat="feed in recentNewsFeeds | orderBy : \'-timestamp\'"><h5 class=list-group-item-heading><i class="glyphicon glyphicon-time"></i> <b><time>{{feed.timestamp | date: \'MMM-dd-yyyy\'}}</time>| {{feed.ministry_name}}</b></h5><p class=list-group-item-text>{{feed.message}}</p></li></ul></div><nav class=feeds-nav ng-hide="recentNewsFeeds.length==0 || feedsLoaded==false"><pager ng-change=loadNewsFeeds(feedsNav.currentPage) total-items=feedsNav.totalItems ng-model=feedsNav.currentPage items-per-page=feedsNav.perPage next-text="{{\'Older\'|translate}} »" previous-text="« {{\'Newer\'|translate}}"></pager></nav><div class=text-center ng-if="feedsLoaded==true && recentNewsFeeds.length==0"><h4><i class="glyphicon glyphicon-info-sign"></i> No activity yet</h4></div><div ng-include="\'partials/spinner.html\'" ng-hide="feedsLoaded==true"></div></aside><div class=clearfix></div></div>')}]),angular.module("gma").run(["$templateCache",function(e){e.put("partials/stories/view-story-dialog.html",'<div class=modal-header><button type=button class=close ng-click=close()><span aria-hidden=true>&times;</span><span class=sr-only translate>Close</span></button><h4 class=modal-title translate>View story</h4></div><div class=modal-body><div class=media><div class=media-body><h4 class=media-heading>{{story.title}}</h4><ul class=list-inline><li ng-if="isSelfOnlyEnabled==true"><span class="text-capitalize label" ng-class="{\'label-success\': (story.state===\'published\'), \'label-default\' : (story.state==\'draft\'), \'label-danger\' : (story.state==\'removed\')}">{{story.state}}</span></li><li><i class=glyphicon ng-class="{\'glyphicon-eye-open\':(story.privacy===\'public\'),\'glyphicon-eye-close\' : (story.privacy===\'team_only\')}"></i> <span class=text-capitalize>{{story.privacy}}</span></li><li><i class="glyphicon glyphicon-time"></i><time>{{story.created_at | date: \'MMM-dd-yyyy\'}}</time></li><li ng-if="isSelfOnlyEnabled==false"><i class="glyphicon glyphicon-user"></i> {{story.created_name}}</li><li><i class="glyphicon glyphicon-tag"></i> <span>{{story.ministry_name}}</span><span ng-if=story.mcc>,</span> <span class=text-uppercase>{{story.mcc}}</span></li><li ng-show=story.church_name><i class="glyphicon glyphicon-map-marker"></i> {{story.church_name}}</li><li ng-show=story.training_name><i class="glyphicon glyphicon-education"></i> {{story.training_name}}</li></ul><div class=pull-left style="margin: 0.5em 1em 1em 0" ng-if="(story.image_url!==undefined && story.image_url!==\'\')"><img class="media-object img-thumbnail" ng-src="{{story.image_url+\'?v=\'+story.updated_at}}" alt=image height=128 width=128></div><p>{{story.content}}</p></div></div></div><div class=modal-footer><button type=button class="btn btn-default" ng-click=close()><i class="glyphicon glyphicon-remove"></i> <span translate>Close</span></button></div>')}]);
//# sourceMappingURL=partials.min.js.map
