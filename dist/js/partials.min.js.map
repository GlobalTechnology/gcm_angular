{"version":3,"sources":["application.html","join-ministry.html","ministry-item.html","spinner.html","admin/_edit-ministry.html","admin/_measurement.html","admin/_team-members.html","admin/add-measurement-type.html","admin/add-sub-ministry.html","admin/add-team-member.html","admin/admin.html","admin/confirm-member-drop.html","admin/confirm-team-drop.html","admin/confirm-update-role.html","admin/edit-measurement-type.html","error/error.html","map/_confirmation-dialog.html","map/edit-church.html","map/edit-target-city.html","map/edit-training.html","map/map.html","map/new-church.html","map/new-target-city.html","map/new-training.html","measurements/details.html","measurements/lmi.html","measurements/measurements.html","preference/user-preference-modal.html","reports/reports.html","stories/edit-story-dialog.html","stories/new-story-dialog.html","stories/stories.html","stories/view-story-dialog.html"],"names":["angular","module","run","$templateCache","put"],"mappings":"AAAAA,QAAAC,OAAA,OAAAC,KAAA,iBAAA,SAAAC,GACAA,EAAAC,IAAA,4BACA,o8GCFAJ,QAAAC,OAAA,OAAAC,KAAA,iBAAA,SAAAC,GACAA,EAAAC,IAAA,8BACA,4zCCFAJ,QAAAC,OAAA,OAAAC,KAAA,iBAAA,SAAAC,GACAA,EAAAC,IAAA,8BACA,8UCFAJ,QAAAC,OAAA,OAAAC,KAAA,iBAAA,SAAAC,GACAA,EAAAC,IAAA,wBACA,4dCFAJ,QAAAC,OAAA,OAAAC,KAAA,iBAAA,SAAAC,GACAA,EAAAC,IAAA,qCACA,q3FCFAJ,QAAAC,OAAA,OAAAC,KAAA,iBAAA,SAAAC,GACAA,EAAAC,IAAA,mCACA,qnDCFAJ,QAAAC,OAAA,OAAAC,KAAA,iBAAA,SAAAC,GACAA,EAAAC,IAAA,oCACA,ioJCFAJ,QAAAC,OAAA,OAAAC,KAAA,iBAAA,SAAAC,GACAA,EAAAC,IAAA,2CACA,k4GCFAJ,QAAAC,OAAA,OAAAC,KAAA,iBAAA,SAAAC,GACAA,EAAAC,IAAA,uCACA,ilCCFAJ,QAAAC,OAAA,OAAAC,KAAA,iBAAA,SAAAC,GACAA,EAAAC,IAAA,sCACA,skDCFAJ,QAAAC,OAAA,OAAAC,KAAA,iBAAA,SAAAC,GACAA,EAAAC,IAAA,4BACA,iYCFAJ,QAAAC,OAAA,OAAAC,KAAA,iBAAA,SAAAC,GACAA,EAAAC,IAAA,0CACA,m8BCFAJ,QAAAC,OAAA,OAAAC,KAAA,iBAAA,SAAAC,GACAA,EAAAC,IAAA,wCACA,0tBCFAJ,QAAAC,OAAA,OAAAC,KAAA,iBAAA,SAAAC,GACAA,EAAAC,IAAA,0CACA,m2BCFAJ,QAAAC,OAAA,OAAAC,KAAA,iBAAA,SAAAC,GACAA,EAAAC,IAAA,4CACA,6qFCFAJ,QAAAC,OAAA,OAAAC,KAAA,iBAAA,SAAAC,GACAA,EAAAC,IAAA,4BACA,maCFAJ,QAAAC,OAAA,OAAAC,KAAA,iBAAA,SAAAC,GACAA,EAAAC,IAAA,yCACA,8lBCFAJ,QAAAC,OAAA,OAAAC,KAAA,iBAAA,SAAAC,GACAA,EAAAC,IAAA,gCACA;ICFAJ,QAAAC,OAAA,OAAAC,KAAA,iBAAA,SAAAC,GACAA,EAAAC,IAAA,qCACA,iqFCFAJ,QAAAC,OAAA,OAAAC,KAAA,iBAAA,SAAAC,GACAA,EAAAC,IAAA,kCACA,0hJCFAJ,QAAAC,OAAA,OAAAC,KAAA,iBAAA,SAAAC,GACAA,EAAAC,IAAA,wBACA,u2MCFAJ,QAAAC,OAAA,OAAAC,KAAA,iBAAA,SAAAC,GACAA,EAAAC,IAAA,+BACA,wvGCFAJ,QAAAC,OAAA,OAAAC,KAAA,iBAAA,SAAAC,GACAA,EAAAC,IAAA,oCACA,4oECFAJ,QAAAC,OAAA,OAAAC,KAAA,iBAAA,SAAAC,GACAA,EAAAC,IAAA,iCACA,6lDCFAJ,QAAAC,OAAA,OAAAC,KAAA,iBAAA,SAAAC,GACAA,EAAAC,IAAA,qCACA,ygMCFAJ,QAAAC,OAAA,OAAAC,KAAA,iBAAA,SAAAC,GACAA,EAAAC,IAAA,iCACA;ICFAJ,QAAAC,OAAA,OAAAC,KAAA,iBAAA,SAAAC,GACAA,EAAAC,IAAA,0CACA,w8ICFAJ,QAAAC,OAAA,OAAAC,KAAA,iBAAA,SAAAC,GACAA,EAAAC,IAAA,iDACA,s1ECFAJ,QAAAC,OAAA,OAAAC,KAAA,iBAAA,SAAAC,GACAA,EAAAC,IAAA,gCACA,iHCFAJ,QAAAC,OAAA,OAAAC,KAAA,iBAAA,SAAAC,GACAA,EAAAC,IAAA,0CACA,kvICFAJ,QAAAC,OAAA,OAAAC,KAAA,iBAAA,SAAAC,GACAA,EAAAC,IAAA,yCACA,mjJCFAJ,QAAAC,OAAA,OAAAC,KAAA,iBAAA,SAAAC,GACAA,EAAAC,IAAA,gCACA,s0ICFAJ,QAAAC,OAAA,OAAAC,KAAA,iBAAA,SAAAC,GACAA,EAAAC,IAAA,0CACA","file":"partials.min.js","sourcesContent":["<div ng-controller=\"GMACtrl\" class=\"gmaApplication\" ng-class=\"appEnvironment\">\r\n\t<nav class=\"navbar navbar-inverse navbar-static-top\">\r\n\t\t<div class=\"container\">\r\n\t\t\t<div class=\"navbar-header\">\r\n\t\t\t\t<a class=\"navbar-brand\" href=\"javascript:void(0)\">{{appName}}</a>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"collapse navbar-collapse\">\r\n\t\t\t\t<!-- Ministry, MCC, Period controls -->\r\n\t\t\t\t<ul class=\"nav navbar-nav\" ng-if=\"current.assignment\">\r\n\r\n\t\t\t\t\t<!-- Ministry Assignments -->\r\n\t\t\t\t\t<li class=\"dropdown\" dropdown>\r\n\t\t\t\t\t\t<a href=\"javascript:void(0)\" class=\"dropdown-toggle  ministry-title\" dropdown-toggle>\r\n\t\t\t\t\t\t\t{{current.assignment.name}} <span class=\"caret\"></span>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t<ul class=\"dropdown-menu\" role=\"menu\">\r\n\t\t\t\t\t\t\t<li ng-repeat=\"a in current.assignments | orderBy:'name'\" ng-include=\"'partials/ministry-item.html'\" ng-class=\"{'dropdown-submenu' : (a.sub_ministries.length)}\"></li>\r\n\t\t\t\t\t\t\t<li class=\"divider\"></li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<a href=\"javascript:void(0)\" ng-click=\"joinMinistry(true)\" translate>Join another location / ministry</a>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</li>\r\n\r\n\t\t\t\t\t<!-- Mission Critical Components -->\r\n\t\t\t\t\t<li class=\"dropdown\" ng-if=\"current.assignment.mccs.length\" dropdown>\r\n\t\t\t\t\t\t<a href=\"javascript:void(0)\" class=\"dropdown-toggle\" dropdown-toggle>\r\n\t\t\t\t\t\t\t{{mccLabels[current.mcc]}} <span class=\"caret\"></span>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t<ul class=\"dropdown-menu\" role=\"menu\">\r\n\t\t\t\t\t\t\t<li ng-repeat=\"mcc in current.assignment.mccs | orderBy:mccSort\">\r\n\t\t\t\t\t\t\t\t<a href=\"javascript:void(0)\" ng-click=\"current.mcc = mcc\">{{mccLabels[mcc]}}</a>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</li>\r\n\r\n\t\t\t\t\t<!-- Period -->\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t<a href=\"javascript:void(0)\" ng-click=\"prevPeriod()\"><span class=\"glyphicon glyphicon-chevron-left\"></span></a>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li class=\"dropdown\" dropdown>\r\n\t\t\t\t\t\t<a href=\"javascript:void(0)\" class=\"dropdown-toggle\" dropdown-toggle>\r\n\t\t\t\t\t\t\t{{current.period.format('YYYY-MM')}} <span class=\"caret\"></span>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t<ul class=\"dropdown-menu\" role=\"menu\">\r\n\t\t\t\t\t\t\t<li ng-repeat=\"period in periods\">\r\n\t\t\t\t\t\t\t\t<a href=\"javascript:void(0)\" ng-click=\"current.period = period\">{{period.format('YYYY-MM')}}</a>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t<a href=\"javascript:void(0)\" ng-click=\"nextPeriod()\"><span class=\"glyphicon glyphicon-chevron-right\"></span></a>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\r\n\t\t\t\t<!-- Current User / Logout -->\r\n\t\t\t\t<ul class=\"nav navbar-nav navbar-right\" ng-if=\"current.user\">\r\n\t\t\t\t\t<li class=\"dropdown\" dropdown>\r\n\t\t\t\t\t\t<a href=\"javascript:void(0)\" class=\"dropdown-toggle\" dropdown-toggle role=\"button\" aria-expanded=\"false\">\r\n\t\t\t\t\t\t\t<span class=\"top-user-info pull-left\">\r\n\t\t\t\t\t\t\t\t<span class=\"top-user-name\">{{current.user.cas_username}}</span>\r\n\t\t\t\t\t\t\t\t<span class=\"top-user-role\"><i class=\"flag flag-indicator ng-class:langFlagClass\"></i><span class=\"small text-capitalize\">{{(current.assignment.team_role).replace('_',' - ')}}</span></span>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t<span class=\"caret\"></span>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t<ul class=\"dropdown-menu\" role=\"menu\">\r\n\t\t\t\t\t\t\t<li><a href=\"javascript:void(0)\" ng-click=\"showUserPreference()\"><i class=\"glyphicon glyphicon-star\"></i> <span translate>My Preferences</span></a></li>\r\n\t\t\t\t\t\t\t<li class=\"divider\"></li>\r\n\t\t\t\t\t\t\t<li><a href=\"javascript:void(0)\" ng-click=\"logout()\"><i class=\"glyphicon glyphicon-off\"></i> <span translate>Logout</span></a></li>\r\n\t\t\t\t\t\t\t<!--<li><a href=\"javascript:void(0)\" ng-click=\"invalidateSession()\">DEBUG: Invalidate Session</a></li>-->\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\r\n\t\t</div>\r\n\t</nav>\r\n\r\n\t<div class=\"container\">\r\n\t\t<div>\r\n\t\t\t<ul class=\"nav nav-tabs\" role=\"tablist\">\r\n\t\t\t\t<li ng-repeat=\"tab in tabs | filter:tabFilter\" ng-class=\"{active: $location.path() === tab.path}\">\r\n\t\t\t\t\t<a ng-href=\"#{{tab.path}}\"><i class=\"glyphicon {{tab.icon}}\"> </i> {{tab.name}}</a>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t\t<div class=\"tab-content\">\r\n\t\t\t\t<div class=\"tab-pane active\">\r\n\t\t\t\t\t<div ng-view></div>\r\n\t\t\t\t\t<div ng-include=\"'partials/spinner.html'\" ng-hide=\"current.isLoaded\"></div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"row\" ng-if=\"mobileApps\">\r\n\t\t\t<div class=\"col-xs-12\">\r\n\t\t\t\t<div class=\"text-center\">\r\n\t\t\t\t\t<span translate>Mobile Apps</span>:\r\n\t\t\t\t\t<a target=\"_blank\" ng-repeat-start=\"app in mobileApps\" ng-href=\"{{app.link}}\">{{app.label}}</a>\r\n\t\t\t\t\t<span ng-repeat-end ng-if=\"!$last\"> | </span>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<footer>\r\n\t\t\t<span>&copy; Campus Crusade for Christ - 2015</span>\r\n\t\t\t<span class=\"pull-right\">{{appVersion}}</span>\r\n\t\t</footer>\r\n\t</div>\r\n</div>\r\n<!-- global angular-growl container-->\r\n<div growl limit-messages=\"5\"></div>\r\n","<!-- Join new Ministry/Team Modal -->\r\n<div class=\"modal-header\">\r\n\t<h3 class=\"modal-title\" translate>Join Ministry/Team</h3>\r\n\r\n\t<p translate>Please identify a ministry team that you work most closely with and request to join that team.</p>\r\n</div>\r\n<div class=\"modal-body form-horizontal\">\r\n\t<div class=\"form-group\">\r\n\t\t<label for=\"ministryName\" class=\"col-xs-4 control-label\" translate>Ministry/Team:</label>\r\n\r\n\t\t<div class=\"col-xs-8\">\r\n\t\t\t<input id=\"ministryName\" class=\"form-control\" ng-model=\"ministry\"\r\n\t\t\t\t   typeahead=\"m as m.name for m in ministries | filter:$viewValue | limitTo:8\"\r\n\t\t\t\t   typeahead-min-length=\"2\" typeahead-editable=\"false\" />\r\n\r\n\t\t\t<p class=\"help-block\" translate>Start typing to search for ministry</p>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class=\"form-group\" ng-if=\"!allowClose\">\r\n        <label class=\"col-sm-4 control-label\" translate>Supported staff</label>\r\n        <div class=\"col-sm-8\" ng-init=\"$parent.user_preference.supported_staff = 0\">\r\n            <label class=\"radio-inline\"><input type=\"radio\" value=\"1\" ng-model=\"$parent.user_preference.supported_staff\" translate> Yes</label>\r\n            <label class=\"radio-inline\"><input type=\"radio\" value=\"0\" ng-model=\"$parent.user_preference.supported_staff\" translate> No</label>\r\n        </div>\r\n\t</div>\r\n</div>\r\n<div class=\"modal-footer\">\r\n\t<button type=\"button\" class=\"btn btn-primary\" ng-disabled=\"!ministry\" ng-click=\"join()\" translate>Join Ministry/Team</button>\r\n\t<button ng-if=\"allowClose\" type=\"button\" class=\"btn btn-default\" ng-click=\"cancel()\" translate>Cancel</button>\r\n</div>\r\n","<!-- Ministry/Team Dropdown elements -->\r\n<a href=\"javascript:void(0)\" ng-click=\"current.assignment = a\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">{{a.name}}</a>\r\n<ul class=\"dropdown-menu\" ng-if=\"a.sub_ministries.length\">\r\n\t<li ng-repeat=\"a in a.sub_ministries\" ng-include=\"'partials/ministry-item.html'\" ng-class=\"{'dropdown-submenu' : (a.sub_ministries.length)}\"></li>\r\n</ul>\r\n","<div class=\"spinner\">\n\t<div class=\"spinner-container container1\">\n\t\t<div class=\"circle1\"></div>\n\t\t<div class=\"circle2\"></div>\n\t\t<div class=\"circle3\"></div>\n\t\t<div class=\"circle4\"></div>\n\t</div>\n\t<div class=\"spinner-container container2\">\n\t\t<div class=\"circle1\"></div>\n\t\t<div class=\"circle2\"></div>\n\t\t<div class=\"circle3\"></div>\n\t\t<div class=\"circle4\"></div>\n\t</div>\n\t<div class=\"spinner-container container3\">\n\t\t<div class=\"circle1\"></div>\n\t\t<div class=\"circle2\"></div>\n\t\t<div class=\"circle3\"></div>\n\t\t<div class=\"circle4\"></div>\n\t</div>\n</div>\n","<div class=\"admin-item\">\r\n\t<div class=\"panel panel-default\">\r\n\t\t<div class=\"panel-heading\">\r\n\t\t\t<h3 class=\"panel-title\" translate>Edit current ministry</h3>\r\n\t\t\t<div class=\"clearfix\"></div>\r\n\t\t</div>\r\n\t\t<div class=\"panel-body\">\r\n            <form name=\"form\" class=\"form-horizontal\">\r\n\t\t\t<div class=\"form-group row\">\r\n\t\t\t\t<label for=\"ministryName\" class=\"col-sm-4 control-label\" translate>Ministry name</label>\r\n\r\n\t\t\t\t<div class=\"col-sm-6\">\r\n\t\t\t\t\t<input id=\"ministryName\" maxlength=\"255\" type=\"text\" name=\"name\" class=\"form-control\" ng-model=\"ministry.name\" ng-required=\"true\"/>\r\n                    <small class=\"help-text\" ng-show=\"form.name.$dirty && form.name.$invalid\">\r\n                        <span class=\"text-danger\"  ng-show=\"form.name.$error.required\" translate>Ministry name is required.</span>\r\n                    </small>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"form-group row\" ng-show=\"ableToChangeParentMinistry(ministry.parent_id)\">\r\n\t\t\t\t<label class=\"col-sm-4 control-label\" translate>Parent ministry</label>\r\n\r\n\t\t\t\t<div class=\"col-sm-6\">\r\n\t\t\t\t\t<select\r\n\t\t\t\t\t\tname=\"prent\"\r\n\t\t\t\t\t\tclass=\"form-control\"\r\n\t\t\t\t\t\tng-model=\"ministry.parent_id\"\r\n\t\t\t\t\t\tng-options=\"m.ministry_id as m.name for m in current.ministries | roleFilter:['admin','inherited_admin','leader','inherited_leader'] | orderBy:'name'\">\r\n\t\t\t\t\t\t<option value=\"\" translate>No parent ministry</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"form-group row\">\r\n\t\t\t\t<label class=\"col-sm-4 control-label\" translate>MCCs</label>\r\n\r\n\t\t\t\t<div class=\"col-sm-6\">\r\n\t\t\t\t\t<div class=\"checkbox\" ng-repeat=\"mcc in mccs\">\r\n\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t<input type=\"checkbox\" ng-model=\"mcc.checked\" ng-init=\"mcc.checked = getMCCValue(mcc.value)\" ng-change=\"createMCCArray(mcc.checked,mcc.value)\"> {{mcc.text}}\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<hr>\r\n\t\t\t<div class=\"form-group\">\r\n\t\t\t\t<label class=\"col-sm-4 control-label\" translate>Default MCC</label>\r\n\r\n\t\t\t\t<div class=\"col-sm-6\">\r\n\t\t\t\t\t<select class=\"form-control\" ng-model=\"ministry.default_mcc\" ng-options=\"mcc.value as mcc.text for mcc in mccs | mccFilter:ministry.mccs\">\r\n\t\t\t\t\t\t<option value=\"\" translate>Default</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"form-group\">\r\n\t\t\t\t<label class=\"col-sm-4 control-label\" translate>Hide reports tab by default</label>\r\n\r\n\t\t\t\t<div class=\"col-sm-6\">\r\n\t\t\t\t\t<label class=\"radio-inline\"><input type=\"radio\" value=\"1\" ng-model=\"ministry.hide_reports_tab\"> <span translate>Hide</span></label>\r\n\t\t\t\t\t<label class=\"radio-inline\"><input type=\"radio\" value=\"0\" ng-model=\"ministry.hide_reports_tab\"> <span translate>Show</span></label>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"form-group\">\r\n\t\t\t\t<label class=\"col-sm-4 control-label\" translate>Supported languages</label>\r\n\r\n\t\t\t\t<div class=\"col-sm-6\">\r\n\t\t\t\t\t<select size=\"10\" multiple=\"multiple\" class=\"form-control\" ng-model=\"ministry.content_locales\" ng-options=\"lang.iso_code as lang.english_name for lang in current.langList\">\r\n\t\t\t\t\t\t<optgroup label=\"Select Languages\"></optgroup>\r\n\t\t\t\t\t</select>\r\n                    <small class=\"help-text\" translate>CTRL + click to select multiple languages</small>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<!-- \r\n\t\t\t<div class=\"form-group row\">\r\n\t\t\t\t<label class=\"col-sm-4 control-label\">Privacy:</label>\r\n\r\n\t\t\t\t<div class=\"col-sm-8\">\r\n\t\t\t\t\t<div class=\"checkbox\">\r\n\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t<input type=\"checkbox\" ng-model=\"ministry.private\">\r\n\t\t\t\t\t\t\tPrivate Ministry\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div> -->\r\n            </form>\r\n\t\t</div>\r\n\t\t<div class=\"panel-footer\">\r\n\t\t\t<button type=\"button\" class=\"btn btn-primary pull-right btn-sm\" ng-click=\"saveDetails()\" ng-disabled=\"form.$invalid || (saveDetailsResource && !saveDetailsResource.$resolved)\"><i class=\"glyphicon glyphicon-pencil\"></i> <span tranalate>Update Ministry</span></button>\r\n\t\t\t<div class=\"clearfix\"></div>\r\n\t\t</div>\r\n\t</div>\r\n</div> ","<div class=\"admin-item\">\r\n\t<div class=\"panel panel-default\">\r\n\t\t<div class=\"panel-heading clearfix\" style=\"padding: 5px 15px;\">\r\n\t\t\t<h3 class=\"panel-title pull-left\" style=\"padding-top: 6px\" translate>Measurements</h3>\r\n\t\t\t<button type=\"button\" class=\"pull-right btn btn-primary btn-sm\" ng-click=\"addNewMeasurement()\"><i class=\"glyphicon glyphicon-plus\"></i> <span translate>Add Measurement</span></button>\r\n\t\t\t<div class=\"clearfix\"></div>\r\n\t\t</div>\r\n\t\t<div class=\"panel-body\">\r\n\t\t\t<table class=\"table table-striped table-hover table-condensed\">\r\n\t\t\t\t\t<thead>\r\n\t\t\t\t\t<tr class=\"active\">\r\n\t\t\t\t\t\t<th translate>Name</th>\r\n                        <th translate>Column</th>\r\n                        <th translate>Section</th>\r\n\t\t\t\t\t\t<th class=\"text-center\" style=\"width: 25%\" translate>Actions</th>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<tr ng-repeat=\"type in measurementTypes\">\r\n\t\t\t\t\t<td class=\" no-overflow\">{{type.english}}</td>\r\n\t\t\t\t\t<td class=\"text-capitalize\">{{type.column}}</td>\r\n\t\t\t\t\t<td class=\"text-capitalize\">{{type.section}}</td>\r\n\t\t\t\t\t<td class=\"text-center\">\r\n\t\t\t\t\t\t<div class=\"btn-group\">\r\n\t\t\t\t\t\t\t<label class=\"btn btn-default btn-xs\" ng-model=\"type.visible\" btn-radio=\"true\" translate>Show</label>\r\n\t\t\t\t\t\t\t<label class=\"btn btn-default btn-xs\" ng-model=\"type.visible\" btn-radio=\"false\" translate>Hide</label>\r\n\t\t\t\t\t\t</div>\r\n                        <button ng-if=\"current.assignment.content_locales.length\" type=\"button\" ng-click=\"editMeasurement(type)\" class=\"btn btn-xs btn-default\"><span class=\"glyphicon glyphicon-globe\"></span> <span translate>Localize</span></button>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</tr>\r\n\t\t\t</table>\r\n\t\t</div>\r\n\t\t<div class=\"panel-footer\">\r\n\t\t\t<button type=\"button\" class=\"btn btn-primary pull-right btn-sm\" ng-click=\"saveDetails()\" ng-disabled=\"saveDetailsResource && !saveDetailsResource.$resolved\"><i class=\"glyphicon glyphicon-pencil\"></i> <span translate>Save changes</span></button>\r\n\t\t\t<div class=\"clearfix\"></div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n","<div class=\"admin-item\" ng-init=\"initTeamAndMembers();\">\r\n    <section class=\"row panel panel-default panel-custom\">\r\n        <div class=\"panel-body\">\r\n\t\t <div class=\"pull-left form-inline\">\r\n\r\n\t\t\t <input autofocus=\"\" type=\"text\" ng-model=\"filter.memberSearch\" placeholder=\"{{'Search Members'|translate}}..\" class=\"form-control input-sm\">&emsp;\r\n\r\n\t\t\t <label title=\"Toggle\" class=\"checkbox-inline\"><input type=\"checkbox\" ng-model=\"filter.deletedUser\"> <span translate>Deleted</span></label>\r\n\t\t\t <label title=\"Toggle\" class=\"checkbox-inline\"><input type=\"checkbox\" ng-model=\"filter.formerMember\"> <span translate>Former members</span></label>\r\n\r\n\t\t\t <label title=\"Toggle\" class=\"checkbox-inline\"><input type=\"checkbox\" ng-model=\"filter.inheritedLeader\"> <span translate>Inherited leaders</span></label>\r\n\r\n\t\t\t <label title=\"Toggle\" class=\"checkbox-inline\"><input type=\"checkbox\" ng-model=\"filter.inheritedAdmin\"> <span translate>Inherited admins</span></label>\r\n\r\n\t\t </div>\r\n\t\t <div class=\"pull-right\">\r\n\t\t\t <button class=\"btn btn-default btn-sm\" type=\"button\" ng-click=\"loadMinistryMembers(activeTeam.ministry_id)\" title=\"Refresh Members List\"><i class=\"glyphicon glyphicon-refresh\"></i><span class=\"sr-only\" translate>Refresh members list</span></button>\r\n\t\t\t <button class=\"btn btn-primary btn-sm\" type=\"button\" ng-click=\"addNewTeamMember()\"><i class=\"glyphicon glyphicon-user\"></i> <span translate>Add member</span></button>\r\n\t\t\t <button ng-if=\"current.hasRole(['admin','inherited_admin'])\" class=\"btn btn-primary btn-sm\" type=\"button\" ng-click=\"addNewSubMinistry()\"><i class=\"glyphicon glyphicon-plus\"></i> <span translate>Add sub ministry</span></button>\r\n\t\t </div>\r\n            <div class=\"clearfix\"></div>\r\n         </div>\r\n\t </section>\r\n\t <section class=\"row\" id=\"team-member-pane\">\r\n\t\t <aside class=\"col-md-3 pull-left teams-list\">\r\n\t\t\t <script type=\"text/ng-template\" id=\"teams-tree.html\">\r\n\t\t\t\t\t <li ng-repeat=\"team in teams\" role=\"treeitem\" ng-hide=\"team.hide_after_drop===true\">\r\n\t\t\t\t\t\t <span \t class=\"outer\"\r\n\t\t\t\t\t\t\t\t ng-init=\"teamCollapsed = true\"\r\n\t\t\t\t\t\t\t\t ng-class=\"{'active' : (activeTeam.ministry_id === team.ministry_id)}\"\r\n\r\n\t\t\t\t\t\t\t\t data-drop=\"true\"\r\n\t\t\t\t\t\t\t\t jqyoui-droppable=\"{index: {{$index}},onOver:'teamOnOver(teamCollapsed)',onOut:'teamOnOut',onDrop:'teamOnDrop(team)',beforeDrop:'teamBeforeDrop(team)'}\"\r\n\r\n\t\t\t\t\t\t\t\t data-drag=\"{{current.assignment.ministry_id !== team.ministry_id}}\"\r\n\t\t\t\t\t\t\t\t jqyoui-draggable=\"{index: {{$index}},placeholder:'keep',animate:true,onStart:'teamOnStart(team)'}\"\r\n\t\t\t\t\t\t\t\t jqyoui-options=\"teamDraggableOptions\"\r\n\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<i  class=\"glyphicon\"\r\n\t\t\t\t\t\t\t\ttitle=\"Toggle\"\r\n\t\t\t\t\t\t\t\tng-class=\"{'glyphicon-certificate' : (!team.sub_ministries.length || team.sub_ministries.length == 0), 'glyphicon-triangle-right' : (teamCollapsed == true && (team.sub_ministries.length || team.sub_ministries.length >= 0)), 'glyphicon-triangle-bottom' : (teamCollapsed == false && (team.sub_ministries.length || team.sub_ministries.length >= 0))}\"\r\n\t\t\t\t\t\t\t\tng-click=\"teamCollapsed = !teamCollapsed;\"\r\n\t\t\t\t\t\t\t\t></i>\r\n\t\t\t\t\t\t\t<span class=\"inner\"\r\n\t\t\t\t\t\t\t\tng-click=\"setActiveTeam(team)\"\r\n\t\t\t\t\t\t\t\t>{{team.name}}</span>\r\n\t\t\t\t\t\t </span>\r\n\t\t\t\t\t\t<ul ng-if=\"team.sub_ministries.length\" collapse=\"teamCollapsed\" ng-include=\"'teams-tree.html'\" onload=\"teams = team.sub_ministries\" role=\"tree\"></ul>\r\n\t\t\t\t\t </li>\r\n\t\t\t </script>\r\n\t\t\t<ul ng-include=\"'teams-tree.html'\" onload=\"teams = allCurrentTeams\" role=\"tree\"></ul>\r\n\r\n\t\t </aside><!-- .teams-list -->\r\n\r\n\t\t <aside class=\"col-md-9 pull-right members-list\">\r\n\r\n\t\t\t <div ng-include=\"'partials/spinner.html'\" ng-hide=\"membersLoaded\"></div>\r\n\r\n\t\t\t <table class=\"table table-striped table-hover members-table\" ng-hide=\"!membersLoaded\">\r\n\t\t\t\t <thead>\r\n\t\t\t\t <tr><th translate>First Name</th><th translate>Last Name</th><th translate>Email</th><th translate>Actions</th></tr>\r\n\t\t\t\t </thead>\r\n\t\t\t\t <tbody>\r\n                 <tr class=\"active\">\r\n                     <td>{{current.user.first_name}}</td>\r\n                     <td>{{current.user.last_name}}</td>\r\n                     <td>{{current.user.cas_username}}</td>\r\n                     <td>{{getCurrentUserRole(activeTeam.team_role)}}</td>\r\n                 </tr>\r\n\t\t\t\t <tr ng-repeat=\"member in activeTeamMembers | orderBy:['first_name', 'last_name'] | filter:filter.checkAdmin | filter : filter.checkLeader | filter:filter.checkDeleted |filter:filter.checkFormer | filter : filter.memberSearch\"\r\n\t\t\t\t\t ng-if=\"current.user.person_id !== member.person_id\"\r\n\t\t\t\t\t ng-class=\"{'danger':(member.team_role==='blocked')}\"\r\n\r\n\t\t\t\t\t data-drag=\"isMemberDraggable(member)\"\r\n\t\t\t\t\t ng-model=\"member\"\r\n\t\t\t\t\t jqyoui-draggable=\"{index: {{$index}},animate:true,placeholder:'keep',onStart:'memberOnStart(member)'}\"\r\n\t\t\t\t\t jqyoui-options=\"memberDraggableOptions\"\r\n\t\t\t\t\t\t >\r\n\t\t\t\t\t <td>{{member.first_name}}</td>\r\n\t\t\t\t\t <td>{{member.last_name}}</td>\r\n\t\t\t\t\t <td>{{member.key_username}}</td>\r\n\t\t\t\t\t <td class=\"text-center\">\r\n                         <select\r\n                                 ng-change=\"updateUserRole('{{member.team_role}}',member)\"\r\n                                 class=\"form-control input-sm\"\r\n                                 style=\"width: 150px;\"\r\n                                 ng-model=\"member.team_role\"\r\n                                 >\r\n                             <option\r\n                                     ng-repeat=\"role in roles\"\r\n                                     ng-disabled=\"role.value === 'inherited_admin' || role.value ==='inherited_leader'\"\r\n                                     ng-selected=\"{{role.value === member.team_role}}\"\r\n                                     value=\"{{role.value}}\"\r\n                                     ng-class=\"{'text-danger' : (role.value==='blocked')}\"\r\n                                     > {{role.text}} </option>\r\n                         </select>\r\n\t\t\t\t\t </td>\r\n\t\t\t\t </tr>\r\n\t\t\t\t </tbody>\r\n\t\t\t </table>\r\n\t\t </aside>\r\n\t </section>\r\n </div>\r\n","<div class=\"modal-header\">\r\n\t<button type=\"button\" class=\"close\" ng-click=\"close()\">\r\n\t\t<span aria-hidden=\"true\">&times;</span><span class=\"sr-only\" translate>Close</span></button>\r\n\t<h4 class=\"modal-title\" translate>Add new measurement</h4>\r\n</div>\r\n<div class=\"modal-body form-horizontal\">\r\n    <form name=\"form\" class=\"form-horizontal\">\r\n\t<div class=\"form-group\">\r\n\t\t<label for=\"newMeasurementName\" class=\"col-sm-3 control-label\" translate>Name</label>\r\n\r\n\t\t<div class=\"col-sm-8\">\r\n\t\t\t<input id=\"newMeasurementName\" name=\"name\" type=\"text\" class=\"form-control\" ng-maxlength=\"200\" ng-model=\"newMeasurement.english\" ng-required=\"true\"/>\r\n            <small class=\"help-text\" ng-show=\"form.name.$dirty && form.name.$invalid\">\r\n                <span class=\"text-danger\"  ng-show=\"form.name.$error.required\" translate>Name is required</span>\r\n                <span class=\"text-danger\"  ng-show=\"form.name.$error.maxlength\" translate>Name should not exceed 200 characters</span>\r\n            </small>\r\n\t\t</div>\r\n\t</div>\r\n        <div class=\"form-group\">\r\n            <label for=\"newMeasurementDesc\" class=\"col-sm-3 control-label\" translate>Description</label>\r\n\r\n            <div class=\"col-sm-8\">\r\n                <textarea id=\"newMeasurementDesc\" name=\"description\" class=\"form-control\" ng-maxlength=\"200\" ng-model=\"newMeasurement.description\" ng-required=\"true\" style=\"resize: vertical;max-height: 200px;\"></textarea>\r\n                <small class=\"help-text\" ng-show=\"form.description.$dirty && form.description.$invalid\">\r\n                    <span class=\"text-danger\"  ng-show=\"form.description.$error.required\" translate>Description is required</span>\r\n                    <span class=\"text-danger\"  ng-show=\"form.name.$error.maxlength\" translate>Description should not exceed 200 characters</span>\r\n                </small>\r\n            </div>\r\n        </div>\r\n\t<div class=\"form-group\">\r\n\t\t<label for=\"newMeasurementPermalink\" class=\"col-sm-3 control-label\" translate>Permalink</label>\r\n\r\n\t\t<div class=\"col-sm-8\">\r\n\t\t\t<input id=\"newMeasurementPermalink\" name=\"permalink\" placeholder=\"name_name\" ng-maxlength=\"100\" type=\"text\" class=\"form-control\" ng-model=\"newMeasurement.perm_link_stub\" ng-required=\"true\" ng-pattern=\"/^[\\w&-]+$/\"/>\r\n            <small class=\"help-text\" ng-show=\"form.permalink.$dirty && form.permalink.$invalid\">\r\n                <span class=\"text-danger\"  ng-show=\"form.permalink.$error.required\" translate>Permalink is required</span>\r\n                <span class=\"text-danger\"  ng-show=\"form.permalink.$error.pattern\" translate>Permalink is invalid. Please match with required format</span>\r\n                <span class=\"text-danger\"  ng-show=\"form.name.$error.maxlength\" translate>Permalink should not exceed 100 characters</span>\r\n            </small>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class=\"form-group\">\r\n\t\t<label class=\"col-sm-3 control-label\" translate>Column</label>\r\n\r\n\t\t<div class=\"col-sm-8\">\r\n\t\t\t<select class=\"form-control\" style=\"width: 150px;\" ng-model=\"newMeasurement.column\" ng-required=\"true\">\r\n\t\t\t\t<option value=\"faith\" translate>Faith</option>\r\n\t\t\t\t<option value=\"fruit\" translate>Fruit</option>\r\n\t\t\t\t<option value=\"outcome\" translate>Outcome</option>\r\n\t\t\t\t<option value=\"other\" translate>Other</option>\r\n\t\t\t</select>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class=\"form-group\">\r\n\t\t<label class=\"col-sm-3 control-label\" translate>Section</label>\r\n\r\n\t\t<div class=\"col-sm-8\">\r\n\t\t\t<select class=\"form-control\" style=\"width: 150px;\" ng-model=\"newMeasurement.section\" ng-required=\"true\">\r\n\t\t\t\t<option value=\"win\" translate>Win</option>\r\n\t\t\t\t<option value=\"build\" translate>Build</option>\r\n\t\t\t\t<option value=\"send\" translate>Send</option>\r\n\t\t\t\t<option value=\"other\" translate>Other</option>\r\n\t\t\t</select>\r\n\t\t</div>\r\n\t</div>\r\n    </form>\r\n</div>\r\n<div class=\"modal-footer\">\r\n\t<button type=\"button\" class=\"btn btn-default\" ng-click=\"close()\"><i class=\"glyphicon glyphicon-remove\"></i> <span translate>Close</span></button>\r\n\t<button type=\"button\" ng-disabled=\"form.$invalid\" class=\"btn btn-primary\" ng-click=\"add()\"><i class=\"glyphicon glyphicon-ok\"></i> <span translate>Create</span></button>\r\n</div>\r\n","<div class=\"modal-header\">\r\n\t<button type=\"button\" class=\"close\" ng-click=\"close()\">\r\n\t\t<span aria-hidden=\"true\">&times;</span><span class=\"sr-only\" translate>Close</span></button>\r\n\t<h4 class=\"modal-title\"><span translate>Add a new sub ministry to</span> - {{activeTeamName}}</h4>\r\n</div>\r\n<div class=\"modal-body\">\r\n    <form name=\"form\" class=\"form-horizontal\">\r\n\t<div class=\"form-group\">\r\n\t\t<label for=\"sbName\" class=\"col-sm-4 control-label\" translate>Ministry name</label>\r\n\r\n\t\t<div class=\"col-sm-8\">\r\n\t\t\t<input id=\"sbName\" name=\"name\" type=\"text\" class=\"form-control\" ng-model=\"newMinistry.name\" ng-required=\"true\"/>\r\n            <small class=\"help-text\" ng-show=\"form.name.$dirty && form.name.$invalid\">\r\n                <span class=\"text-danger\"  ng-show=\"form.min_code.$error.required\" translate>Ministry name is required.</span>\r\n            </small>\r\n\t\t</div>\r\n\t</div>\r\n    </form>\r\n</div>\r\n<div class=\"modal-footer\">\r\n\t<button type=\"button\" class=\"btn btn-default\" ng-click=\"close()\"><i class=\"glyphicon glyphicon-remove\"></i> <span translate>Close</span></button>\r\n\t<button type=\"button\" ng-disabled=\"form.$invalid\" class=\"btn btn-primary\" ng-click=\"add()\"><i class=\"glyphicon glyphicon-floppy-disk\"></i> <span translate>Create</span></button>\r\n</div>\r\n","<div class=\"modal-header\">\r\n\t<button type=\"button\" class=\"close\" ng-click=\"close()\">\r\n\t\t<span aria-hidden=\"true\">&times;</span><span class=\"sr-only\">Close</span></button>\r\n\t<h4 class=\"modal-title\"><span translate>Add new member to</span> - {{activeTeamName}}</h4>\r\n</div>\r\n<div class=\"modal-body\">\r\n    <form name=\"form\" class=\"form-horizontal\">\r\n\t<div class=\"form-group\">\r\n\t\t<label class=\"col-sm-4 control-label\" translate>TheKey username</label>\r\n\r\n\t\t<div class=\"col-sm-8\">\r\n\t\t\t<input name=\"username\" type=\"email\" class=\"form-control\" placeholder=\"user@ccci.org\" ng-model=\"newMember.username\" ng-required=\"true\"/>\r\n            <small class=\"help-text\" ng-show=\"form.username.$dirty && form.username.$invalid\">\r\n                <span class=\"text-danger\"  ng-show=\"form.username.$error.required\" translate>Username is required.</span>\r\n                <span class=\"text-danger\"  ng-show=\"form.username.$error.email\" translate>Invalid email format</span>\r\n            </small>\r\n\t\t</div>\r\n\r\n\t</div>\r\n\t<div class=\"form-group\">\r\n\t\t<label class=\"col-sm-4 control-label\" translate>Role</label>\r\n\r\n\t\t<div class=\"col-sm-8\">\r\n\t\t\t<select name=\"team_role\" class=\"form-control\" style=\"width: 150px;\" ng-model=\"newMember.team_role\" ng-options=\"r.value as r.text for r  in roles | filter :{ value : '!inherited_admin' } | filter :{ value : '!inherited_leader' } | filter :{ value : '!former_member' }\" ng-required=\"true\"></select>\r\n\t\t</div>\r\n\t</div>\r\n</form>\r\n</div>\r\n<div class=\"modal-footer\">\r\n\t<button type=\"button\" class=\"btn btn-default\" ng-click=\"close()\"><i class=\"glyphicon glyphicon-remove\"></i> <span translate>Close</span></button>\r\n\t<button type=\"button\" ng-disabled=\"form.$invalid\" class=\"btn btn-primary\" ng-click=\"add()\"><i class=\"glyphicon glyphicon-floppy-disk\"></i> <span translate>Save</span></button>\r\n</div>\r\n\r\n\r\n","<div ng-if=\"current.isLoaded\">\r\n\t<ul class=\"nav nav-pills\" ng-init=\"initSubTabs()\">\r\n\t\t<li ng-repeat=\"tab in adminTabTemplates\" ng-if=\"current.hasRole(tab.requiredRoles)\" ng-click=\"selectTab(tab.name)\" role=\"presentation\" ng-class=\"{active: activePill === tab.name}\"><a style=\"padding: 8px 10px\" href=\"javascript:void(0)\">{{tab.label}}</a></li>\r\n\t</ul>\r\n\t<div ng-include=\"currentAdminTab.url\"></div>\r\n</div>\r\n","<div class=\"modal-header\">\r\n    <button type=\"button\" class=\"close\" ng-click=\"no()\">\r\n        <span aria-hidden=\"true\">&times;</span><span class=\"sr-only\" translate>Close</span></button>\r\n    <h4 class=\"modal-title\" translate>Move member to this team ?</h4>\r\n</div>\r\n<div class=\"modal-body form-horizontal\">\r\n    <ul class=\"list-unstyled\">\r\n        <li><span translate>Name</span>: {{member.first_name + ' '+member.last_name}}</li>\r\n        <li><span translate>Current role</span>: {{getRoleName(member.team_role)}}</li>\r\n        <li><span translate>Target team</span>: {{team.name}}</li>\r\n        <li><i class=\"glyphicon glyphicon-warning-sign text-danger\"></i> <span translate>Current role will be set to former-member</span></li>\r\n    </ul>\r\n</div>\r\n<div class=\"modal-footer\">\r\n    <button type=\"button\" class=\"btn btn-default\" ng-click=\"no()\"><i class=\"glyphicon glyphicon-remove\"></i> <span translate>No</span></button>\r\n    <button type=\"button\" class=\"btn btn-primary\" ng-click=\"yes()\"><i class=\"glyphicon glyphicon-ok\"></i> <span translate>Yes</span></button>\r\n</div>\r\n\r\n","<div class=\"modal-header\">\r\n    <button type=\"button\" class=\"close\" ng-click=\"no()\">\r\n        <span aria-hidden=\"true\">&times;</span><span class=\"sr-only\" translate>Close</span></button>\r\n    <h4 class=\"modal-title\" translate>Move sub-team to this team ?</h4>\r\n</div>\r\n<div class=\"modal-body form-horizontal\">\r\n    <ul class=\"list-unstyled\">\r\n        <li><span translate>Source Name</span>: {{source_team}}</li>\r\n        <li><span translate>Target Team</span>: {{target_team}}</li>\r\n    </ul>\r\n</div>\r\n<div class=\"modal-footer\">\r\n    <button type=\"button\" class=\"btn btn-default\" ng-click=\"no()\"><i class=\"glyphicon glyphicon-remove\"></i> <span translate>No</span></button>\r\n    <button type=\"button\" class=\"btn btn-primary\" ng-click=\"yes()\"><i class=\"glyphicon glyphicon-ok\"></i> <span translate>Yes</span></button>\r\n</div>\r\n\r\n","<div class=\"modal-header\">\r\n    <button type=\"button\" class=\"close\" ng-click=\"no()\">\r\n        <span aria-hidden=\"true\">&times;</span><span class=\"sr-only\" translate>Close</span></button>\r\n    <h4 class=\"modal-title\" translate>Update Team Member Role ?</h4>\r\n</div>\r\n<div class=\"modal-body form-horizontal\">\r\n    <ul class=\"list-unstyled\">\r\n        <li><span translate>Member</span>: {{userInfo.user.first_name + ' ' + userInfo.user.last_name}}</li>\r\n        <li><span translate>Old Role</span>: {{getRoleName(userInfo.old_role)}}</li>\r\n        <li><span translate>New Role</span>: {{getRoleName(userInfo.user.team_role)}}</li>\r\n    </ul>\r\n</div>\r\n<div class=\"modal-footer\">\r\n    <button type=\"button\" class=\"btn btn-default\" ng-click=\"no()\"><i class=\"glyphicon glyphicon-remove\"></i> <span translate>No</span></button>\r\n    <button type=\"button\" class=\"btn btn-primary\" ng-click=\"yes()\"><i class=\"glyphicon glyphicon-ok\"></i> <span translate>Yes</span></button>\r\n</div>\r\n\r\n","<div class=\"modal-header\">\r\n    <button type=\"button\" class=\"close\" ng-click=\"close()\">\r\n        <span aria-hidden=\"true\">&times;</span><span class=\"sr-only\" translate>Close</span></button>\r\n    <h4 class=\"modal-title\" translate>Localize</h4>\r\n</div>\r\n<div class=\"modal-body form-horizontal\">\r\n    <form name=\"form\" class=\"form-horizontal\">\r\n        <div class=\"form-group\">\r\n            <label class=\"col-sm-3 control-label\" translate>Language</label>\r\n            <div class=\"col-sm-8\">\r\n                <select class=\"form-control\" ng-model=\"measurement.locale\" ng-options=\"lang.iso_code as lang.english_name for lang in current.langList | filter:filterByLangCode\" ng-required=\"true\" ng-change=\"changeLocale(measurement.locale)\">\r\n                </select>\r\n            </div>\r\n        </div>\r\n        <div class=\"form-group\">\r\n            <label class=\"col-sm-3 control-label\" translate>English name</label>\r\n            <div class=\"col-sm-8\">\r\n                <p class=\"form-control-static\">{{original.english}}</p>\r\n            </div>\r\n         </div>\r\n        <div class=\"form-group\">\r\n            <label class=\"col-sm-3 control-label\" translate>English description</label>\r\n            <div class=\"col-sm-8\">\r\n                <p class=\"form-control-static\">{{original.description}}</p>\r\n            </div>\r\n        </div>\r\n        <div ng-show=\"isLocaleLoaded\">\r\n        <div class=\"form-group\">\r\n            <label for=\"measurementName\" class=\"col-sm-3 control-label\" translate>Localized name</label>\r\n\r\n            <div class=\"col-sm-8\">\r\n                <input  id=\"measurementName\" name=\"name\" type=\"text\" class=\"form-control\" ng-maxlength=\"200\" ng-model=\"measurement.localized_name\" ng-required=\"true\"/>\r\n                <small class=\"help-text\" ng-show=\"form.name.$dirty && form.name.$invalid\">\r\n                    <span class=\"text-danger\"  ng-show=\"form.name.$error.required\" translate>Name is required</span>\r\n                    <span class=\"text-danger\"  ng-show=\"form.name.$error.maxlength\" translate>Name should not exceed 200 characters</span>\r\n                </small>\r\n            </div>\r\n        </div>\r\n        <div class=\"form-group\">\r\n            <label for=\"measurementDesc\" class=\"col-sm-3 control-label\" translate>Localized description</label>\r\n\r\n            <div class=\"col-sm-8\">\r\n                <textarea  rows=\"4\" id=\"measurementDesc\" name=\"description\" class=\"form-control\" ng-maxlength=\"200\" ng-model=\"measurement.localized_description\" ng-required=\"true\" style=\"resize: vertical;max-height: 200px;\"></textarea>\r\n                <small class=\"help-text\" ng-show=\"form.description.$dirty && form.description.$invalid\">\r\n                    <span class=\"text-danger\"  ng-show=\"form.description.$error.required\" translate>Description is required</span>\r\n                    <span class=\"text-danger\"  ng-show=\"form.description.$error.maxlength\" translate>Description should not exceed 200 characters</span>\r\n                </small>\r\n            </div>\r\n        </div>\r\n        </div>\r\n        <div ng-include=\"'partials/spinner.html'\" ng-hide=\"isLocaleLoaded\"></div>\r\n    </form>\r\n</div>\r\n<div class=\"modal-footer\">\r\n    <button type=\"button\" class=\"btn btn-default\" ng-click=\"close()\"><i class=\"glyphicon glyphicon-remove\"></i> <span translate>Close</span></button>\r\n    <button type=\"button\" ng-disabled=\"form.$invalid || isLocaleLoaded == false\" class=\"btn btn-primary\" ng-click=\"save()\"><i class=\"glyphicon glyphicon-ok\"></i> <span translate>Save</span></button>\r\n</div>\r\n","<div class=\"jumbotron\">\r\n\t<h1><small class=\"glyphicon glyphicon-alert\"> </small> <span translate>Invalid Session</span></h1>\r\n\t<p translate>You have been logged out or your session has expired due to inactivity.</p>\r\n\t<p translate>Use the button below to log back in.</p>\r\n\t<p><a class=\"btn btn-primary btn-lg\" href=\"{{loginUrl}}\" role=\"button\"><i class=\"glyphicon glyphicon-log-in\"> </i> <span translate>Log In</span></a></p>\r\n</div>\r\n","<div class=\"modal-header\">\r\n    <button type=\"button\" class=\"close\" ng-click=\"no()\">\r\n        <span aria-hidden=\"true\">&times;</span><span class=\"sr-only\" translate>Close</span></button>\r\n    <h4 class=\"modal-title\" translate>Confirm ?</h4>\r\n</div>\r\n<div class=\"panel-body\">\r\n    <h4 translate>Are you sure you want to delete ?</h4>\r\n</div>\r\n<div class=\"modal-footer\">\r\n    <button type=\"button\" class=\"btn btn-default\" ng-click=\"no()\"><i class=\"glyphicon glyphicon-remove\"></i> <span translate>Cancel</span></button>\r\n    <button type=\"button\" class=\"btn btn-warning\" ng-click=\"yes()\"><i class=\"glyphicon glyphicon-trash\"></i> <span translate>Delete</span></button>\r\n</div>\r\n\r\n","<div id=\"church_window\">\r\n\t<div style=\"clear:both\"></div>\r\n\t<div class='church-window'>\r\n\t\t<h4>{{edit_church.name}} <br />\r\n\t\t\t<small>{{edit_church.size}} <span translate>members</span></small>\r\n            <small ng-if=\"!edit_church.editable && edit_church.created_by_email\"><br>{{edit_church.created_by_email}}</small>\r\n\t\t</h4>\r\n        <form name=\"form\" novalidate>\r\n\t\t<table class=\"table table-condensed\">\r\n\t\t\t<tr>\r\n\t\t\t\t<td><b translate>Contact Name:</b></td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<input type=\"text\" class=\"form-control input-sm\" ng-show=\"edit_church.editable\" ng-model='edit_church.contact_name' />\r\n\t\t\t\t\t<label ng-hide=\"edit_church.editable\">{{edit_church.contact_name}}</label>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr>\r\n\t\t\t\t<td><b translate>Contact Email:</b></td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<input type=\"email\" name=\"email\" class=\"form-control input-sm\" ng-show=\"edit_church.editable\" ng-model='edit_church.contact_email' />\r\n                    <small class=\"help-text\" ng-show=\"form.email.$dirty && form.email.$invalid\">\r\n                        <span class=\"text-danger\"  ng-show=\"form.email.$error.email\" translate>Invalid email format</span>\r\n                    </small>\r\n                    <label ng-hide=\"edit_church.editable\">{{edit_church.contact_email}}</label>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr>\r\n\t\t\t\t<td><b translate>Contact Mobile:</b></td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<input type=\"text\" name=\"mobile\" placeholder=\"+99 99999999\" class=\"form-control input-sm\" ng-show=\"edit_church.editable\" ng-model='edit_church.contact_mobile' ng-pattern=\"/^(\\d+|\\+)*(\\s|\\d)+$/\" />\r\n                    <small class=\"help-text\" ng-show=\"form.mobile.$dirty && form.mobile.$invalid\">\r\n                        <span class=\"text-danger\"  ng-show=\"form.mobile.$error.pattern\" translate>Mobile number is invalid.</span>\r\n                    </small>\r\n\t\t\t\t\t<label ng-hide=\"edit_church.editable\">{{edit_church.contact_mobile}}</label>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr>\r\n\t\t\t\t<td><b translate>Jesus film activity</b></td>\r\n\t\t\t\t<td>\r\n                    <div ng-show=\"edit_church.editable\">\r\n                        <label class=\"radio-inline\"><input name=\"jf_contrib\" type=\"radio\" value=\"1\" name=\"jf_contrib\" ng-model=\"edit_church.jf_contrib\" ng-required=\"true\"> <span translate>Yes</span></label>\r\n                        <label class=\"radio-inline\"><input name=\"jf_contrib\" type=\"radio\" value=\"0\" name=\"jf_contrib\" ng-model=\"edit_church.jf_contrib\" ng-required=\"true\"> <span translate>No</span></label>\r\n                        <br><small ng-show=\"form.jf_contrib.$invalid\" class=\"help-text text-danger\" translate>Please make a choice</small>\r\n                    </div>\r\n\t\t\t\t\t<label ng-hide=\"edit_church.editable\" ng-switch=\"edit_church.jf_contrib\">\r\n                        <span ng-switch-when=\"true\" translate>Yes</span>\r\n                        <span ng-switch-when=\"false\" translate>No</span>\r\n                    </label>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr ng-show=\"edit_church.editable\">\r\n\t\t\t\t<td><b translate>Type:</b></td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<select class=\"form-control input-sm\" ng-model=\"edit_church.development\" ng-disabled=\"!edit_church.editable\" ng-required=\"true\">\r\n\t\t\t\t\t\t<option value=\"1\" translate>Target</option>\r\n\t\t\t\t\t\t<option value=\"2\" translate>Group</option>\r\n\t\t\t\t\t\t<option value=\"3\" translate>Church</option>\r\n\t\t\t\t\t\t<option value=\"5\" translate>Multiplying Church</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr ng-show=\"edit_church.editable\">\r\n\t\t\t\t<td><b translate>Size:</b></td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<input type=\"number\" class=\"form-control input-sm\" ng-disabled=\"!edit_church.editable\" ng-model=\"edit_church.size\" min=\"0\" max=\"2147483647\" ng-maxlength=\"10\"/>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr ng-show=\"edit_church.editable\" ng-if=\"!current.hasRole('blocked')\">\r\n\t\t\t\t<td><b translate>Security: </b></td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<select class=\"form-control input-sm\" name=\"security\" ng-model=\"edit_church.security\" ng-disabled=\"!edit_church.editable\" ng-required=\"true\">\r\n                        <option value=\"1\" translate>Private</option>\r\n                        <option value=\"2\" translate>Registered Users</option>\r\n                        <option value=\"3\" translate>Public</option>\r\n\t\t\t\t\t</select>\r\n                    <small class=\"help-text\" ng-show=\"form.security.$dirty && form.security.$invalid\">\r\n                        <span class=\"text-danger\"  ng-show=\"form.security.$error.required\" translate>Security is a required field</span>\r\n                    </small>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr ng-if=\"edit_church.editable && current.hasRole(['admin','inherited_admin','leader', 'inherited_leader'])\">\r\n\t\t\t\t<td><b translate>Ministry:</b></td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<select\r\n\t\t\t\t\t\tclass=\"form-control input-sm\"\r\n\t\t\t\t\t\tng-model=\"edit_church.ministry_id\"\r\n\t\t\t\t\t\tng-options=\"m.ministry_id as m.name for m in current.ministries | roleFilter:['admin','inherited_admin','leader','inherited_leader'] | orderBy:'name'\">\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t\t<!--<tr>\r\n\t\t\t\t<td><b translate>Language:</b> </td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<input type=\"text\" ng-show=\"edit_church.editable\" ng-model='edit_church.language' />\r\n\t\t\t\t\t<label ng-hide=\"edit_church.editable\">{{edit_church.language}}</label>\r\n\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr>\r\n\t\t\t\t<td><b>People Group:</b> </td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<input type=\"text\" ng-show=\"edit_church.editable\" ng-model='edit_church.people_group' />\r\n\t\t\t\t\t<label ng-hide=\"edit_church.editable\">{{people_group}}</label>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>-->\r\n\t\t</table>\r\n        </form>\r\n\t\t\t<div ng-if=\"edit_church.editable\" class=\"btn-group btn-group-sm btn-group-justified\" role=\"group\">\r\n\t\t\t\t<div class=\"btn-group btn-group-sm dropup\" dropdown>\r\n\t\t\t\t\t<button type=\"button\" class=\"btn btn-default dropdown-toggle\" dropdown-toggle>\r\n\t\t\t\t\t    <span translate>Options</span> <span class=\"caret\"></span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<ul class=\"dropdown-menu\" role=\"menu\">\r\n                        <li ng-if=\"canAddStories(edit_church)\">\r\n                            <a href ng-click=\"addStoryToIcon(edit_church,'church')\">\r\n                                <span class=\"glyphicon glyphicon-tag\" aria-hidden=\"true\"></span> <span translate> Add Story</span>\r\n                            </a>\r\n                        </li>\r\n\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t<a href ng-click=\"makeMovableIcon.MoveChurch()\">\r\n\t\t\t\t\t\t\t\t<span class=\"glyphicon glyphicon-move\" aria-hidden=\"true\"></span> <span translate> Move Church</span>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t<a href ng-click=\"SetParent()\" ng-if=\"edit_church.parents.length == 0\">\r\n\t\t\t\t\t\t\t\t<span class=\"glyphicon glyphicon-resize-small\" aria-hidden=\"true\"></span> <span translate> Set Parent Church</span>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t<a href ng-click=\"RemoveParent()\" ng-if=\"edit_church.parents.length == 1\">\r\n\t\t\t\t\t\t\t\t<span class=\"glyphicon glyphicon-remove-circle\" aria-hidden=\"true\"></span> <span translate> Remove Parent Church</span>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li ng-if=\"edit_church.child_count == 0\" role=\"presentation\" class=\"divider\"></li>\r\n\t\t\t\t\t\t<li ng-if=\"edit_church.child_count == 0\">\r\n\t\t\t\t\t\t\t<a href ng-click=\"DeleteChurch()\">\r\n\t\t\t\t\t\t\t\t<span class=\"glyphicon glyphicon-trash\" aria-hidden=\"true\"></span> <span translate> Delete Church</span>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t\t<a href ng-disabled=\"form.$invalid\" class=\"btn btn-primary\" ng-click=\"(form.$valid) ? updateChurch() : false\"><span class=\"glyphicon glyphicon-pencil\" aria-hidden=\"true\"></span> <span translate>Save Changes</span></a>\r\n\t\t\t</div>\r\n\r\n        <div ng-if=\"!edit_church.editable && canAddStories(edit_church)\" class=\"btn-group btn-group-justified\" role=\"group\">\r\n            <a href ng-click=\"churchWindow.close()\" class=\"btn btn-sm btn-default\">Close</a>\r\n            <a href ng-click=\"addStoryToIcon(edit_church,'church')\" class=\"btn btn-primary btn-sm\"><span class=\"glyphicon glyphicon-tag\" aria-hidden=\"true\"></span> <span translate> Add Story</span></a>\r\n        </div>\r\n\r\n\t</div>\r\n</div>\r\n","<div id=\"edit_target_city_window\">\r\n    <div class=\"clearfix\"></div>\r\n    <div class='target-city-window'>\r\n        <h4 translate>Edit Target City </h4>\r\n        <form name=\"form\" novalidate>\r\n        <table class=\"table table-condensed\">\r\n            <tr>\r\n                <td><b translate>Name:</b></td>\r\n                <td>\r\n                    <input type=\"text\" name=\"name\" class=\"form-control input-sm\" maxlength=\"200\" placeholder=\"{{'Name'|translate}}\" ng-model=\"edit_targetCity.name\" ng-required=\"true\"/>\r\n                    <small class=\"help-text\" ng-show=\"form.name.$dirty && form.name.$invalid\">\r\n                        <span class=\"text-danger\"  ng-show=\"form.name.$error.required\" translate>Name is required.</span>\r\n                    </small>\r\n                </td>\r\n            </tr>\r\n            <tr ng-if=\"current.assignment.area_code==='GLBL'\">\r\n                <td><b translate>Area:</b></td>\r\n                <td>\r\n                    <select class=\"form-control input-sm\" name=\"area_code\" ng-options=\"code as name for (code,name) in area_codes\" ng-model=\"new_targetCity.area_code\" ng-required=\"true\">\r\n                        <optgroup label=\"Select an area\"></optgroup>\r\n                    </select>\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td><b translate>Country:</b></td>\r\n                <td>\r\n                    <select class=\"form-control input-sm\" name=\"iso_country\" ng-options=\"lang.iso3 as lang.name for lang in ISOCountries\" ng-model=\"edit_targetCity.iso_country_code\" ng-required=\"true\">\r\n                        <optgroup label=\"Select country\"></optgroup>\r\n                    </select>\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td><b translate>Stage:</b></td>\r\n                <td>\r\n                    <select class=\"form-control input-sm\" name=\"stage\" ng-model=\"edit_targetCity.stage\" ng-change=\"edit_targetCity.substage=''\" ng-required=\"true\">\r\n                        <option value=\"0\">0</option>\r\n                        <option value=\"1\">1</option>\r\n                        <option value=\"2\">2</option>\r\n                        <option value=\"3\">3</option>\r\n                    </select>\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td><b translate>Sub Stage:</b></td>\r\n                <td>\r\n                    <select class=\"form-control input-sm\" ng-options=\"substage.val as substage.name for substage in targetCitySubStages | filter :{ stage : edit_targetCity.stage }\" ng-model=\"edit_targetCity.substage\">\r\n                        <option value=\"\"  translate>None</option>\r\n                    </select>\r\n                </td>\r\n            </tr>\r\n        </table>\r\n        </form>\r\n\r\n        <div>\r\n            <div class=\"btn-group btn-group-sm btn-group-justified\" role=\"group\">\r\n                <div class=\"btn-group btn-group-sm dropup\" dropdown>\r\n                    <button type=\"button\" class=\"btn btn-default dropdown-toggle\" dropdown-toggle>\r\n                        <span translate>Options</span> <span class=\"caret\"></span>\r\n                    </button>\r\n                    <ul class=\"dropdown-menu\" role=\"menu\">\r\n                        <li>\r\n                            <a href ng-click=\"makeMovableIcon.MoveTargetCity()\">\r\n                                <span class=\"glyphicon glyphicon-move\" aria-hidden=\"true\"></span>\r\n                                <span translate>Move Target city</span></a>\r\n                        </li>\r\n                        <li role=\"presentation\" class=\"divider\"></li>\r\n                        <li>\r\n                            <a href ng-click=\"DeleteTargetCity(edit_targetCity)\">\r\n                                <span class=\"glyphicon glyphicon-trash\" aria-hidden=\"true\"></span> <span translate>Delete Target city</span>\r\n                            </a>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n                <a href ng-disabled=\"form.$invalid\" class=\"btn btn-primary\" ng-click=\"(form.$valid) ? updateTargetCity(edit_targetCity) : false\"><span class=\"glyphicon glyphicon-pencil\" aria-hidden=\"true\"></span> <span  translate>Save Changes</span></a>\r\n            </div>\r\n        </div>\r\n        <div class=\"clearfix\"></div>\r\n    </div>\r\n</div>\r\n","<div id=\"edit_training_window\">\r\n    <div style=\"clear:both\"></div>\r\n\t<div class='training-window'>\r\n\t\t<h4>{{edit_training.name}}\r\n\t\t\t<small>{{edit_training.type}}</small>\r\n            <small ng-if=\"!edit_training.editable && edit_training.created_by_email\"><br>{{edit_training.created_by_email}}</small>\r\n\t\t</h4>\r\n        <form name=\"form\" novalidate>\r\n\t\t<table class=\"table table-condensed\">\r\n\t\t\t<tr>\r\n\t\t\t\t<td><b translate>Name:</b></td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<input id=\"tbName\" name=\"name\" class=\"form-control input-sm\" type=\"text\" placeholder=\"Name\" ng-model=\"edit_training.name\" ng-if=\"edit_training.editable\" ng-required=\"true\"/>\r\n                    <small class=\"help-text\" ng-show=\"form.name.$dirty && form.name.$invalid\">\r\n                        <span class=\"text-danger\"  ng-show=\"form.name.$error.required\" translate>Name is required.</span>\r\n                    </small>\r\n\t\t\t\t\t<b ng-if=\"!edit_training.editable\">{{edit_training.name}}</b>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr>\r\n\t\t\t\t<td><b translate>Training Type: </b></td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<select name=\"type\" class=\"form-control input-sm\" id=\"ddlTrainingType\" ng-model=\"edit_training.type\" ng-options=\"s.value as s.text for s in training_types\" ng-if=\"edit_training.editable\" ng-required=\"true\"></select>\r\n\t\t\t\t\t<b ng-if=\"!edit_training.editable\">{{edit_training.type}}</b>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\r\n\t\t\t<tr>\r\n\t\t\t\t<td><b translate>Date:</b></td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<input class=\"form-control input-sm\" id=\"tbDate\" type=\"date\" class=\"map-training-date\" placeholder=\"Date\" ng-model=\"edit_training.date\"  ng-if=\"edit_training.editable\"/>\r\n\t\t\t\t\t<b ng-if=\"!edit_training.editable\">{{edit_training.date | date: 'MMM-dd-yyyy'}}</b>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\r\n\t\t\t<tr>\r\n\t\t\t\t<td><b translate>MCC:</b></td>\r\n\t\t\t\t<td class=\"text-uppercase\">{{edit_training.mcc}}</td>\r\n\t\t\t</tr>\r\n\t\t</table>\r\n        </form>\r\n\t\t<table class=\"table table-striped\">\r\n\t\t\t<thead>\r\n\t\t\t<tr>\r\n\t\t\t\t<th translate>Stage</th>\r\n\t\t\t\t<th translate>Date</th>\r\n\t\t\t\t<th translate>Participants</th>\r\n\t\t\t\t<th></th>\r\n\t\t\t</tr>\r\n\t\t\t</thead>\r\n\r\n\t\t\t<tbody>\r\n\r\n\t\t\t<tr ng-repeat=\"comp in edit_training.gcm_training_completions track by comp.phase\">\r\n\t\t\t\t<td>\r\n\t\t\t\t\t{{comp.phase}}\r\n\t\t\t\t</td>\r\n\t\t\t\t<td class=\"training-stages-control\">\r\n\t\t\t\t\t<span ng-hide=\"comp.editMode\">{{comp.date | date:'mediumDate'}}</span>\r\n\t\t\t\t\t<input ng-show=\"comp.editMode\" class=\"map-training-date\" type=\"date\" ng-model=\"comp.date\" ng-if=\"edit_training.editable\"/>\r\n\t\t\t\t</td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<span ng-hide=\"comp.editMode\">{{comp.number_completed}}</span>\r\n\t\t\t\t\t<input ng-show=\"comp.editMode\" class=\"map-training-number\" type=\"number\" ng-model=\"comp.number_completed\" min=\"0\" ng-if=\"edit_training.editable\"/>\r\n\r\n\t\t\t\t</td>\r\n\t\t\t\t<td ng-if=\"edit_training.editable\">\r\n\t\t\t\t\t<a href=\"\" ng-click=\"comp.editMode=true; comp.orig_date=comp.date; comp.orig_num = comp.number_completed;\" ng-show=\"!comp.editMode\">Edit</a>\r\n\t\t\t\t\t<!--<a href=\"\" ng-click=\"$parent.$parent.$parent.$parent.deleteTraining=training; $parent.$parent.$parent.$parent.deleteTrainingCompletion=comp;\" data-toggle=\"modal\" data-target=\"#div_deleteTrainingComp\" ng-show=\"(!comp.editMode) && comp.phase==(training.current_stage-1) \">Delete</a>-->\r\n\t\t\t\t\t<a href=\"javascript:void(0)\" ng-click=\"comp.editMode=false; updateTrainingCompletion(comp);\" ng-show=\"comp.editMode\">Save</a>\r\n\t\t\t\t\t<a href=\"javascript:void(0)\" ng-click=\"comp.editMode=false; comp.date=comp.orig_date; comp.number_completed = comp.orig_num; \" ng-show=\"comp.editMode\">Cancel</a>\r\n\t\t\t\t\t<a href=\"javascript:void(0)\" ng-click=\"deleteTrainingComplete(comp, $index)\" translate>Delete</a>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr ng-if=\"edit_training.editable\">\r\n\t\t\t\t<td>\r\n\t\t\t\t\t{{training.current_stage}}\r\n\t\t\t\t</td>\r\n\t\t\t\t<td class=\"training-stages-control\">\r\n\t\t\t\t\t<input type=\"date\" class=\"map-training-date\" ng-model=\"edit_training.insert.date\" />\r\n\t\t\t\t</td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<input type=\"number\" class=\"map-training-number\" ng-model=\"edit_training.insert.number_completed\" min=\"0\" />\r\n\t\t\t\t</td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<a href=\"javascript:void(0)\" ng-click=\"addTrainingStage(edit_training);\" translate>Add Stage</a>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t\t</tbody>\r\n\r\n\t\t</table>\r\n\r\n\t\t\t<div ng-if=\"edit_training.editable\" class=\"btn-group btn-group-sm btn-group-justified\" role=\"group\">\r\n\t\t\t\t<div class=\"btn-group btn-group-sm dropup\" dropdown>\r\n\t\t\t\t\t<button type=\"button\" class=\"btn btn-default dropdown-toggle\" dropdown-toggle>\r\n\t\t\t\t\t\t<span translate>Options</span> <span class=\"caret\"></span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<ul class=\"dropdown-menu\" role=\"menu\">\r\n                        <li ng-if=\"canAddStories(edit_training)\">\r\n                            <a href ng-click=\"addStoryToIcon(edit_training,'training')\">\r\n                                <span class=\"glyphicon glyphicon-tag\" aria-hidden=\"true\"></span> <span translate> Add Story</span>\r\n                            </a>\r\n                        </li>\r\n\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t<a href ng-click=\"makeMovableIcon.MoveTraining()\">\r\n\t\t\t\t\t\t\t\t<span class=\"glyphicon glyphicon-move\" aria-hidden=\"true\"></span> <span translate>Move Training</span>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li role=\"presentation\" class=\"divider\"></li>\r\n\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t<a href ng-click=\"DeleteTraining()\">\r\n\t\t\t\t\t\t\t\t<span class=\"glyphicon glyphicon-trash\" aria-hidden=\"true\"></span> <span translate>Delete Training</span>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t\t<a href ng-disabled=\"form.$invalid\" class=\"btn btn-primary\" ng-click=\"(form.$valid) ? updateTraining() : false\"><span class=\"glyphicon glyphicon-pencil\" aria-hidden=\"true\"></span> <span translate>Save Changes</span></a>\r\n\t\t\t</div>\r\n\t\t</div>\r\n    <div ng-if=\"!edit_training.editable && canAddStories(edit_training)\" class=\"btn-group btn-group-justified\" role=\"group\">\r\n        <a href ng-click=\"trainingWindow.close()\" class=\"btn btn-sm btn-default\">Close</a>\r\n        <a href ng-click=\"addStoryToIcon(edit_training,'training')\" class=\"btn btn-primary btn-sm\"><span class=\"glyphicon glyphicon-tag\" aria-hidden=\"true\"></span> <span translate> Add Story</span></a>\r\n    </div>\r\n\t\t<div class=\"clearfix\"></div>\r\n\r\n</div>\r\n","<div id=\"map_canvas\" style=\"width: 100%; height: 650px;\"></div>\r\n\r\n<div id=\"side\" class=\"map_side\" ng-show=\"current.isLoaded\">\r\n\r\n\t<button title=\"Create new target point\" type=\"button\" class=\"btn btn-default btn-sm\" ng-click=\"onAddIcon()\" ng-if=\"current.mcc == 'gcm'\">\r\n\t\t<i class=\"glyphicon glyphicon-plus\"></i> <img ng-src=\"{{versionUrl('img/icon/target.png')}}\" height=\"25\" alt=\"\" />\r\n\t</button>\r\n\r\n\t<button title=\"Create new training\" type=\"button\" class=\"btn btn-default btn-sm\" ng-click=\"onAddTraining()\" ng-if=\"current.assignment.mccs.length\">\r\n        <i class=\"glyphicon glyphicon-plus\"></i> <img ng-src=\"{{versionUrl('img/icon/training.png')}}\" height=\"25\" alt=\"\" />\r\n\t</button>\r\n\r\n    <button title=\"Create new target city\" type=\"button\" class=\"btn btn-default btn-sm\" ng-click=\"onAddTargetCity()\" ng-if=\"isTargetCitiesVisible===true\">\r\n        <i class=\"glyphicon glyphicon-plus\"></i> <img ng-src=\"{{versionUrl('img/icon/target-city.png')}}\" height=\"25\" alt=\"\" />\r\n    </button>\r\n\r\n\t<button title=\"My location on map\" type=\"button\" class=\"btn btn-default btn-my-location btn-sm\" ng-click=\"myLocation()\" ng-if=\"supportsGeoLocation\">\r\n\t\t<span class=\"glyphicon glyphicon-screenshot\"></span>\r\n\t</button>\r\n\r\n\t<div class=\"map_legend_header\" ng-click=\"show_legend = !show_legend\">\r\n\t\t<span>LEGEND <i class=\"glyphicon \" ng-class=\"{'glyphicon-triangle-top': (show_legend===true), 'glyphicon-triangle-bottom' : (show_legend===false) }\"></i> </span>\r\n    </div>\r\n\t\r\n\t<table class=\"map_legend\" ng-show=\"show_legend\" ng-init=\"show_legend=true\">\r\n\t\t<tbody>\r\n\t\t<tr ng-if=\"current.mcc == 'gcm'\">\r\n\t\t\t<td>\r\n\t\t\t\t<input type=\"checkbox\" id=\"targetPointCheckBox\" class=\"church_development_checkbox\" ng-model=\"$parent.iconFilters.target_point\" development=\"1\" ng-change=\"loadChurches()\">\r\n\t\t\t</td>\r\n\t\t\t<td style=\"text-align:center; padding:2px 12px\">\r\n\t\t\t\t<img class=\"map_legend_icon\" ng-src=\"{{versionUrl('img/icon/target.png')}}\"></td>\r\n\t\t\t<td><label for=\"targetPointCheckBox\" translate>Target point</label></td>\r\n\t\t</tr>\r\n\r\n\t\t<tr ng-if=\"current.mcc == 'gcm'\">\r\n\t\t\t<td>\r\n\t\t\t\t<input type=\"checkbox\" id=\"groupPeopleCheckBox\" class=\"church_development_checkbox\" ng-model=\"$parent.iconFilters.group\" development=\"2\" ng-change=\"loadChurches()\">\r\n\t\t\t</td>\r\n\t\t\t<td style=\"text-align:center; padding:2px 12px\">\r\n\t\t\t\t<img class=\"map_legend_icon\" ng-src=\"{{versionUrl('img/icon/group.png')}}\"></td>\r\n\t\t\t<td><label for=\"groupPeopleCheckBox\" translate>Group</label></td>\r\n\t\t</tr>\r\n\r\n\t\t<tr ng-if=\"current.mcc == 'gcm'\">\r\n\t\t\t<td>\r\n\t\t\t\t<input type=\"checkbox\" id=\"churchOrCummunityCheckBox\" class=\"church_development_checkbox\" ng-model=\"$parent.iconFilters.church\" development=\"3\" ng-change=\"loadChurches()\">\r\n\t\t\t</td>\r\n\t\t\t<td style=\"text-align:center; padding:2px 12px\">\r\n\t\t\t\t<img class=\"map_legend_icon\" ng-src=\"{{versionUrl('img/icon/church.png')}}\"></td>\r\n\t\t\t<td><label for=\"churchOrCummunityCheckBox\" translate>Church or community of disciples</label></td>\r\n\t\t</tr>\r\n\r\n\t\t<tr ng-if=\"current.mcc == 'gcm'\">\r\n\t\t\t<td>\r\n\t\t\t\t<input type=\"checkbox\" id=\"multiplyingChurchCheckBox\" class=\"church_development_checkbox\" ng-model=\"$parent.iconFilters.mult_church\" development=\"5\" ng-change=\"loadChurches()\">\r\n\t\t\t</td>\r\n\t\t\t<td style=\"text-align:center; padding:2px 12px\">\r\n\t\t\t\t<img class=\"map_legend_icon\" ng-src=\"{{versionUrl('img/icon/multiplying.png')}}\">\r\n\t\t\t</td>\r\n\t\t\t<td><label for=\"multiplyingChurchCheckBox\" translate>Multiplying church or community of disciples</label></td>\r\n\t\t</tr>\r\n\r\n        <tr ng-if=\"isTargetCitiesVisible===true\">\r\n            <td>\r\n                <input type=\"checkbox\" id=\"targetCityCheckBox\" class=\"church_development_checkbox\" ng-model=\"iconFilters.targetCity\">\r\n            </td>\r\n            <td style=\"text-align:center; padding:2px 12px\">\r\n                <img class=\"map_legend_icon\" ng-src=\"{{versionUrl('img/icon/target-city.png')}}\"></td>\r\n            <td><label for=\"targetCityCheckBox\" translate>Target city</label></td>\r\n        </tr>\r\n\r\n\t\t<tr ng-if=\"current.assignment.mccs.length\">\r\n\t\t\t<td>\r\n\t\t\t\t<input type=\"checkbox\" id=\"trainingActivityCheckBox\" class=\"church_development_checkbox\" ng-model=\"iconFilters.training\">\r\n\t\t\t</td>\r\n\t\t\t<td style=\"text-align:center; padding:2px 12px\">\r\n\t\t\t\t<img class=\"map_legend_icon\" ng-src=\"{{versionUrl('img/icon/training.png')}}\"></td>\r\n\t\t\t<td><label for=\"trainingActivityCheckBox\" translate>Training activity</label></td>\r\n\t\t</tr>\r\n\r\n\t\t<tr ng-if=\"current.mcc == 'gcm'\">\r\n\t\t\t<td><input type=\"checkbox\" id=\"jesusFilmCheckBox\" ng-model=\"$parent.iconFilters.jesus_film\"></td>\r\n\t\t\t<td style=\"text-align:center; padding:2px 12px\">\r\n\t\t\t\t<div style=\"display:inline-block; font-size:10px; font-weight:bold; border:1px solid #2a6800; padding:0px 3px; background-color:yellow; color:black\">1</div>\r\n\t\t\t</td>\r\n\t\t\t<td><label for=\"jesusFilmCheckBox\" translate>Jesus film contribution</label></td>\r\n\t\t</tr>\r\n\r\n\t\t<tr ng-if=\"current.mcc == 'gcm'\">\r\n\t\t\t<td><input type=\"checkbox\" id=\"parentLineCheckBox\" ng-model=\"$parent.iconFilters.parent_lines\"></td>\r\n\t\t\t<td style=\"text-align:center; padding:2px 12px\">\r\n\t\t\t\t<div style=\"display:inline-block; width:14px; height:2px;  background-color:grey\"></div>\r\n\t\t\t</td>\r\n\t\t\t<td><label for=\"parentLineCheckBox\" translate>Parent lines</label></td>\r\n\t\t</tr>\r\n\r\n\t\t</tbody>\r\n\t</table>\r\n\t\r\n\t<div ng-if=\"current.assignment.mccs.length\">\r\n\t\t<div class=\"map_legend_header\" ng-click=\"show_filters = !show_filters\">\r\n\t\t\t<span>FILTERS <i class=\"glyphicon \" ng-class=\"{'glyphicon-triangle-top': (show_filters===true), 'glyphicon-triangle-bottom' : (show_filters===false) }\"></i> </span>\r\n        </div>\r\n\t\t<div class=\"map-legend\" ng-show=\"show_filters\" ng-init=\"show_filters=true\">\r\n\t\t\t<div class=\"radio\">\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<input type=\"radio\" name=\"map_scope_filter\" id=\"filter_everything\" ng-model=\"$parent.map_scope_filter\" value=\"everything\">\r\n\t\t\t\t\t<span translate>Everything</span>\r\n\t\t\t\t</label>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"radio\">\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<input type=\"radio\" name=\"map_scope_filter\" id=\"filter_my_target_area_only\" ng-model=\"$parent.map_scope_filter\" value=\"min_only\">\r\n\t\t\t\t\t{{current.assignment.name}} <span translate>only</span>\r\n\t\t\t\t</label>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"radio\">\r\n\t\t\t\t<label>\r\n\t\t\t\t\t<input type=\"radio\" name=\"map_scope_filter\" id=\"filterMyTree\" ng-model=\"$parent.map_scope_filter\" value=\"tree\">\r\n\t\t\t\t\t{{current.assignment.name}} + <span translate>tree</span>\r\n\t\t\t\t</label>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<hr style=\"margin:8px 0\">\r\n\t<div>\r\n\t\t<button type=\"button\" class=\"btn btn-default btn-block btn-sm\" ng-click=\"setMyDefaultMapView()\" translate>Set as my Ministry Default View</button>\r\n\t\t<button type=\"button\" class=\"btn btn-default btn-block btn-sm\" ng-click=\"setMinistryDefaultView()\" ng-if=\"current.hasRole(['admin','inherited_admin'])\" translate>Set Ministry Default View for others</button>\r\n\t</div>\r\n</div>\r\n\r\n<div id=\"map_controls\" class=\"map-controls\" ng-show=\"current.isLoaded\" ng-init=\"mapExpended=false\" ng-class=\"(mapExpended==true)?'map-search-expand':'map-search-collapse'\">\r\n\t<div class=\"pull-left map-search\">\r\n\t\t<div class=\"input-group\">\r\n\t\t\t<input id=\"searchBox\" type=\"text\" class=\"form-control\" placeholder=\"{{'Search'|translate}}...\" ng-blur=\"mapExpended=!mapExpended\">\r\n\t\t\t<span title=\"Click to expand/collapse search\" ng-click=\"mapExpended=!mapExpended\" class=\"input-group-addon\"><span class=\"glyphicon glyphicon-search\"></span></span>\r\n\t\t</div>\r\n\t</div>\r\n</div>","<div id=\"new_church_window\">\r\n\t<div class=\"clearfix\"></div>\r\n    <div class='church-window'>\r\n        <h4 translate>Create New Church </h4>\r\n        <form name=\"form\" novalidate>\r\n        <table class=\"table table-condensed\">\r\n            <tr>\r\n                <td><b translate>Name:</b></td>\r\n                <td>\r\n                    <input type=\"text\" name=\"name\" class=\"form-control input-sm\" ng-model='new_church.name' ng-required=\"true\"/>\r\n                    <small class=\"help-text\" ng-show=\"form.name.$dirty && form.name.$invalid\">\r\n                        <span class=\"text-danger\"  ng-show=\"form.name.$error.required\" translate>Name is required.</span>\r\n                    </small>\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td><b translate>Contact Name: </b></td>\r\n                <td>\r\n                    <input type=\"text\" class=\"form-control input-sm\" ng-model='new_church.contact_name' />\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td><b translate>Contact Email:</b> </td>\r\n                <td>\r\n\r\n                    <input type=\"email\" name=\"email\" placeholder=\"name@email.com\" class=\"form-control input-sm\" ng-model='new_church.contact_email' />\r\n                    <small class=\"help-text\" ng-show=\"form.email.$dirty && form.email.$invalid\">\r\n                        <span class=\"text-danger\"  ng-show=\"form.email.$error.email\" translate>Invalid email format</span>\r\n                    </small>\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td><b translate>Contact Mobile:</b> </td>\r\n                <td>\r\n\r\n                    <input type=\"text\" name=\"mobile\" placeholder=\"+99 99999999\" ng-maxlength=\"25\" class=\"form-control input-sm\" ng-model='new_church.contact_mobile' ng-pattern=\"/^(\\d+|\\+)*(\\s|\\d)+$/\"/>\r\n                    <small class=\"help-text\" ng-show=\"form.mobile.$dirty && form.mobile.$invalid\">\r\n                        <span class=\"text-danger\"  ng-show=\"form.mobile.$error.pattern\" translate>Mobile number is invalid.</span>\r\n                    </small>\r\n\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td><b translate>Jesus film activity:</b> </td>\r\n                <td>\r\n                    <label class=\"radio-inline\"><input name=\"jf_contrib\" type=\"radio\" value=\"1\" ng-model=\"new_church.jf_contrib\" ng-required=\"true\"> <span translate>Yes</span></label>\r\n                    <label class=\"radio-inline\"><input name=\"jf_contrib\" type=\"radio\" value=\"0\" ng-model=\"new_church.jf_contrib\" ng-required=\"true\"> <span translate>No</span></label>\r\n                    <br><small ng-show=\"form.jf_contrib.$invalid\" class=\"help-text text-danger\" translate>Please make a choice</small>\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td><b translate>Type:</b> </td>\r\n                <td>\r\n                    <select class=\"form-control input-sm\" ng-model=\"new_church.development\" ng-required=\"true\">\r\n                        <option value=\"1\" translate>Target</option>\r\n                        <option value=\"2\" translate>Group</option>\r\n                        <option value=\"3\" translate>Church</option>\r\n                        <option value=\"5\" translate>Multiplying Church</option>\r\n                    </select>\r\n\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td><b translate>Size:</b> </td>\r\n                <td>\r\n                    <input class=\"form-control input-sm\" type=\"number\" min=\"0\" max=\"2147483647\" ng-maxlength=\"10\" ng-model=\"new_church.size\" />\r\n                </td>\r\n            </tr>\r\n            <tr ng-if=\"!current.hasRole('self_assigned')\">\r\n                <td><b translate>Security:</b> </td>\r\n                <td>\r\n                    <select name=\"security\" class=\"form-control input-sm\" ng-model=\"new_church.security\" ng-required=\"true\">\r\n                        <option value=\"1\" translate>Private</option>\r\n                        <option value=\"2\" translate>Registered Users</option>\r\n                        <option value=\"3\" translate>Public</option>\r\n                    </select>\r\n                    <small class=\"help-text\" ng-show=\"form.security.$dirty && form.security.$invalid\">\r\n                        <span class=\"text-danger\"  ng-show=\"form.security.$error.required\" translate>Security is a required field</span>\r\n                    </small>\r\n\r\n                </td>\r\n            </tr>\r\n        </table>\r\n        </form>\r\n\r\n\t\t<div>\r\n\t\t\t<div class=\"btn-group btn-group-sm btn-group-justified\" role=\"group\">\r\n\t\t\t\t<a href class=\"btn btn-default\" ng-click=\"cancelAddNewIcon()\" translate>Cancel</a>\r\n\t\t\t\t<a href ng-disabled=\"form.$invalid\" class=\"btn btn-primary\" ng-click=\"(form.$valid) ? addChurch() : false\"><span class=\"glyphicon glyphicon-ok\" aria-hidden=\"true\"></span> <span translate>Add Church</span></a>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"clearfix\"></div>\r\n    </div>\r\n</div>\r\n","<div id=\"new_target_city_window\">\r\n    <div class=\"clearfix\"></div>\r\n    <div class='target-city-window'>\r\n        <h4 translate>New Target city </h4>\r\n        <form name=\"form\" novalidate>\r\n        <table class=\"table table-condensed\">\r\n            <tr>\r\n                <td><b translate>Name:</b></td>\r\n                <td>\r\n                    <input type=\"text\" name=\"name\" class=\"form-control input-sm\" maxlength=\"200\" placeholder=\"Name\" ng-model=\"new_targetCity.name\" ng-required=\"true\"/>\r\n                    <small class=\"help-text\" ng-show=\"form.name.$dirty && form.name.$invalid\">\r\n                        <span class=\"text-danger\"  ng-show=\"form.name.$error.required\" translate>Name is required.</span>\r\n                    </small>\r\n                </td>\r\n            </tr>\r\n            <tr ng-if=\"current.assignment.area_code==='GLBL'\">\r\n                <td><b translate>Area:</b></td>\r\n                <td>\r\n                    <select class=\"form-control input-sm\" name=\"area_code\" ng-options=\"code as name for (code,name) in area_codes\" ng-model=\"new_targetCity.area_code\" ng-required=\"true\">\r\n                        <optgroup label=\"Select an area\"></optgroup>\r\n                    </select>\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td><b translate>Country:</b></td>\r\n                <td>\r\n                    <select class=\"form-control input-sm\" name=\"country\" ng-options=\"lang.iso3 as lang.name for lang in ISOCountries\" ng-model=\"new_targetCity.iso_country_code\" ng-required=\"true\">\r\n                        <optgroup label=\"Select country\"></optgroup>\r\n                    </select>\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td><b translate>Stage:</b></td>\r\n                <td>\r\n                    <select class=\"form-control input-sm\" name=\"stage\" ng-model=\"new_targetCity.stage\" ng-init=\"new_targetCity.stage=0\" ng-change=\"new_targetCity.substage=''\" ng-required=\"true\">\r\n                        <option value=\"0\">0</option>\r\n                        <option value=\"1\">1</option>\r\n                        <option value=\"2\">2</option>\r\n                        <option value=\"3\">3</option>\r\n                    </select>\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td><b translate>Sub Stage:</b></td>\r\n                <td>\r\n                    <select class=\"form-control input-sm\" ng-options=\"substage.val as substage.name for substage in targetCitySubStages | filter :{ stage : new_targetCity.stage }\" ng-model=\"new_targetCity.substage\">\r\n                        <option value=\"\" translate>None</option>\r\n                    </select>\r\n                </td>\r\n            </tr>\r\n        </table>\r\n        </form>\r\n        <div>\r\n            <div class=\"btn-group btn-group-sm btn-group-justified\" role=\"group\">\r\n                <a href class=\"btn btn-default\" ng-click=\"cancelAddNewIcon()\" translate>Cancel</a>\r\n                <a href ng-disabled=\"form.$invalid\" class=\"btn btn-primary\" ng-click=\"(form.$valid) ? addTargetCity(new_targetCity) : false\"><span class=\"glyphicon glyphicon-ok\" aria-hidden=\"true\"></span> <span translate>Add Target city</span></a>\r\n            </div>\r\n        </div>\r\n        <div class=\"clearfix\"></div>\r\n    </div>\r\n</div>\r\n","<div id=\"new_church_window\">\r\n\t<div class=\"clearfix\"></div>\r\n\t<div class='church-window'>\r\n\t\t<h4 translate>New Church Training Activity </h4>\r\n        <form name=\"form\" novalidate>\r\n\t\t<table class=\"table table-condensed\">\r\n\t\t\t<tr>\r\n\t\t\t\t<td><b translate>Name:</b></td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<input id=\"tbName\" name=\"name\" type=\"text\" class=\"form-control input-sm\" placeholder=\"Name\" ng-model=\"new_training.name\" ng-required=\"true\"/>\r\n                    <small class=\"help-text\" ng-show=\"form.name.$dirty && form.name.$invalid\">\r\n                        <span class=\"text-danger\"  ng-show=\"form.name.$error.required\" translate>Name is required.</span>\r\n                    </small>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr>\r\n\t\t\t\t<td><b translate>Training Type: </b></td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<select id=\"ddlTrainingType\" class=\"form-control input-sm\" ng-model=\"new_training.type\" ng-options=\"s.value as s.text for s in training_types\" ng-required=\"true\"></select>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\r\n\t\t\t<tr>\r\n\t\t\t\t<td><b translate>Date:</b></td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<input id=\"tbDate\" type=\"date\" class=\"form-control input-sm\" placeholder=\"yyyy-mm-dd\" ng-model=\"new_training.date\" ng-required=\"true\"/>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\r\n\t\t\t<tr>\r\n\t\t\t\t<td><b translate>Participants:</b></td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<input id=\"tbParticipants\" type=\"number\" class=\"form-control input-sm\" placeholder=\"(Optional)\" ng-model=\"new_training.participants\" min=\"0\" />\r\n\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr>\r\n\t\t\t\t<td><b translate>MCC:</b></td>\r\n\t\t\t\t<td class=\"text-uppercase\">{{current.mcc}}</td>\r\n\t\t\t</tr>\r\n\t\t</table>\r\n        </form>\r\n\t\t<div>\r\n\t\t\t<div class=\"btn-group btn-group-sm btn-group-justified\" role=\"group\">\r\n\t\t\t\t<a href class=\"btn btn-default\" ng-click=\"cancelAddNewIcon()\" translate>Cancel</a>\r\n\t\t\t\t<a href ng-disabled=\"form.$invalid\" class=\"btn btn-primary\" ng-click=\"(form.$valid) ? addTraining() : false\"><span class=\"glyphicon glyphicon-ok\" aria-hidden=\"true\"></span> <span translate>Add Training</span></a>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"clearfix\"></div>\r\n\t</div>\r\n</div>\r\n","<div class=\"modal-header\">\r\n\t<button type=\"button\" class=\"close\" ng-click=\"close();\">\r\n\t\t<span aria-hidden=\"true\">&times;</span><span class=\"sr-only\" translate>Close</span>\r\n\t</button>\r\n\t<h3 class=\"modal-title\">{{measurement.localized_name || measurement.localize_name || measurement.name}}\r\n\t\t<small>{{current.period.format('YYYY-MM')}}</small>\r\n\t</h3>\r\n\t<div class=\"well well-sm measurement-desc\" ng-show=\"measurement.description\">{{measurement.localized_description || measurement.localize_description || measurement.description}}</div>\r\n</div>\r\n<div class=\"modal-body\" ng-show=\"spinner\" ng-include=\"'partials/spinner.html'\"></div>\r\n<div class=\"modal-body edit_meas_form\" ng-hide=\"spinner\">\r\n\t<div id=\"measurement_graph\" gma-trend ng-model=\"trend\"></div>\r\n\r\n\t<form class=\"form-horizontal\" name=\"editForm\">\r\n\r\n\t\t<div class=\"form-group\">\r\n\t\t\t<label class=\"col-xs-5 control-label text-uppercase\" translate>Total</label>\r\n\r\n\t\t\t<div class=\"col-xs-7\">\r\n\t\t\t\t<input class=\"form-control\" type=\"number\" ng-model=\"details.total[current.period.format('YYYY-MM')]\" disabled />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<!-- Local Breakdown -->\r\n\t\t<fieldset ng-init=\"localToggle=false\">\r\n\t\t\t<legend class=\"pointer\" ng-click=\"localToggle=!localToggle\">{{current.assignment.name}} (<span translate>Local Team</span>)\r\n\t\t\t\t\t<span class=\"glyphicon pull-right\"\r\n\t\t\t\t\t\t  ng-class=\"{'glyphicon-triangle-left': !localToggle, 'glyphicon-triangle-bottom': localToggle}\">\r\n\t\t\t\t\t</span>\r\n\t\t\t</legend>\r\n\t\t\t<div ng-if=\"current.hasRole(['admin','inherited_admin','leader', 'inherited_leader'])\" ng-show=\"localToggle\">\r\n\t\t\t\t<div class=\"form-group\" ng-class=\"{'has-error': !editForm.local.$valid}\">\r\n\t\t\t\t\t<label class=\"col-xs-5 control-label\" translate>Local</label>\r\n\r\n\t\t\t\t\t<div class=\"col-xs-7\">\r\n\t\t\t\t\t\t<input class=\"form-control\" type=\"number\" placeholder=\"Local Team\" name=\"local\" ng-model=\"details.local_breakdown[ns]\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div ng-show=\"localToggle\" class=\"form-group\" ng-repeat=\"(name, value) in filterSource(details.local_breakdown)\">\r\n\t\t\t\t\t<label class=\"col-xs-5 control-label text-capitalize\">{{name}}</label>\r\n\r\n\t\t\t\t\t<div class=\"col-xs-7\">\r\n\t\t\t\t\t\t<input class=\"form-control\" type=\"number\" disabled ng-model=\"value\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div ng-if=\"current.hasRole('member')\" ng-show=\"localToggle\">\r\n\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t<label class=\"col-xs-5 control-label\" translate>Total</label>\r\n\r\n\t\t\t\t\t<div class=\"col-xs-7\">\r\n\t\t\t\t\t\t<input class=\"form-control\" type=\"number\" ng-model=\"details.local_breakdown.total\" disabled />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</fieldset>\r\n\r\n\t\t<!-- Team Members -->\r\n\t\t<fieldset ng-init=\"teamToggle=false\">\r\n\t\t\t<legend class=\"pointer\" ng-click=\"teamToggle=!teamToggle\"><span translate>Team Members</span>\r\n\t\t\t\t\t<span class=\"glyphicon pull-right\"\r\n\t\t\t\t\t\t  ng-class=\"{'glyphicon-triangle-left': !teamToggle, 'glyphicon-triangle-bottom': teamToggle}\">\r\n\t\t\t\t\t</span>\r\n\t\t\t</legend>\r\n\t\t\t<div class=\"form-group\" ng-class=\"{'has-error': !editForm.person.$valid}\" ng-if=\"current.hasRole(['member','leader','admin'])\">\r\n\t\t\t\t<label class=\"col-xs-5 control-label\">{{current.user.last_name}}, {{current.user.first_name}}</label>\r\n\r\n\t\t\t\t<div class=\"col-xs-7\">\r\n\t\t\t\t\t<input class=\"form-control\" type=\"number\" placeholder=\"Personal\" name=\"person\" ng-model=\"details.self_breakdown[ns]\" />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div ng-show=\"teamToggle\">\r\n                <!-- hide former_member member with total =0 -->\r\n\t\t\t\t<div class=\"form-group\" ng-repeat=\"member in details.team | orderBy : 'first_name'\" ng-hide=\"(member.team_role==='former_member' && member.total===0)\" ng-if=\"current.hasRole(['admin','inherited_admin','leader', 'inherited_leader'])\">\r\n\t\t\t\t\t<label class=\"col-xs-5 control-label\">{{member.last_name}}, {{member.first_name}}</label>\r\n\r\n\t\t\t\t\t<div class=\"col-xs-7\">\r\n\t\t\t\t\t\t<input class=\"form-control\" type=\"number\" ng-model=\"member.total\" disabled />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</fieldset>\r\n\r\n\t\t<!-- Sub Ministries -->\r\n\t\t<fieldset ng-if=\"details.sub_ministries.length\" ng-init=\"ministryToggle = false\">\r\n\t\t\t<legend class=\"pointer\" ng-click=\"ministryToggle=!ministryToggle\"><span translate>Sub-Ministries / Teams</span>\r\n\t\t\t\t\t<span class=\"glyphicon pull-right\"\r\n\t\t\t\t\t\t  ng-class=\"{'glyphicon-triangle-left': !ministryToggle, 'glyphicon-triangle-bottom': ministryToggle}\">\r\n\t\t\t\t\t</span>\r\n\t\t\t</legend>\r\n\t\t\t<div ng-show=\"ministryToggle\">\r\n\t\t\t\t<div class=\"form-group\" ng-repeat=\"ministry in details.sub_ministries\">\r\n\t\t\t\t\t<label class=\"col-xs-5 control-label\">{{ministry.name}}</label>\r\n\r\n\t\t\t\t\t<div class=\"col-xs-7\">\r\n\t\t\t\t\t\t<input class=\"form-control\" type=\"number\" disabled ng-model=\"ministry.total\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</fieldset>\r\n\r\n\t\t<!-- Self Assigned -->\r\n\t\t<fieldset ng-init=\"selfToggle=false\" ng-if=\"current.hasRole(['admin','inherited_admin','leader', 'inherited_leader']) && details.self_assigned.length\">\r\n\t\t\t<legend class=\"pointer\" ng-click=\"selfToggle=!selfToggle\"><span translate>Self Assigned Members (not yet approved)</span>\r\n\t\t\t\t\t<span class=\"glyphicon pull-right\"\r\n\t\t\t\t\t\t  ng-class=\"{'glyphicon-triangle-left': !selfToggle, 'glyphicon-triangle-bottom': selfToggle}\">\r\n\t\t\t\t\t</span>\r\n\t\t\t</legend>\r\n\t\t\t<div ng-show=\"selfToggle\">\r\n\t\t\t\t<div class=\"form-group\" ng-repeat=\"member in details.self_assigned\">\r\n\t\t\t\t\t<label class=\"col-xs-5 control-label\">{{member.last_name}}, {{member.first_name}}</label>\r\n\r\n\t\t\t\t\t<div class=\"col-xs-7\">\r\n\t\t\t\t\t\t<div class=\"input-group col-xs-7\" ng-class=\"{'has-success':member.success, 'has-error':member.blocked}\">\r\n\t\t\t\t\t\t\t<input class=\"form-control\" type=\"number\" ng-model=\"member.total\" disabled />\r\n\r\n\t\t\t\t\t\t\t<div class=\"input-group-btn\" dropdown>\r\n\t\t\t\t\t\t\t\t<button class=\"btn btn-default dropdown-toggle\"\r\n\t\t\t\t\t\t\t\t\t\tdropdown-toggle\r\n\t\t\t\t\t\t\t\t\t\taria-expanded=\"false\"\r\n\t\t\t\t\t\t\t\t\t\tng-disabled=\"member.state\"\r\n\t\t\t\t\t\t\t\t\t\tng-class=\"{'btn-success':member.success, 'btn-danger':member.blocked}\">\r\n                                            <span ng-switch=\"member.state\">\r\n                                                <span ng-switch-when=\"success\" translate>Approved</span>\r\n                                                <span ng-switch-default translate>Approve</span>\r\n                                            </span>\r\n\t\t\t\t\t\t\t\t\t<span class=\"caret\"></span>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<ul class=\"dropdown-menu dropdown-menu-right\" role=\"menu\">\r\n                                    <li><a href=\"javascript:void(0)\" ng-click=\"approveSelfAssigned(member, 'admin')\" translate>Admin</a></li>\r\n\t\t\t\t\t\t\t\t\t<li><a href=\"javascript:void(0)\" ng-click=\"approveSelfAssigned(member, 'member')\" translate>Member</a></li>\r\n\t\t\t\t\t\t\t\t\t<li><a href=\"javascript:void(0)\" ng-click=\"approveSelfAssigned(member, 'leader')\" translate>Leader</a></li>\r\n\t\t\t\t\t\t\t\t\t<li role=\"presentation\" class=\"divider\"></li>\r\n\t\t\t\t\t\t\t\t\t<li><a href=\"javascript:void(0)\" ng-click=\"approveSelfAssigned(member, 'blocked')\" translate>Delete</a></li>\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</fieldset>\r\n\t</form>\r\n</div>\r\n<div class=\"modal-footer\">\r\n\t<button type=\"button\" class=\"btn btn-default\" ng-click=\"close()\"><i class=\"glyphicon glyphicon-remove\"></i> <span translate>Close</span></button>\r\n    <button type=\"button\" class=\"btn btn-primary\" ng-click=\"saveDetails()\" ng-disabled=\"!editForm.$valid || spinner\"><i class=\"glyphicon glyphicon-pencil\"></i> <span translate>Save Measurements</span></button>\r\n</div>\r\n","<div ng-switch=\"current.assignment.team_role\">\r\n\t<div class=\"lmi-item self_assigned\" ng-switch-when=\"self_assigned\" ng-if=\"checkMeasureState(m)\">\r\n\t\t<div class=\"lmi-item-name\" popover=\"{{m.localized_description || m.localize_description || m.description}}\" popover-trigger=\"mouseenter\" popover-popup-delay='1000'>{{m.localized_name || m.localize_name || m.name}}</div>\r\n\t\t<div class=\"lmi-input-group\">\r\n\t\t\t<input type=\"number\"\r\n\t\t\t\t   min=\"0\"\r\n\t\t\t\t   class=\"form-control\"\r\n\t\t\t\t   id=\"{{m.measurement_type_ids.person}}\"\r\n\t\t\t\t   name=\"{{m.measurement_type_ids.person}}\"\r\n\t\t\t\t   ng-model=\"m.person\"\r\n\t\t\t\t   >\r\n\t\t\t<label class=\"lmi-input-addon\" for=\"{{m.measurement_type_ids.person}}\" translate>personal</label>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div class=\"lmi-item member\" ng-switch-when=\"member\" ng-if=\"checkMeasureState(m)\">\r\n\t\t<div class=\"lmi-item-name\" ng-click=\"toggleMeasurementState(measurementState,m.perm_link_stub)\" ng-class=\"(measurementState[m.perm_link_stub]===1)? 'measurement-collapsed':'measurement-expanded'\" popover=\"{{m.localized_description || m.localize_description || m.description}}\" popover-trigger=\"mouseenter\" popover-popup-delay='1000'>{{m.localized_name || m.localize_name || m.name}}</div>\r\n\t\t<div collapse=\"(measurementState[m.perm_link_stub]===1)\">\r\n\t\t\t<div class=\"lmi-item-section col-xs-6\">\r\n\t\t\t\t<div class=\"lmi-input-group\">\r\n\t\t\t\t\t<input type=\"number\"\r\n\t\t\t\t\t\t   min=\"0\"\r\n\t\t\t\t\t\t   class=\"form-control\"\r\n\t\t\t\t\t\t   id=\"{{m.measurement_type_ids.person}}\"\r\n\t\t\t\t\t\t   name=\"{{m.measurement_type_ids.person}}\"\r\n\t\t\t\t\t\t   ng-model=\"m.person\"\r\n\t\t\t\t\t\t   >\r\n\t\t\t\t\t<label class=\"lmi-input-addon\" for=\"{{m.measurement_type_ids.person}}\" translate>personal</label>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"lmi-item-section col-xs-6\" ng-click=\"editMeasurementDetails(m);\" style=\"cursor: pointer;\">\r\n\t\t\t\t<div class=\"lmi-input-group\">\r\n\t\t\t\t\t<div class=\"form-control total\">{{m.total}}</div>\r\n\t\t\t\t\t<label class=\"lmi-input-addon\" translate>total</label>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<span class=\"clearfix\"></span>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div class=\"lmi-item leader\" ng-switch-when=\"leader\" ng-if=\"checkMeasureState(m)\">\r\n\t\t<div class=\"lmi-item-name\" ng-click=\"toggleMeasurementState(measurementState,m.perm_link_stub)\" ng-class=\"(measurementState[m.perm_link_stub]===1)? 'measurement-collapsed':'measurement-expanded'\" popover=\"{{m.localized_description || m.localize_description || m.description}}\" popover-trigger=\"mouseenter\" popover-popup-delay='1000'>{{m.localized_name || m.localize_name || m.name}}</div>\r\n\t\t<div collapse=\"(measurementState[m.perm_link_stub]===1)\">\r\n\t\t\t<div class=\"lmi-item-section col-xs-4\">\r\n\t\t\t\t<div class=\"lmi-input-group\">\r\n\t\t\t\t\t<input type=\"number\"\r\n\t\t\t\t\t\t   min=\"0\"\r\n\t\t\t\t\t\t   class=\"form-control\"\r\n\t\t\t\t\t\t   id=\"{{m.measurement_type_ids.person}}\"\r\n\t\t\t\t\t\t   name=\"{{m.measurement_type_ids.person}}\"\r\n\t\t\t\t\t\t   ng-model=\"m.person\"\r\n\t\t\t\t\t\t   >\r\n\t\t\t\t\t<label class=\"lmi-input-addon\" for=\"{{m.measurement_type_ids.person}}\" translate>personal</label>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"lmi-item-section col-xs-4\">\r\n\t\t\t\t<div class=\"lmi-input-group\">\r\n\t\t\t\t\t<input type=\"number\"\r\n\t\t\t\t\t\t   class=\"form-control\"\r\n\t\t\t\t\t\t   id=\"{{m.measurement_type_ids.local}}\"\r\n\t\t\t\t\t\t   name=\"{{m.measurement_type_ids.local}}\"\r\n\t\t\t\t\t\t   ng-model=\"m.local\"\r\n\t\t\t\t\t\t   >\r\n\t\t\t\t\t<label class=\"lmi-input-addon\" for=\"{{m.measurement_type_ids.local}}\" translate>Team</label>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"lmi-item-section col-xs-4\" ng-click=\"editMeasurementDetails(m);\" style=\"cursor: pointer;\">\r\n\t\t\t\t<div class=\"lmi-input-group\">\r\n\t\t\t\t\t<div class=\"form-control total\">{{m.total}}</div>\r\n\t\t\t\t\t<label class=\"lmi-input-addon\" translate>total</label>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<span class=\"clearfix\"></span>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div class=\"lmi-item leader\" ng-switch-when=\"admin\" ng-if=\"checkMeasureState(m)\">\r\n\t\t<div class=\"lmi-item-name\" ng-click=\"toggleMeasurementState(measurementState,m.perm_link_stub)\" ng-class=\"(measurementState[m.perm_link_stub]===1)? 'measurement-collapsed':'measurement-expanded'\" popover=\"{{m.localized_description || m.localize_description || m.description}}\" popover-trigger=\"mouseenter\" popover-popup-delay='1000'>{{m.localized_name || m.localize_name || m.name}}</div>\r\n\t\t<div collapse=\"(measurementState[m.perm_link_stub]===1)\">\r\n\t\t\t<div class=\"lmi-item-section col-xs-4\">\r\n\t\t\t\t<div class=\"lmi-input-group\">\r\n\t\t\t\t\t<input type=\"number\"\r\n\t\t\t\t\t\t   min=\"0\"\r\n\t\t\t\t\t\t   class=\"form-control\"\r\n\t\t\t\t\t\t   id=\"{{m.measurement_type_ids.person}}\"\r\n\t\t\t\t\t\t   name=\"{{m.measurement_type_ids.person}}\"\r\n\t\t\t\t\t\t   ng-model=\"m.person\"\r\n\t\t\t\t\t\t   >\r\n\t\t\t\t\t<label class=\"lmi-input-addon\" for=\"{{m.measurement_type_ids.person}}\" translate>personal</label>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"lmi-item-section col-xs-4\">\r\n\t\t\t\t<div class=\"lmi-input-group\">\r\n\t\t\t\t\t<input type=\"number\"\r\n\t\t\t\t\t\t   class=\"form-control\"\r\n\t\t\t\t\t\t   id=\"{{m.measurement_type_ids.local}}\"\r\n\t\t\t\t\t\t   name=\"{{m.measurement_type_ids.local}}\"\r\n\t\t\t\t\t\t   ng-model=\"m.local\"\r\n\t\t\t\t\t\t   >\r\n\t\t\t\t\t<label class=\"lmi-input-addon\" for=\"{{m.measurement_type_ids.local}}\" translate>Team</label>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"lmi-item-section col-xs-4\" ng-click=\"editMeasurementDetails(m);\" style=\"cursor: pointer;\">\r\n\t\t\t\t<div class=\"lmi-input-group\">\r\n\t\t\t\t\t<div class=\"form-control total\">{{m.total}}</div>\r\n\t\t\t\t\t<label  class=\"lmi-input-addon\" translate>total</label>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<span class=\"clearfix\"></span>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div class=\"lmi-item inherited_leader\" ng-switch-when=\"inherited_leader\" ng-if=\"checkMeasureState(m)\">\r\n\t\t<div class=\"lmi-item-name\" ng-click=\"toggleMeasurementState(measurementState,m.perm_link_stub)\" ng-class=\"(measurementState[m.perm_link_stub]===1)? 'measurement-collapsed':'measurement-expanded'\" popover=\"{{m.localized_description || m.localize_description || m.description}}\" popover-trigger=\"mouseenter\" popover-popup-delay='1000'>{{m.localized_name || m.localize_name || m.name}}</div>\r\n\t\t<div collapse=\"(measurementState[m.perm_link_stub]===1)\">\r\n\t\t\t<div class=\"lmi-item-section col-xs-6\">\r\n\t\t\t\t<div class=\"lmi-input-group\" ng-click=\"toggleMeasurementState(measurementState,m.perm_link_stub)\" ng-class=\"(measurementState[m.perm_link_stub]===1)? 'measurement-collapsed':'measurement-expanded'\">\r\n\t\t\t\t\t<input type=\"number\"\r\n\t\t\t\t\t\t   class=\"form-control \"\r\n\t\t\t\t\t\t   id=\"{{m.measurement_type_ids.local}}\"\r\n\t\t\t\t\t\t   name=\"{{m.measurement_type_ids.local}}\"\r\n\t\t\t\t\t\t   ng-model=\"m.local\"\r\n\t\t\t\t\t\t   >\r\n\t\t\t\t\t<label class=\"lmi-input-addon\" for=\"{{m.measurement_type_ids.local}}\" translate>Team</label>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"lmi-item-section col-xs-6\" ng-click=\"editMeasurementDetails(m);\" style=\"cursor: pointer;\">\r\n\t\t\t\t<div class=\"lmi-input-group\">\r\n\t\t\t\t\t<div class=\"form-control total \">{{m.total}}</div>\r\n\t\t\t\t\t<label class=\"lmi-input-addon \" translate>total</label>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<span class=\"clearfix\"></span>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div class=\"lmi-item inherited_leader\" ng-switch-when=\"inherited_admin\" ng-if=\"checkMeasureState(m)\">\r\n\t\t<div class=\"lmi-item-name\" ng-click=\"toggleMeasurementState(measurementState,m.perm_link_stub)\" ng-class=\"(measurementState[m.perm_link_stub]===1)? 'measurement-collapsed':'measurement-expanded'\" popover=\"{{m.localized_description || m.localize_description || m.description}}\" popover-trigger=\"mouseenter\" popover-popup-delay='1000'>{{m.localized_name || m.localize_name || m.name}}</div>\r\n\t\t<div collapse=\"(measurementState[m.perm_link_stub]===1)\">\r\n\t\t\t<div class=\"lmi-item-section col-xs-6\">\r\n\t\t\t\t<div class=\"lmi-input-group\">\r\n\t\t\t\t\t<input type=\"number\"\r\n\t\t\t\t\t\t   class=\"form-control  \"\r\n\t\t\t\t\t\t   id=\"{{m.measurement_type_ids.local}}\"\r\n\t\t\t\t\t\t   name=\"{{m.measurement_type_ids.local}}\"\r\n\t\t\t\t\t\t   ng-model=\"m.local\"\r\n\t\t\t\t\t\t   >\r\n\t\t\t\t\t<label class=\"lmi-input-addon  \" for=\"{{m.measurement_type_ids.local}}\" translate>Team</label>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"lmi-item-section col-xs-6\" ng-click=\"editMeasurementDetails(m);\" style=\"cursor: pointer;\">\r\n\t\t\t\t<div class=\"lmi-input-group\">\r\n\t\t\t\t\t<div class=\"form-control total  \">{{m.total}}</div>\r\n\t\t\t\t\t<label class=\"lmi-input-addon  \" translate>total</label>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<span class=\"clearfix\"></span>\r\n\t\t</div>\r\n\t</div>\r\n\r\n</div>\r\n","<div class=\"panel panel-default\" ng-show=\"current.isLoaded\">\r\n\t<div class=\"panel-body\">\r\n\t\t<form name=\"lmiForm\" class=\"measurements\" novalidate>\r\n\t\t\t<fieldset>\r\n                <legend>\r\n                    <div class=\"col-sm-4\">\r\n                        <span translate>Local Movement Indicators</span>\r\n                    </div>\r\n                    <div class=\"col-sm-8 text-right\">\r\n                        <div class=\"col-sm-5\"><!--empty div--></div>\r\n                        <div class=\"col-sm-4\" ng-if=\"current.assignment.content_locales\">\r\n                        <select class=\"form-control input-sm\" ng-change=\"loadMeasurements(currentLanguage)\"\r\n                                ng-model=\"currentLanguage\"\r\n                                ng-options=\"lang.iso_code as lang.english_name for lang in current.langList | filter:filterByLangCode\">\r\n                            <optgroup label=\"Select a language\"></optgroup>\r\n                        </select>\r\n                        </div>\r\n                        <div class=\"col-sm-3 pull-right\">\r\n                            <button type=\"button\" class=\"btn btn-primary pull-right btn-sm\"\r\n                                    ng-disabled=\"!(lmiForm.$valid && lmiForm.$dirty)\" ng-click=\"saveMeasurements()\">\r\n                                <i class=\"glyphicon glyphicon-floppy-disk\"></i> <span translate>Save Changes</span>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"clearfix\"></div>\r\n                </legend>\r\n\r\n\t\t\t\t<table class=\"lmi_table\">\r\n\t\t\t\t\t<thead>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<!-- title-->\r\n\t\t\t\t\t\t<th></th>\r\n\t\t\t\t\t\t<th>\r\n\t\t\t\t\t\t\t<h1>\r\n\t\t\t\t\t\t\t\t<small translate>Faith Actions</small>\r\n\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t<th></th>\r\n\t\t\t\t\t\t<th>\r\n\t\t\t\t\t\t\t<h1>\r\n\t\t\t\t\t\t\t\t<small translate>Fruit</small>\r\n\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t<th></th>\r\n\t\t\t\t\t\t<th>\r\n\t\t\t\t\t\t\t<h1>\r\n\t\t\t\t\t\t\t\t<small translate>Outcome</small>\r\n\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t</th>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<!-- win-->\r\n\t\t\t\t\t\t<td class=\"vertical-text\">\r\n\t\t\t\t\t\t\t<h1>\r\n\t\t\t\t\t\t\t\t<small translate>Win</small>\r\n\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<div ng-init=\"measurementState[m.perm_link_stub] = ((measurementState[m.perm_link_stub] === undefined) ? 0 : measurementState[m.perm_link_stub])\" ng-repeat=\"m in measurements | filter: {section: 'win', column:'faith'} | orderBy:'sort_order'\" ng-include=\"'partials/measurements/lmi.html'\"></div>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<span class=\"glyphicon glyphicon-chevron-right\"></span>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<div ng-init=\"measurementState[m.perm_link_stub] = ((measurementState[m.perm_link_stub] === undefined) ? 0 : measurementState[m.perm_link_stub])\" ng-repeat=\"m in measurements | filter: {section: 'win', column: 'fruit'} | orderBy:'sort_order'\" ng-include=\"'partials/measurements/lmi.html'\"></div>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t<td rowspan=\"3\">\r\n\t\t\t\t\t\t\t<span class=\"glyphicon glyphicon-chevron-right\"></span>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t<td rowspan=\"3\">\r\n\t\t\t\t\t\t\t<div ng-init=\"measurementState[m.perm_link_stub] = ((measurementState[m.perm_link_stub] === undefined) ? 0 : measurementState[m.perm_link_stub])\" ng-repeat=\"m in measurements | filter:{column: 'outcome'} | orderBy:'sort_order'\" ng-include=\"'partials/measurements/lmi.html'\"></div>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<!-- build-->\r\n\t\t\t\t\t\t<td class=\"vertical-text\">\r\n\t\t\t\t\t\t\t<h1>\r\n\t\t\t\t\t\t\t\t<small translate>Build</small>\r\n\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<div ng-init=\"measurementState[m.perm_link_stub] = ((measurementState[m.perm_link_stub] === undefined) ? 0 : measurementState[m.perm_link_stub])\" ng-repeat=\"m in measurements | filter: {section: 'build', column: 'faith'} | orderBy:'sort_order'\" ng-include=\"'partials/measurements/lmi.html'\"></div>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<span class=\"glyphicon glyphicon-chevron-right\"></span>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<div ng-init=\"measurementState[m.perm_link_stub] = ((measurementState[m.perm_link_stub] === undefined) ? 0 : measurementState[m.perm_link_stub])\" ng-repeat=\"m in measurements | filter: {section: 'build', column: 'fruit'} | orderBy:'sort_order'\" ng-include=\"'partials/measurements/lmi.html'\"></div>\r\n\t\t\t\t\t\t</td>\r\n\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<!-- send-->\r\n\t\t\t\t\t\t<td class=\"vertical-text\">\r\n\t\t\t\t\t\t\t<h1>\r\n\t\t\t\t\t\t\t\t<small translate>Send</small>\r\n\t\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<div ng-init=\"measurementState[m.perm_link_stub] = ((measurementState[m.perm_link_stub] === undefined) ? 0 : measurementState[m.perm_link_stub])\" ng-repeat=\"m in measurements | filter: {section: 'send', column: 'faith'} | orderBy:'sort_order'\" ng-include=\"'partials/measurements/lmi.html'\"></div>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<span class=\"glyphicon glyphicon-chevron-right\"></span>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<div ng-init=\"measurementState[m.perm_link_stub] = ((measurementState[m.perm_link_stub] === undefined) ? 0 : measurementState[m.perm_link_stub])\" ng-repeat=\"m in measurements | filter: {section: 'send', column: 'fruit'} | orderBy:'sort_order'\" ng-include=\"'partials/measurements/lmi.html'\"></div>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t</fieldset>\r\n\t\t\t<fieldset ng-if=\"hasOther()\">\r\n\t\t\t\t<legend translate>Other Measurements</legend>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div ng-init=\"measurementState[m.perm_link_stub] = ((measurementState[m.perm_link_stub] === undefined) ? 0 : measurementState[m.perm_link_stub])\" class=\"col-xs-4\" ng-repeat=\"m in measurements | filter: {section: 'other', column: 'other'} | orderBy:'sort_order'\" ng-include=\"'partials/measurements/lmi.html'\"></div>\r\n\t\t\t\t</div>\r\n\t\t\t</fieldset>\r\n\t\t</form>\r\n\t\t<div class=\"pull-right\">\r\n\t\t\t<button type=\"button\" class=\"btn btn-primary btn-sm\" ng-click=\"saveMeasurements()\" ng-disabled=\"!(lmiForm.$valid && lmiForm.$dirty)\"><i class=\"glyphicon glyphicon-floppy-disk\"></i> <span translate>Save Changes</span></button>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n","<div class=\"modal-header\">\r\n    <button type=\"button\" class=\"close\" ng-click=\"close()\">\r\n        <span aria-hidden=\"true\">&times;</span><span class=\"sr-only\" translate>Close</span></button>\r\n    <h4 class=\"modal-title\" translate>My preferences</h4>\r\n</div>\r\n<div class=\"modal-body form-horizontal\">\r\n    <div class=\"form-group\">\r\n        <label class=\"col-sm-4 control-label\" translate>Preferred ministry</label>\r\n\r\n        <div class=\"col-sm-7\">\r\n            <select class=\"form-control\" ng-change=\"changeMCCS(options.preferred_ministry)\" ng-model=\"options.preferred_ministry\" ng-options=\"ministry.ministry_id as ministry.name for ministry in ministries\">\r\n                <option value=\"\" translate>Default</option>\r\n            </select>\r\n        </div>\r\n    </div>\r\n    <div class=\"form-group\">\r\n        <label class=\"col-sm-4 control-label\" translate>Preferred MCC</label>\r\n\r\n        <div class=\"col-sm-7\">\r\n            <select class=\"form-control\" ng-model=\"options.preferred_mcc\" ng-options=\"mcc.mcc as mcc.mccLabel for mcc in mccs\">\r\n                <option value=\"\" translate>Default</option>\r\n            </select>\r\n        </div>\r\n    </div>\r\n    <!--<div class=\"form-group\" ng-if=\"current.hasRole(['admin','inherited_admin','leader', 'inherited_leader'])\">\r\n        <label class=\"col-sm-4 control-label\" translate>Hide reports tab</label>\r\n\r\n        <div class=\"col-sm-8\">\r\n            <label class=\"radio-inline\"><input type=\"radio\" value=\"1\" ng-model=\"options.hide_reports_tab\"> <span translate>Hide</span></label>\r\n            <label class=\"radio-inline\"><input type=\"radio\" value=\"0\" ng-model=\"options.hide_reports_tab\"> <span translate>Show</span></label>\r\n        </div>\r\n    </div>-->\r\n    <div class=\"form-group\">\r\n        <label class=\"col-sm-4 control-label\" translate>Supported staff</label>\r\n        <div class=\"col-sm-8\">\r\n            <label class=\"radio-inline\"><input type=\"radio\" value=\"1\" ng-model=\"options.supported_staff\"> <span translate>Yes</span></label>\r\n            <label class=\"radio-inline\"><input type=\"radio\" value=\"0\" ng-model=\"options.supported_staff\"> <span translate>No</span></label>\r\n        </div>\r\n    </div>\r\n    <div class=\"form-group\" ng-if=\"current.assignment.content_locales\">\r\n        <label class=\"col-sm-4 control-label\" translate>Content language</label>\r\n        <div class=\"col-sm-7\">\r\n            <select class=\"form-control\" ng-model=\"options.content_locales[current.assignment.ministry_id]\" ng-options=\"lang.iso_code as lang.english_name for lang in current.langList | filter:filterByLangCode\">\r\n            </select>\r\n            <small class=\"help-text text-info\"><span translate>Preferred content language for </span> {{current.assignment.name}}</small>\r\n        </div>\r\n    </div>\r\n    <div class=\"form-group\" ng-if=\"staticLocales\">\r\n        <label class=\"col-sm-4 control-label\" translate>Application language</label>\r\n        <div class=\"col-sm-7\">\r\n            <select class=\"form-control\" ng-model=\"options.static_locale\" ng-options=\"code as name+' - ('+code+')' for (code,name) in staticLocales\">\r\n            </select>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class=\"modal-footer\">\r\n    <button type=\"button\" class=\"btn btn-default\" ng-click=\"close()\"><i class=\"glyphicon glyphicon-remove\"></i> <span translate>Cancel</span></button>\r\n    <button type=\"button\" class=\"btn btn-primary\" ng-click=\"savePreference(options)\"><i class=\"glyphicon glyphicon-ok\"></i> <span translate>Save</span></button>\r\n</div>\r\n","<div id=\"reports-chart\" style=\"width:100%;height:400px;margin-bottom:50px;\"></div>\n<div id=\"reports-table\"></div>\n","<div class=\"modal-header\">\r\n    <button type=\"button\" class=\"close\" ng-click=\"close()\">\r\n        <span aria-hidden=\"true\">&times;</span><span class=\"sr-only\" translate>Close</span></button>\r\n    <h4 class=\"modal-title\" translate>Edit story</h4>\r\n</div>\r\n<div class=\"modal-body\">\r\n    <form class=\"form-horizontal\" name=\"form\" ng-submit=\"updateStory(story)\" novalidate>\r\n        <div class=\"form-group\">\r\n            <label class=\"col-md-3 control-label\" translate>Title</label>\r\n            <div class=\"col-md-8\">\r\n                <input type=\"text\" name=\"title\" ng-maxlength=\"120\" class=\"form-control\" placeholder=\"Title\" ng-model=\"story.title\" ng-required=\"true\">\r\n                <small class=\"help-text\" ng-show=\"form.title.$dirty && form.title.$invalid\">\r\n                    <span class=\"text-danger\"  ng-show=\"form.title.$error.required\" translate>Story title field is required</span>\r\n                    <span class=\"text-danger\"  ng-show=\"form.title.$error.maxlength\" translate>Story title should not exceed 120 characters</span>\r\n                </small>\r\n            </div>\r\n        </div>\r\n        <div class=\"form-group\">\r\n            <label class=\"col-md-3 control-label\" translate>Content</label>\r\n            <div class=\"col-md-8\">\r\n                <textarea rows=\"5\" name=\"content\" ng-maxlength=\"{{storiesConfig.content_length}}\" class=\"form-control\" ng-model=\"story.content\" ng-required=\"true\" style=\"resize: vertical;max-height: 300px;\"></textarea>\r\n                <small class=\"help-text\" ng-hide=\"form.content.$error.maxlength\">\r\n                    <span><span translate>You have</span> {{storiesConfig.content_length - story.content.length}} <span translate>of</span> {{storiesConfig.content_length}} <span translate>characters remaining</span></span><br>\r\n                </small>\r\n                <small class=\"help-text\" ng-show=\"form.content.$dirty && form.content.$invalid\">\r\n                    <span class=\"text-danger\"  ng-show=\"form.content.$error.required\" translate>Story content field is required</span>.<span class=\"text-danger\"  ng-show=\"form.content.$error.maxlength\"><span translate>Story content should not exceed</span> {{storiesConfig.content_length}} <span translate>characters</span></span>\r\n                </small>\r\n            </div>\r\n        </div>\r\n        <div class=\"form-group\">\r\n            <label class=\"col-md-3 control-label\" translate>Upload an image</label>\r\n            <div class=\"col-md-9\">\r\n                <div class=\"col-md-8\">\r\n                    <input\r\n                            type=\"file\"\r\n                            accept=\"image/*\"\r\n                            name=\"image\"\r\n                            id=\"image-file\"\r\n                            ng-model=\"image\"\r\n\r\n                            image-resizer\r\n                            image-model=\"imageFile\"\r\n                            resize-max-height=\"{{storiesConfig.image_height}}\"\r\n                            resize-max-width=\"{{storiesConfig.image_width}}\"\r\n                            resize-quality=\"1\"\r\n                            />\r\n                    <small class=\"help-block\">\r\n                        <span class=\"text-info\"><span translate>Image will be resized to</span> {{storiesConfig.image_height}}x{{storiesConfig.image_width}} px, <span translate>existing image will be replaced</span></span><br>\r\n                        <span class=\"text-danger\"  ng-show=\"form.image.$error.invalidImage\" translate>Invalid image file input.</span>\r\n                    </small>\r\n                </div>\r\n                <div class=\"media-right col-md-2\" ng-show=\"imageFile.url\">\r\n                    <img title=\"Preview\" class=\"thumbnail\" alt=\"image-preview\" height=\"100\" width=\"100\" ng-src=\"{{imageFile.url}}\">\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"form-group\">\r\n            <label class=\"col-md-3 control-label\" translate>Privacy</label>\r\n            <div class=\"col-md-9\">\r\n                <div class=\"col-xs-3\">\r\n                    <select class=\"form-control\" ng-model=\"story.privacy\" ng-required=\"true\">\r\n                        <option value=\"public\">Registered users</option>\r\n                        <option value=\"team_only\" translate>Team only</option>\r\n                    </select>\r\n                </div>\r\n                <div class=\"col-xs-6\">\r\n                    <label class=\"col-xs-6 control-label\" translate>Publish status</label>\r\n                    <div class=\"col-xs-6\">\r\n                        <select class=\"form-control\" ng-model=\"story.state\" ng-required=\"true\">\r\n                            <option value=\"published\" translate>Published</option>\r\n                            <option value=\"draft\" translate>Draft</option>\r\n                            <option value=\"removed\" translate>Removed</option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"form-group\">\r\n            <label class=\"col-md-3 control-label\" translate>Tagged ministry</label>\r\n            <div class=\"col-md-9\">\r\n                <div class=\"row\">\r\n                    <div class=\"col-xs-3\">\r\n                        <input type=\"hidden\" ng-model=\"story.ministry_id\">\r\n                        <p class=\"form-control-static text-center\">{{story.ministry_name}}</p>\r\n                    </div>\r\n                    <div class=\"col-xs-6\" ng-if=\"story.mcc\">\r\n                        <label class=\"col-md-6 control-label\" translate>Tagged MCC :</label>\r\n                        <div class=\"col-md-6\">\r\n                            <input type=\"hidden\" ng-model=\"story.mcc\">\r\n                            <p class=\"form-control-static text-center text-uppercase\">{{story.mcc}}</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>\r\n<div class=\"modal-footer\">\r\n    <button type=\"button\" class=\"btn btn-default\" ng-click=\"close()\"><i class=\"glyphicon glyphicon-remove\"></i> Close</button>\r\n    <button type=\"button\" ng-disabled=\"form.$invalid\" class=\"btn btn-primary\" ng-click=\"updateStory(story)\">\r\n        <i class=\"glyphicon\" ng-class=\"{'glyphicon-pencil': (story.state!=='removed'), 'glyphicon-trash' : (story.state==='removed')}\"></i> <span translate>Update</span> </button>\r\n</div>\r\n\r\n","<div class=\"modal-header\">\r\n    <button type=\"button\" class=\"close\" ng-click=\"close()\">\r\n        <span aria-hidden=\"true\">&times;</span><span class=\"sr-only\" translate>Close</span></button>\r\n    <h4 ng-hide=\"iconName\" class=\"modal-title\" translate>Add new story</h4>\r\n    <h4 ng-show=\"iconName\" class=\"modal-title\"><span translate>Add new story to</span> - {{iconName}}</h4>\r\n</div>\r\n<div class=\"modal-body\">\r\n<form class=\"form-horizontal\" name=\"form\" ng-submit=\"saveStory(story)\" novalidate>\r\n\r\n    <div class=\"form-group\">\r\n        <label class=\"col-md-3 control-label\" translate>Title</label>\r\n        <div class=\"col-md-8\">\r\n             <input type=\"text\" name=\"title\" ng-maxlength=\"120\" class=\"form-control\" placeholder=\"Title\" ng-model=\"story.title\" ng-required=\"true\">\r\n            <small class=\"help-text\" ng-show=\"form.title.$dirty && form.title.$invalid\">\r\n                <span class=\"text-danger\"  ng-show=\"form.title.$error.required\" translate>Story title field is required</span>\r\n                <span class=\"text-danger\"  ng-show=\"form.title.$error.maxlength\" translate>Story title should not exceed 120 characters</span>\r\n            </small>\r\n        </div>\r\n    </div>\r\n    <div class=\"form-group\">\r\n        <label class=\"col-md-3 control-label\" translate>Content</label>\r\n        <div class=\"col-md-8\">\r\n            <textarea rows=\"5\" name=\"content\" ng-maxlength=\"{{storiesConfig.content_length}}\"  class=\"form-control\" ng-model=\"story.content\" ng-required=\"true\" style=\"resize: vertical;max-height: 300px;\"></textarea>\r\n            <small class=\"help-text\" ng-hide=\"form.content.$error.maxlength\">\r\n                <span><span translate>You have</span> {{storiesConfig.content_length - story.content.length}} <span translate>of</span> {{storiesConfig.content_length}} <span translate>characters remaining</span></span><br>\r\n            </small>\r\n            <small class=\"help-text\" ng-show=\"form.content.$dirty && form.content.$invalid\">\r\n                <span class=\"text-danger\"  ng-show=\"form.content.$error.required\" translate>Story content field is required</span>\r\n                <span class=\"text-danger\"  ng-show=\"form.content.$error.maxlength\"><span translate>Story content should not exceed</span> {{storiesConfig.content_length}} <span translate>characters</span></span>\r\n            </small>\r\n        </div>\r\n    </div>\r\n    <div class=\"form-group\">\r\n        <label class=\"col-md-3 control-label\" translate>Upload an image</label>\r\n        <div class=\"col-md-9\">\r\n            <div class=\"col-md-8\">\r\n                <input\r\n                        type=\"file\"\r\n                        accept=\"image/*\"\r\n                        name=\"image\"\r\n                        id=\"image-file\"\r\n                        ng-model=\"image\"\r\n\r\n                        image-resizer\r\n                        image-model=\"imageFile\"\r\n                        resize-max-height=\"{{storiesConfig.image_height}}\"\r\n                        resize-max-width=\"{{storiesConfig.image_width}}\"\r\n                        resize-quality=\"1\"\r\n                        />\r\n            <small class=\"help-block\">\r\n                <span class=\"text-info\"><span translate>Image will be resized to</span> {{storiesConfig.image_height}}x{{storiesConfig.image_width}} px</span><br>\r\n                <span class=\"text-danger\"  ng-show=\"form.image.$error.invalidImage\" translate>Invalid image file input.</span>\r\n            </small>\r\n            </div>\r\n            <div ng-show=\"imageFile.url\" class=\"media-right col-md-2 image-holder\">\r\n                <img title=\"Preview\" class=\"thumbnail\" alt=\"image-preview\" height=\"100\" width=\"100\" ng-src=\"{{imageFile.url}}\">\r\n                <i ng-click=\"removeImage()\" class=\"glyphicon glyphicon-remove-sign\" title=\"{{'Remove image' | translate }}\"><span class=\"sr-only\" translate>Remove image</span></i>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"form-group\">\r\n        <label class=\"col-md-3 control-label\" translate>Privacy</label>\r\n        <div class=\"col-md-9\">\r\n            <div class=\"col-xs-3\">\r\n                <select class=\"form-control\" ng-model=\"story.privacy\" ng-init=\"story.privacy='team_only'\" ng-required=\"true\">\r\n                    <option value=\"public\" translate>Registered users</option>\r\n                    <option value=\"team_only\" translate>Team only</option>\r\n                </select>\r\n            </div>\r\n            <div class=\"col-xs-6\">\r\n                <label class=\"col-xs-6 control-label\" translate>Publish status</label>\r\n                <div class=\"col-xs-6\">\r\n                    <select class=\"form-control\" ng-model=\"story.state\" ng-init=\"story.state='published'\" ng-required=\"true\">\r\n                        <option value=\"published\" translate>Published</option>\r\n                        <option value=\"draft\" translate>Draft</option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"form-group\">\r\n        <label class=\"col-md-3 control-label\" translate>Tagged ministry</label>\r\n        <div class=\"col-md-9\">\r\n            <div class=\"row\">\r\n                <div class=\"col-xs-3\">\r\n                    <input type=\"hidden\" ng-model=\"story.ministry_id\" ng-init=\"story.ministry_id=current.assignment.ministry_id\">\r\n                    <p class=\"form-control-static text-center\">{{current.assignment.name}}</p>\r\n                </div>\r\n                <div class=\"col-xs-6\" ng-if=\"current.mcc\">\r\n                    <label class=\"col-md-6 control-label\" translate>Tagged MCC</label>\r\n                    <div class=\"col-md-6\">\r\n                        <input type=\"hidden\" ng-model=\"story.mcc\" ng-init=\"story.mcc=current.mcc\">\r\n                        <p class=\"form-control-static text-center text-uppercase\">{{current.mcc}}</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</form>\r\n</div>\r\n<div class=\"modal-footer\">\r\n    <button type=\"button\" class=\"btn btn-default\" ng-click=\"close()\"><i class=\"glyphicon glyphicon-remove\"></i> <span translate>Close</span></button>\r\n    <button ng-disabled=\"form.title.$invalid || form.content.$invalid\" type=\"button\" class=\"btn btn-primary\" ng-click=\"saveStory(story)\"><i class=\"glyphicon glyphicon-ok\"></i> <span translate>Save</span></button>\r\n</div>\r\n\r\n","<div ng-show=\"current.isLoaded\">\r\n    <aside class=\"pull-left col-md-6 col-lg-8 stories-section\">\r\n        <section class=\"row panel panel-default panel-custom\">\r\n            <div class=\"panel-body\">\r\n            <div class=\"pull-left\">\r\n\r\n                <label title=\"Toggle\" class=\"checkbox-inline\"><input type=\"checkbox\" ng-change=\"searchStories(1,storiesParams)\" ng-model=\"storiesParams.self_only\" > <span translate>Created by me</span></label>\r\n\r\n            </div>\r\n            <div class=\"pull-right\">\r\n                <button class=\"btn btn-default btn-sm\" ng-click=\"searchStories(1,storiesParams)\" type=\"button\" title=\"Refresh List\"><i class=\"glyphicon glyphicon-refresh\"></i><span class=\"sr-only\" translate>Refresh List</span></button>\r\n                <button class=\"btn btn-primary btn-sm\" ng-click=\"newStory()\"><i class=\"glyphicon glyphicon-plus\"></i> <span translate>Add story</span></button>\r\n            </div>\r\n            <div class=\"clearfix\"></div>\r\n           </div>\r\n        </section>\r\n        <section ng-hide=\"storiesLoaded==false\">\r\n            <div class=\"stories-holder\">\r\n                    <div class=\"media media-custom\" ng-repeat=\"story in visibleStories | orderBy : '-created_at'\">\r\n                    <div class=\"media-left media-middle\">\r\n                        <a ng-click=\"viewStory(story)\" title=\"View\" href=\"javascript:void(0)\" class=\"thumbnail thumb-128\">\r\n                            <img class=\"media-object\" ng-src=\"{{(story.image_url===undefined || story.image_url=='') ? versionUrl('img/story-128.png') : story.image_url+'?v='+story.updated_at}}\" alt=\"image\" height=\"128\" width=\"128\">\r\n                        </a>\r\n                    </div>\r\n                    <div class=\"media-body\">\r\n                        <h4 class=\"media-heading\"><a ng-click=\"viewStory(story)\" href=\"javascript:void(0)\">{{story.title}}</a></h4>\r\n                        <p class=\"story-content\">{{story.content}}</p>\r\n                        <ul class=\"list-inline\">\r\n                            <li ng-show=\"storiesParams.self_only===true\"><span class=\"text-capitalize label\" ng-class=\"{'label-success': (story.state==='published'), 'label-default' : (story.state=='draft'), 'label-danger' : (story.state=='removed')}\">{{story.state}}</span></li>\r\n                            <li ng-hide=\"storiesParams.self_only===true\"><i class=\"glyphicon glyphicon-user\"></i> {{story.created_name}}</li>\r\n                            <li><i class=\"glyphicon glyphicon-time\"></i> <time> {{story.created_at | date: 'MMM-dd-yyyy'}}</time></li>\r\n                            <li><i class=\"glyphicon glyphicon-tag\"></i> <span>{{story.ministry_name}}</span><span ng-if=\"story.mcc\">,</span> <span class=\"text-uppercase\">{{story.mcc}}</span></li>\r\n                            <li ng-show=\"story.church_name\"><i class=\"glyphicon glyphicon-map-marker\"></i> {{story.church_name}}</li>\r\n                            <li ng-show=\"story.training_name\"><i class=\"glyphicon glyphicon-education\"></i> {{story.training_name}}</li>\r\n                            <li ng-if=\"isStoryEditable(story)\"><a title=\"Edit story\" ng-click=\"editStory(story)\" href=\"javascript:void(0)\"><i class=\"glyphicon glyphicon-pencil\"> </i> <span translate>Edit</span></a></li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n                <div class=\"text-center\"  ng-if=\"storiesLoaded==true && visibleStories.length==0\">\r\n                    <h4><i class=\"glyphicon glyphicon-info-sign\"></i> <span translate>No story found</span></h4>\r\n                </div>\r\n            </div>\r\n            <!--.list media-->\r\n            <nav class=\"stories-nav\" ng-hide=\"visibleStories.length==0\">\r\n                <pager ng-change=\"searchStories(storiesNav.currentPage,storiesParams)\" total-items=\"storiesNav.totalItems\" ng-model=\"storiesNav.currentPage\" items-per-page=\"storiesNav.perPage\" next-text=\"{{'Older'|translate}} »\" previous-text=\"« {{'Newer'|translate}}\"></pager>\r\n            </nav>\r\n        </section>\r\n        <div ng-include=\"'partials/spinner.html'\" ng-hide=\"storiesLoaded==true\"></div>\r\n    </aside><!-- .stories-section-->\r\n    <aside class=\"pull-right col-md-6 col-lg-4 news-feed-section\">\r\n        <div class=\"news-feeds-holder\" ng-hide=\"feedsLoaded==false || (recentNewsFeeds.length===0)\">\r\n            <span class=\"refresh-feeds\" ng-click=\"loadNewsFeeds(1)\" title=\"Refresh\"><i class=\"glyphicon glyphicon-refresh\"></i><span class=\"sr-only\" translate>Refresh Feeds</span></span>\r\n            <ul class=\"list-group news-feed-ul\">\r\n            <li class=\"list-group-item\" ng-repeat=\"feed in recentNewsFeeds | orderBy : '-timestamp'\">\r\n                <h5 class=\"list-group-item-heading\"><i class=\"glyphicon glyphicon-time\"></i> <b><time> {{feed.timestamp | date: 'MMM-dd-yyyy'}} </time> | {{feed.ministry_name}}</b></h5>\r\n                <p class=\"list-group-item-text\">{{feed.message}}</p>\r\n            </li>\r\n            </ul>\r\n        </div>\r\n        <nav class=\"feeds-nav\" ng-hide=\"recentNewsFeeds.length==0 || feedsLoaded==false\">\r\n            <pager ng-change=\"loadNewsFeeds(feedsNav.currentPage)\" total-items=\"feedsNav.totalItems\" ng-model=\"feedsNav.currentPage\" items-per-page=\"feedsNav.perPage\" next-text=\"{{'Older'|translate}} »\" previous-text=\"« {{'Newer'|translate}}\"></pager>\r\n        </nav>\r\n        <div class=\"text-center\" ng-if=\"feedsLoaded==true && recentNewsFeeds.length==0\">\r\n            <h4><i class=\"glyphicon glyphicon-info-sign\"></i> No activity yet</h4>\r\n        </div>\r\n        <div ng-include=\"'partials/spinner.html'\" ng-hide=\"feedsLoaded==true\"></div>\r\n    </aside>\r\n    <div class=\"clearfix\"></div>\r\n</div>\r\n","<div class=\"modal-header\">\r\n    <button type=\"button\" class=\"close\" ng-click=\"close()\">\r\n        <span aria-hidden=\"true\">&times;</span><span class=\"sr-only\" translate>Close</span></button>\r\n    <h4 class=\"modal-title\" translate>View story</h4>\r\n</div>\r\n<div class=\"modal-body\">\r\n<div class=\"media\">\r\n    <div class=\"media-body\">\r\n        <h4 class=\"media-heading\">{{story.title}}</h4>\r\n        <ul class=\"list-inline\">\r\n            <li ng-if=\"isSelfOnlyEnabled==true\"><span class=\"text-capitalize label\" ng-class=\"{'label-success': (story.state==='published'), 'label-default' : (story.state=='draft'), 'label-danger' : (story.state=='removed')}\">{{story.state}}</span></li>\r\n            <li><i class=\"glyphicon\" ng-class=\"{'glyphicon-eye-open':(story.privacy==='public'),'glyphicon-eye-close' : (story.privacy==='team_only')}\"></i> <span class=\"text-capitalize\">{{story.privacy}}</span></li>\r\n            <li><i class=\"glyphicon glyphicon-time\"></i> <time> {{story.created_at | date: 'MMM-dd-yyyy'}}</time></li>\r\n            <li ng-if=\"isSelfOnlyEnabled==false\"><i class=\"glyphicon glyphicon-user\"></i> {{story.created_name}}</li>\r\n            <li><i class=\"glyphicon glyphicon-tag\"></i> <span>{{story.ministry_name}}</span><span ng-if=\"story.mcc\">,</span> <span class=\"text-uppercase\">{{story.mcc}}</span></li>\r\n            <li ng-show=\"story.church_name\"><i class=\"glyphicon glyphicon-map-marker\"></i> {{story.church_name}}</li>\r\n            <li ng-show=\"story.training_name\"><i class=\"glyphicon glyphicon-education\"></i> {{story.training_name}}</li>\r\n        </ul>\r\n        <div class=\"pull-left\" style=\"margin: 0.5em 1em 1em 0\" ng-if=\"(story.image_url!==undefined  && story.image_url!=='')\">\r\n            <img class=\"media-object img-thumbnail\" ng-src=\"{{story.image_url+'?v='+story.updated_at}}\" alt=\"image\" height=\"128\" width=\"128\">\r\n        </div>\r\n        <p> {{story.content}} </p>\r\n    </div>\r\n</div>\r\n</div>\r\n<div class=\"modal-footer\">\r\n    <button type=\"button\" class=\"btn btn-default\" ng-click=\"close()\"><i class=\"glyphicon glyphicon-remove\"></i> <span translate>Close</span></button>\r\n</div>\r\n\r\n"],"sourceRoot":"/source/"}