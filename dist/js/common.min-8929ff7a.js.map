{"version":3,"sources":["markerwithlabel.js","iframeResizer.contentWindow.js"],"names":["inherits","childCtor","parentCtor","tempCtor","prototype","superClass_","constructor","MarkerLabel_","marker","crossURL","this","marker_","handCursorURL_","handCursorURL","labelDiv_","document","createElement","style","cssText","eventDiv_","setAttribute","crossDiv_","getSharedCross","MarkerWithLabel","opt_options","labelContent","labelAnchor","google","maps","Point","labelClass","labelStyle","labelInBackground","labelVisible","raiseOnDrag","clickable","draggable","optimized","crossImage","location","protocol","handCursor","label","Marker","apply","arguments","OverlayView","div","crossDiv","marginLeft","marginTop","src","onAdd","cSavedZIndex","cLatOffset","cLngOffset","cIgnoreClick","cRaiseEnabled","cStartPosition","cStartCenter","me","cMouseIsDown","cDraggingLabel","cRaiseOffset","cDraggingCursor","cAbortEvent","e","preventDefault","cancelBubble","stopPropagation","cStopBounce","setAnimation","getPanes","overlayImage","appendChild","overlayMouseTarget","processed","listeners_","event","addDomListener","getDraggable","getClickable","cursor","trigger","getCursor","mEvent","position","getProjection","fromLatLngToDivPixel","getPosition","y","setPosition","fromDivPixelToLatLng","Animation","BOUNCE","setTimeout","display","setZIndex","latLng","addListener","getMap","LatLng","lat","lng","left","x","top","getZIndex","getCenter","get","keyCode","setCenter","zIndex","setVisible","setTitle","setContent","setAnchor","setStyles","onRemove","i","parentNode","removeChild","length","removeListener","draw","content","nodeType","innerHTML","cloneNode","title","getTitle","className","hasOwnProperty","setMandatoryStyles","overflow","opacity","MsFilter","filter","anchor","yOffset","Math","round","zAdjust","parseInt","getVisible","setMap","theMap","addEventListener","el","evt","func","window","attachEvent","formatLogMsg","msg","msgID","myID","log","logging","console","warn","init","readData","setMargin","setBodyStyle","bodyBackground","bodyPadding","injectClearFixIntoBodyElement","checkHeightMode","stopInfiniteResizingOfIFrame","setupPublicMethods","startEventListeners","inPageLinks","setupInPageLinks","sendSize","strBool","str","data","initMsg","substr","msgIdLen","split","bodyMargin","undefined","Number","calculateWidth","interval","publicMethods","autoResize","bodyMarginStr","heightCalcMode","tolerance","enable","chkCSS","attr","value","indexOf","body","documentElement","height","addTriggerEvent","options","eventName","eventType","eventNames","Array","map","initEventListeners","heightCalcModeDefault","getHeight","setupMutationObserver","clearFix","clear","getPagePosition","pageXOffset","scrollLeft","pageYOffset","scrollTop","getElementPosition","elPosition","getBoundingClientRect","pagePosition","findTarget","jumpToTarget","target","jumpPosition","hash","sendMsg","hashData","decodeURIComponent","getElementById","getElementsByName","checkLocationHash","href","bindAnchors","setupLink","linkClicked","getAttribute","forEach","call","querySelectorAll","bindLocationHash","initCheck","eventCancelTimer","enableInPageLinks","parentIFrame","close","getId","moveToAnchor","reset","resetIFrame","scrollTo","scrollToOffset","sendMessage","targetOrigin","JSON","stringify","setHeightCalculationMethod","heightCalculationMethod","setTargetOrigin","targetOriginDefault","size","customHeight","customWidth","valString","lockTrigger","initInterval","setInterval","abs","setupInjectElementLoadListners","mutations","addLoadListener","element","width","mutation","type","attributeName","images","image","createMutationObserver","querySelector","config","attributes","attributeOldValue","characterData","characterDataOldValue","childList","subtree","observer","MutationObserver","observe","WebKitMutationObserver","getBodyOffsetHeight","getComputedBodyStyle","prop","convertUnitsToPxForIE8","PIXEL","test","base","runtimeStyle","currentStyle","pixelLeft","retVal","defaultView","getComputedStyle","offsetHeight","getBodyScrollHeight","scrollHeight","getDEOffsetHeight","getDEScrollHeight","getLowestElementHeight","allElements","allElementsLength","maxBottomVal","timer","Date","getTime","bottom","getAllHeights","getMaxHeight","max","getMinHeight","min","getBestHeight","getWidth","scrollWidth","triggerEvent","triggerEventDesc","recordTrigger","resetPage","resizeIFrame","currentHeight","currentWidth","isDoubleFiredEvent","triggerLocked","doubleEventList","isSizeChangeDetected","checkTolarance","a","b","isForceResizableEvent","isForceResizableHeightCalcMode","resetRequiredMethods","logIgnored","checkDownSizing","clearTimeout","triggerLockedTimer","triggerReset","hcm","sendToParent","message","postMessage","receiver","isMessageForUs","initFromParent","source","firstRun","initLock","resetFromParent","getMessageType","isMiddleTier","isInitMsg","true","false","resize","click","scroll","bodyScroll","documentElementScroll","parent","offset","bodyOffset","documentElementOffset","grow","lowestElement"],"mappings":"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","file":"common.min-8929ff7a.js","sourcesContent":["/**\n * @name MarkerWithLabel for V3\n * @version 1.1.9 [June 30, 2013]\n * @author Gary Little (inspired by code from Marc Ridey of Google).\n * @copyright Copyright 2012 Gary Little [gary at luxcentral.com]\n * @fileoverview MarkerWithLabel extends the Google Maps JavaScript API V3\n *  <code>google.maps.Marker</code> class.\n *  <p>\n *  MarkerWithLabel allows you to define markers with associated labels. As you would expect,\n *  if the marker is draggable, so too will be the label. In addition, a marker with a label\n *  responds to all mouse events in the same manner as a regular marker. It also fires mouse\n *  events and \"property changed\" events just as a regular marker would. Version 1.1 adds\n *  support for the raiseOnDrag feature introduced in API V3.3.\n *  <p>\n *  If you drag a marker by its label, you can cancel the drag and return the marker to its\n *  original position by pressing the <code>Esc</code> key. This doesn't work if you drag the marker\n *  itself because this feature is not (yet) supported in the <code>google.maps.Marker</code> class.\n */\n\n/*!\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *       http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/*jslint browser:true */\n/*global document,google */\n\n/**\n * @param {Function} childCtor Child class.\n * @param {Function} parentCtor Parent class.\n */\nfunction inherits(childCtor, parentCtor) {\n  /** @constructor */\n  function tempCtor() {};\n  tempCtor.prototype = parentCtor.prototype;\n  childCtor.superClass_ = parentCtor.prototype;\n  childCtor.prototype = new tempCtor();\n  /** @override */\n  childCtor.prototype.constructor = childCtor;\n}\n\n/**\n * This constructor creates a label and associates it with a marker.\n * It is for the private use of the MarkerWithLabel class.\n * @constructor\n * @param {Marker} marker The marker with which the label is to be associated.\n * @param {string} crossURL The URL of the cross image =.\n * @param {string} handCursor The URL of the hand cursor.\n * @private\n */\nfunction MarkerLabel_(marker, crossURL, handCursorURL) {\n  this.marker_ = marker;\n  this.handCursorURL_ = marker.handCursorURL;\n\n  this.labelDiv_ = document.createElement(\"div\");\n  this.labelDiv_.style.cssText = \"position: absolute; overflow: hidden;\";\n\n  // Set up the DIV for handling mouse events in the label. This DIV forms a transparent veil\n  // in the \"overlayMouseTarget\" pane, a veil that covers just the label. This is done so that\n  // events can be captured even if the label is in the shadow of a google.maps.InfoWindow.\n  // Code is included here to ensure the veil is always exactly the same size as the label.\n  this.eventDiv_ = document.createElement(\"div\");\n  this.eventDiv_.style.cssText = this.labelDiv_.style.cssText;\n\n  // This is needed for proper behavior on MSIE:\n  this.eventDiv_.setAttribute(\"onselectstart\", \"return false;\");\n  this.eventDiv_.setAttribute(\"ondragstart\", \"return false;\");\n\n  // Get the DIV for the \"X\" to be displayed when the marker is raised.\n  this.crossDiv_ = MarkerLabel_.getSharedCross(crossURL);\n}\ninherits(MarkerLabel_, google.maps.OverlayView);\n\n/**\n * Returns the DIV for the cross used when dragging a marker when the\n * raiseOnDrag parameter set to true. One cross is shared with all markers.\n * @param {string} crossURL The URL of the cross image =.\n * @private\n */\nMarkerLabel_.getSharedCross = function (crossURL) {\n  var div;\n  if (typeof MarkerLabel_.getSharedCross.crossDiv === \"undefined\") {\n    div = document.createElement(\"img\");\n    div.style.cssText = \"position: absolute; z-index: 1000002; display: none;\";\n    // Hopefully Google never changes the standard \"X\" attributes:\n    div.style.marginLeft = \"-8px\";\n    div.style.marginTop = \"-9px\";\n    div.src = crossURL;\n    MarkerLabel_.getSharedCross.crossDiv = div;\n  }\n  return MarkerLabel_.getSharedCross.crossDiv;\n};\n\n/**\n * Adds the DIV representing the label to the DOM. This method is called\n * automatically when the marker's <code>setMap</code> method is called.\n * @private\n */\nMarkerLabel_.prototype.onAdd = function () {\n  var me = this;\n  var cMouseIsDown = false;\n  var cDraggingLabel = false;\n  var cSavedZIndex;\n  var cLatOffset, cLngOffset;\n  var cIgnoreClick;\n  var cRaiseEnabled;\n  var cStartPosition;\n  var cStartCenter;\n  // Constants:\n  var cRaiseOffset = 20;\n  var cDraggingCursor = \"url(\" + this.handCursorURL_ + \")\";\n\n  // Stops all processing of an event.\n  //\n  var cAbortEvent = function (e) {\n    if (e.preventDefault) {\n      e.preventDefault();\n    }\n    e.cancelBubble = true;\n    if (e.stopPropagation) {\n      e.stopPropagation();\n    }\n  };\n\n  var cStopBounce = function () {\n    me.marker_.setAnimation(null);\n  };\n\n  this.getPanes().overlayImage.appendChild(this.labelDiv_);\n  this.getPanes().overlayMouseTarget.appendChild(this.eventDiv_);\n  // One cross is shared with all markers, so only add it once:\n  if (typeof MarkerLabel_.getSharedCross.processed === \"undefined\") {\n    this.getPanes().overlayImage.appendChild(this.crossDiv_);\n    MarkerLabel_.getSharedCross.processed = true;\n  }\n\n  this.listeners_ = [\n    google.maps.event.addDomListener(this.eventDiv_, \"mouseover\", function (e) {\n      if (me.marker_.getDraggable() || me.marker_.getClickable()) {\n        this.style.cursor = \"pointer\";\n        google.maps.event.trigger(me.marker_, \"mouseover\", e);\n      }\n    }),\n    google.maps.event.addDomListener(this.eventDiv_, \"mouseout\", function (e) {\n      if ((me.marker_.getDraggable() || me.marker_.getClickable()) && !cDraggingLabel) {\n        this.style.cursor = me.marker_.getCursor();\n        google.maps.event.trigger(me.marker_, \"mouseout\", e);\n      }\n    }),\n    google.maps.event.addDomListener(this.eventDiv_, \"mousedown\", function (e) {\n      cDraggingLabel = false;\n      if (me.marker_.getDraggable()) {\n        cMouseIsDown = true;\n        this.style.cursor = cDraggingCursor;\n      }\n      if (me.marker_.getDraggable() || me.marker_.getClickable()) {\n        google.maps.event.trigger(me.marker_, \"mousedown\", e);\n        cAbortEvent(e); // Prevent map pan when starting a drag on a label\n      }\n    }),\n    google.maps.event.addDomListener(document, \"mouseup\", function (mEvent) {\n      var position;\n      if (cMouseIsDown) {\n        cMouseIsDown = false;\n        me.eventDiv_.style.cursor = \"pointer\";\n        google.maps.event.trigger(me.marker_, \"mouseup\", mEvent);\n      }\n      if (cDraggingLabel) {\n        if (cRaiseEnabled) { // Lower the marker & label\n          position = me.getProjection().fromLatLngToDivPixel(me.marker_.getPosition());\n          position.y += cRaiseOffset;\n          me.marker_.setPosition(me.getProjection().fromDivPixelToLatLng(position));\n          // This is not the same bouncing style as when the marker portion is dragged,\n          // but it will have to do:\n          try { // Will fail if running Google Maps API earlier than V3.3\n            me.marker_.setAnimation(google.maps.Animation.BOUNCE);\n            setTimeout(cStopBounce, 1406);\n          } catch (e) {}\n        }\n        me.crossDiv_.style.display = \"none\";\n        me.marker_.setZIndex(cSavedZIndex);\n        cIgnoreClick = true; // Set flag to ignore the click event reported after a label drag\n        cDraggingLabel = false;\n        mEvent.latLng = me.marker_.getPosition();\n        google.maps.event.trigger(me.marker_, \"dragend\", mEvent);\n      }\n    }),\n    google.maps.event.addListener(me.marker_.getMap(), \"mousemove\", function (mEvent) {\n      var position;\n      if (cMouseIsDown) {\n        if (cDraggingLabel) {\n          // Change the reported location from the mouse position to the marker position:\n          mEvent.latLng = new google.maps.LatLng(mEvent.latLng.lat() - cLatOffset, mEvent.latLng.lng() - cLngOffset);\n          position = me.getProjection().fromLatLngToDivPixel(mEvent.latLng);\n          if (cRaiseEnabled) {\n            me.crossDiv_.style.left = position.x + \"px\";\n            me.crossDiv_.style.top = position.y + \"px\";\n            me.crossDiv_.style.display = \"\";\n            position.y -= cRaiseOffset;\n          }\n          me.marker_.setPosition(me.getProjection().fromDivPixelToLatLng(position));\n          if (cRaiseEnabled) { // Don't raise the veil; this hack needed to make MSIE act properly\n            me.eventDiv_.style.top = (position.y + cRaiseOffset) + \"px\";\n          }\n          google.maps.event.trigger(me.marker_, \"drag\", mEvent);\n        } else {\n          // Calculate offsets from the click point to the marker position:\n          cLatOffset = mEvent.latLng.lat() - me.marker_.getPosition().lat();\n          cLngOffset = mEvent.latLng.lng() - me.marker_.getPosition().lng();\n          cSavedZIndex = me.marker_.getZIndex();\n          cStartPosition = me.marker_.getPosition();\n          cStartCenter = me.marker_.getMap().getCenter();\n          cRaiseEnabled = me.marker_.get(\"raiseOnDrag\");\n          cDraggingLabel = true;\n          me.marker_.setZIndex(1000000); // Moves the marker & label to the foreground during a drag\n          mEvent.latLng = me.marker_.getPosition();\n          google.maps.event.trigger(me.marker_, \"dragstart\", mEvent);\n        }\n      }\n    }),\n    google.maps.event.addDomListener(document, \"keydown\", function (e) {\n      if (cDraggingLabel) {\n        if (e.keyCode === 27) { // Esc key\n          cRaiseEnabled = false;\n          me.marker_.setPosition(cStartPosition);\n          me.marker_.getMap().setCenter(cStartCenter);\n          google.maps.event.trigger(document, \"mouseup\", e);\n        }\n      }\n    }),\n    google.maps.event.addDomListener(this.eventDiv_, \"click\", function (e) {\n      if (me.marker_.getDraggable() || me.marker_.getClickable()) {\n        if (cIgnoreClick) { // Ignore the click reported when a label drag ends\n          cIgnoreClick = false;\n        } else {\n          google.maps.event.trigger(me.marker_, \"click\", e);\n          cAbortEvent(e); // Prevent click from being passed on to map\n        }\n      }\n    }),\n    google.maps.event.addDomListener(this.eventDiv_, \"dblclick\", function (e) {\n      if (me.marker_.getDraggable() || me.marker_.getClickable()) {\n        google.maps.event.trigger(me.marker_, \"dblclick\", e);\n        cAbortEvent(e); // Prevent map zoom when double-clicking on a label\n      }\n    }),\n    google.maps.event.addListener(this.marker_, \"dragstart\", function (mEvent) {\n      if (!cDraggingLabel) {\n        cRaiseEnabled = this.get(\"raiseOnDrag\");\n      }\n    }),\n    google.maps.event.addListener(this.marker_, \"drag\", function (mEvent) {\n      if (!cDraggingLabel) {\n        if (cRaiseEnabled) {\n          me.setPosition(cRaiseOffset);\n          // During a drag, the marker's z-index is temporarily set to 1000000 to\n          // ensure it appears above all other markers. Also set the label's z-index\n          // to 1000000 (plus or minus 1 depending on whether the label is supposed\n          // to be above or below the marker).\n          me.labelDiv_.style.zIndex = 1000000 + (this.get(\"labelInBackground\") ? -1 : +1);\n        }\n      }\n    }),\n    google.maps.event.addListener(this.marker_, \"dragend\", function (mEvent) {\n      if (!cDraggingLabel) {\n        if (cRaiseEnabled) {\n          me.setPosition(0); // Also restores z-index of label\n        }\n      }\n    }),\n    google.maps.event.addListener(this.marker_, \"position_changed\", function () {\n      me.setPosition();\n    }),\n    google.maps.event.addListener(this.marker_, \"zindex_changed\", function () {\n      me.setZIndex();\n    }),\n    google.maps.event.addListener(this.marker_, \"visible_changed\", function () {\n      me.setVisible();\n    }),\n    google.maps.event.addListener(this.marker_, \"labelvisible_changed\", function () {\n      me.setVisible();\n    }),\n    google.maps.event.addListener(this.marker_, \"title_changed\", function () {\n      me.setTitle();\n    }),\n    google.maps.event.addListener(this.marker_, \"labelcontent_changed\", function () {\n      me.setContent();\n    }),\n    google.maps.event.addListener(this.marker_, \"labelanchor_changed\", function () {\n      me.setAnchor();\n    }),\n    google.maps.event.addListener(this.marker_, \"labelclass_changed\", function () {\n      me.setStyles();\n    }),\n    google.maps.event.addListener(this.marker_, \"labelstyle_changed\", function () {\n      me.setStyles();\n    })\n  ];\n};\n\n/**\n * Removes the DIV for the label from the DOM. It also removes all event handlers.\n * This method is called automatically when the marker's <code>setMap(null)</code>\n * method is called.\n * @private\n */\nMarkerLabel_.prototype.onRemove = function () {\n  var i;\n  this.labelDiv_.parentNode.removeChild(this.labelDiv_);\n  this.eventDiv_.parentNode.removeChild(this.eventDiv_);\n\n  // Remove event listeners:\n  for (i = 0; i < this.listeners_.length; i++) {\n    google.maps.event.removeListener(this.listeners_[i]);\n  }\n};\n\n/**\n * Draws the label on the map.\n * @private\n */\nMarkerLabel_.prototype.draw = function () {\n  this.setContent();\n  this.setTitle();\n  this.setStyles();\n};\n\n/**\n * Sets the content of the label.\n * The content can be plain text or an HTML DOM node.\n * @private\n */\nMarkerLabel_.prototype.setContent = function () {\n  var content = this.marker_.get(\"labelContent\");\n  if (typeof content.nodeType === \"undefined\") {\n    this.labelDiv_.innerHTML = content;\n    this.eventDiv_.innerHTML = this.labelDiv_.innerHTML;\n  } else {\n    this.labelDiv_.innerHTML = \"\"; // Remove current content\n    this.labelDiv_.appendChild(content);\n    content = content.cloneNode(true);\n    this.eventDiv_.appendChild(content);\n  }\n};\n\n/**\n * Sets the content of the tool tip for the label. It is\n * always set to be the same as for the marker itself.\n * @private\n */\nMarkerLabel_.prototype.setTitle = function () {\n  this.eventDiv_.title = this.marker_.getTitle() || \"\";\n};\n\n/**\n * Sets the style of the label by setting the style sheet and applying\n * other specific styles requested.\n * @private\n */\nMarkerLabel_.prototype.setStyles = function () {\n  var i, labelStyle;\n\n  // Apply style values from the style sheet defined in the labelClass parameter:\n  this.labelDiv_.className = this.marker_.get(\"labelClass\");\n  this.eventDiv_.className = this.labelDiv_.className;\n\n  // Clear existing inline style values:\n  this.labelDiv_.style.cssText = \"\";\n  this.eventDiv_.style.cssText = \"\";\n  // Apply style values defined in the labelStyle parameter:\n  labelStyle = this.marker_.get(\"labelStyle\");\n  for (i in labelStyle) {\n    if (labelStyle.hasOwnProperty(i)) {\n      this.labelDiv_.style[i] = labelStyle[i];\n      this.eventDiv_.style[i] = labelStyle[i];\n    }\n  }\n  this.setMandatoryStyles();\n};\n\n/**\n * Sets the mandatory styles to the DIV representing the label as well as to the\n * associated event DIV. This includes setting the DIV position, z-index, and visibility.\n * @private\n */\nMarkerLabel_.prototype.setMandatoryStyles = function () {\n  this.labelDiv_.style.position = \"absolute\";\n  this.labelDiv_.style.overflow = \"hidden\";\n  // Make sure the opacity setting causes the desired effect on MSIE:\n  if (typeof this.labelDiv_.style.opacity !== \"undefined\" && this.labelDiv_.style.opacity !== \"\") {\n    this.labelDiv_.style.MsFilter = \"\\\"progid:DXImageTransform.Microsoft.Alpha(opacity=\" + (this.labelDiv_.style.opacity * 100) + \")\\\"\";\n    this.labelDiv_.style.filter = \"alpha(opacity=\" + (this.labelDiv_.style.opacity * 100) + \")\";\n  }\n\n  this.eventDiv_.style.position = this.labelDiv_.style.position;\n  this.eventDiv_.style.overflow = this.labelDiv_.style.overflow;\n  this.eventDiv_.style.opacity = 0.01; // Don't use 0; DIV won't be clickable on MSIE\n  this.eventDiv_.style.MsFilter = \"\\\"progid:DXImageTransform.Microsoft.Alpha(opacity=1)\\\"\";\n  this.eventDiv_.style.filter = \"alpha(opacity=1)\"; // For MSIE\n\n  this.setAnchor();\n  this.setPosition(); // This also updates z-index, if necessary.\n};\n\n/**\n * Sets the anchor point of the label.\n * @private\n */\nMarkerLabel_.prototype.setAnchor = function () {\n  var anchor = this.marker_.get(\"labelAnchor\");\n  this.labelDiv_.style.marginLeft = -anchor.x + \"px\";\n  this.labelDiv_.style.marginTop = -anchor.y + \"px\";\n  this.eventDiv_.style.marginLeft = -anchor.x + \"px\";\n  this.eventDiv_.style.marginTop = -anchor.y + \"px\";\n};\n\n/**\n * Sets the position of the label. The z-index is also updated, if necessary.\n * @private\n */\nMarkerLabel_.prototype.setPosition = function (yOffset) {\n  var position = this.getProjection().fromLatLngToDivPixel(this.marker_.getPosition());\n  if (typeof yOffset === \"undefined\") {\n    yOffset = 0;\n  }\n  this.labelDiv_.style.left = Math.round(position.x) + \"px\";\n  this.labelDiv_.style.top = Math.round(position.y - yOffset) + \"px\";\n  this.eventDiv_.style.left = this.labelDiv_.style.left;\n  this.eventDiv_.style.top = this.labelDiv_.style.top;\n\n  this.setZIndex();\n};\n\n/**\n * Sets the z-index of the label. If the marker's z-index property has not been defined, the z-index\n * of the label is set to the vertical coordinate of the label. This is in keeping with the default\n * stacking order for Google Maps: markers to the south are in front of markers to the north.\n * @private\n */\nMarkerLabel_.prototype.setZIndex = function () {\n  var zAdjust = (this.marker_.get(\"labelInBackground\") ? -1 : +1);\n  if (typeof this.marker_.getZIndex() === \"undefined\") {\n    this.labelDiv_.style.zIndex = parseInt(this.labelDiv_.style.top, 10) + zAdjust;\n    this.eventDiv_.style.zIndex = this.labelDiv_.style.zIndex;\n  } else {\n    this.labelDiv_.style.zIndex = this.marker_.getZIndex() + zAdjust;\n    this.eventDiv_.style.zIndex = this.labelDiv_.style.zIndex;\n  }\n};\n\n/**\n * Sets the visibility of the label. The label is visible only if the marker itself is\n * visible (i.e., its visible property is true) and the labelVisible property is true.\n * @private\n */\nMarkerLabel_.prototype.setVisible = function () {\n  if (this.marker_.get(\"labelVisible\")) {\n    this.labelDiv_.style.display = this.marker_.getVisible() ? \"block\" : \"none\";\n  } else {\n    this.labelDiv_.style.display = \"none\";\n  }\n  this.eventDiv_.style.display = this.labelDiv_.style.display;\n};\n\n/**\n * @name MarkerWithLabelOptions\n * @class This class represents the optional parameter passed to the {@link MarkerWithLabel} constructor.\n *  The properties available are the same as for <code>google.maps.Marker</code> with the addition\n *  of the properties listed below. To change any of these additional properties after the labeled\n *  marker has been created, call <code>google.maps.Marker.set(propertyName, propertyValue)</code>.\n *  <p>\n *  When any of these properties changes, a property changed event is fired. The names of these\n *  events are derived from the name of the property and are of the form <code>propertyname_changed</code>.\n *  For example, if the content of the label changes, a <code>labelcontent_changed</code> event\n *  is fired.\n *  <p>\n * @property {string|Node} [labelContent] The content of the label (plain text or an HTML DOM node).\n * @property {Point} [labelAnchor] By default, a label is drawn with its anchor point at (0,0) so\n *  that its top left corner is positioned at the anchor point of the associated marker. Use this\n *  property to change the anchor point of the label. For example, to center a 50px-wide label\n *  beneath a marker, specify a <code>labelAnchor</code> of <code>google.maps.Point(25, 0)</code>.\n *  (Note: x-values increase to the right and y-values increase to the top.)\n * @property {string} [labelClass] The name of the CSS class defining the styles for the label.\n *  Note that style values for <code>position</code>, <code>overflow</code>, <code>top</code>,\n *  <code>left</code>, <code>zIndex</code>, <code>display</code>, <code>marginLeft</code>, and\n *  <code>marginTop</code> are ignored; these styles are for internal use only.\n * @property {Object} [labelStyle] An object literal whose properties define specific CSS\n *  style values to be applied to the label. Style values defined here override those that may\n *  be defined in the <code>labelClass</code> style sheet. If this property is changed after the\n *  label has been created, all previously set styles (except those defined in the style sheet)\n *  are removed from the label before the new style values are applied.\n *  Note that style values for <code>position</code>, <code>overflow</code>, <code>top</code>,\n *  <code>left</code>, <code>zIndex</code>, <code>display</code>, <code>marginLeft</code>, and\n *  <code>marginTop</code> are ignored; these styles are for internal use only.\n * @property {boolean} [labelInBackground] A flag indicating whether a label that overlaps its\n *  associated marker should appear in the background (i.e., in a plane below the marker).\n *  The default is <code>false</code>, which causes the label to appear in the foreground.\n * @property {boolean} [labelVisible] A flag indicating whether the label is to be visible.\n *  The default is <code>true</code>. Note that even if <code>labelVisible</code> is\n *  <code>true</code>, the label will <i>not</i> be visible unless the associated marker is also\n *  visible (i.e., unless the marker's <code>visible</code> property is <code>true</code>).\n * @property {boolean} [raiseOnDrag] A flag indicating whether the label and marker are to be\n *  raised when the marker is dragged. The default is <code>true</code>. If a draggable marker is\n *  being created and a version of Google Maps API earlier than V3.3 is being used, this property\n *  must be set to <code>false</code>.\n * @property {boolean} [optimized] A flag indicating whether rendering is to be optimized for the\n *  marker. <b>Important: The optimized rendering technique is not supported by MarkerWithLabel,\n *  so the value of this parameter is always forced to <code>false</code>.\n * @property {string} [crossImage=\"http://maps.gstatic.com/intl/en_us/mapfiles/drag_cross_67_16.png\"]\n *  The URL of the cross image to be displayed while dragging a marker.\n * @property {string} [handCursor=\"http://maps.gstatic.com/intl/en_us/mapfiles/closedhand_8_8.cur\"]\n *  The URL of the cursor to be displayed while dragging a marker.\n */\n/**\n * Creates a MarkerWithLabel with the options specified in {@link MarkerWithLabelOptions}.\n * @constructor\n * @param {MarkerWithLabelOptions} [opt_options] The optional parameters.\n */\nfunction MarkerWithLabel(opt_options) {\n  opt_options = opt_options || {};\n  opt_options.labelContent = opt_options.labelContent || \"\";\n  opt_options.labelAnchor = opt_options.labelAnchor || new google.maps.Point(0, 0);\n  opt_options.labelClass = opt_options.labelClass || \"markerLabels\";\n  opt_options.labelStyle = opt_options.labelStyle || {};\n  opt_options.labelInBackground = opt_options.labelInBackground || false;\n  if (typeof opt_options.labelVisible === \"undefined\") {\n    opt_options.labelVisible = true;\n  }\n  if (typeof opt_options.raiseOnDrag === \"undefined\") {\n    opt_options.raiseOnDrag = true;\n  }\n  if (typeof opt_options.clickable === \"undefined\") {\n    opt_options.clickable = true;\n  }\n  if (typeof opt_options.draggable === \"undefined\") {\n    opt_options.draggable = false;\n  }\n  if (typeof opt_options.optimized === \"undefined\") {\n    opt_options.optimized = false;\n  }\n  opt_options.crossImage = opt_options.crossImage || \"http\" + (document.location.protocol === \"https:\" ? \"s\" : \"\") + \"://maps.gstatic.com/intl/en_us/mapfiles/drag_cross_67_16.png\";\n  opt_options.handCursor = opt_options.handCursor || \"http\" + (document.location.protocol === \"https:\" ? \"s\" : \"\") + \"://maps.gstatic.com/intl/en_us/mapfiles/closedhand_8_8.cur\";\n  opt_options.optimized = false; // Optimized rendering is not supported\n\n  this.label = new MarkerLabel_(this, opt_options.crossImage, opt_options.handCursor); // Bind the label to the marker\n\n  // Call the parent constructor. It calls Marker.setValues to initialize, so all\n  // the new parameters are conveniently saved and can be accessed with get/set.\n  // Marker.set triggers a property changed event (called \"propertyname_changed\")\n  // that the marker label listens for in order to react to state changes.\n  google.maps.Marker.apply(this, arguments);\n}\ninherits(MarkerWithLabel, google.maps.Marker);\n\n/**\n * Overrides the standard Marker setMap function.\n * @param {Map} theMap The map to which the marker is to be added.\n * @private\n */\nMarkerWithLabel.prototype.setMap = function (theMap) {\n\n  // Call the inherited function...\n  google.maps.Marker.prototype.setMap.apply(this, arguments);\n\n  // ... then deal with the label:\n  this.label.setMap(theMap);\n};\n","/*\n * File: iframeSizer.contentWindow.js\n * Desc: Include this file in any page being loaded into an iframe\n *       to force the iframe to resize to the content size.\n * Requires: iframeResizer.js on host page.\n * Author: David J. Bradshaw - dave@bradshaw.net\n * Contributor: Jure Mav - jure.mav@gmail.com\n */\n\n;(function() {\n\t'use strict';\n\n\tvar\n\t\tautoResize            = true,\n\t\tbase                  = 10,\n\t\tbodyBackground        = '',\n\t\tbodyMargin            = 0,\n\t\tbodyMarginStr         = '',\n\t\tbodyPadding           = '',\n\t\tcalculateWidth        = false,\n\t\tdoubleEventList       = {'resize':1,'click':1},\n\t\teventCancelTimer      = 128,\n\t\theight                = 1,\n\t\tfirstRun              = true,\n\t\theightCalcModeDefault = 'offset',\n\t\theightCalcMode        = heightCalcModeDefault,\n\t\tinitLock              = true,\n\t\tinitMsg               = '',\n\t\tinPageLinks           = {},\n\t\tinterval              = 32,\n\t\tlogging               = false,\n\t\tmsgID                 = '[iFrameSizer]',  //Must match host page msg ID\n\t\tmsgIdLen              = msgID.length,\n\t\tmyID                  = '',\n\t\tpublicMethods         = false,\n\t\tresetRequiredMethods  = {max:1,scroll:1,bodyScroll:1,documentElementScroll:1},\n\t\ttargetOriginDefault   = '*',\n\t\ttarget                = window.parent,\n\t\ttolerance             = 0,\n\t\ttriggerLocked         = false,\n\t\ttriggerLockedTimer    = null,\n\t\twidth                 = 1;\n\n\n\tfunction addEventListener(el,evt,func){\n\t\tif ('addEventListener' in window){\n\t\t\tel.addEventListener(evt,func, false);\n\t\t} else if ('attachEvent' in window){ //IE\n\t\t\tel.attachEvent('on'+evt,func);\n\t\t}\n\t}\n\n\tfunction formatLogMsg(msg){\n\t\treturn msgID + '[' + myID + ']' + ' ' + msg;\n\t}\n\n\tfunction log(msg){\n\t\tif (logging && ('object' === typeof window.console)){\n\t\t\tconsole.log(formatLogMsg(msg));\n\t\t}\n\t}\n\n\tfunction warn(msg){\n\t\tif ('object' === typeof window.console){\n\t\t\tconsole.warn(formatLogMsg(msg));\n\t\t}\n\t}\n\n\n\tfunction init(){\n\t\tlog('Initialising iFrame');\n\t\treadData();\n\t\tsetMargin();\n\t\tsetBodyStyle('background',bodyBackground);\n\t\tsetBodyStyle('padding',bodyPadding);\n\t\tinjectClearFixIntoBodyElement();\n\t\tcheckHeightMode();\n\t\tstopInfiniteResizingOfIFrame();\n\t\tsetupPublicMethods();\n\t\tstartEventListeners();\n\t\tinPageLinks = setupInPageLinks();\n\t\tsendSize('init','Init message from host page');\n\t}\n\n\tfunction readData(){\n\n\t\tvar data = initMsg.substr(msgIdLen).split(':');\n\n\t\tfunction strBool(str){\n\t\t\treturn 'true' === str ? true : false;\n\t\t}\n\n\t\tmyID               = data[0];\n\t\tbodyMargin         = (undefined !== data[1]) ? Number(data[1])   : bodyMargin; //For V1 compatibility\n\t\tcalculateWidth     = (undefined !== data[2]) ? strBool(data[2])  : calculateWidth;\n\t\tlogging            = (undefined !== data[3]) ? strBool(data[3])  : logging;\n\t\tinterval           = (undefined !== data[4]) ? Number(data[4])   : interval;\n\t\tpublicMethods      = (undefined !== data[5]) ? strBool(data[5])  : publicMethods;\n\t\tautoResize         = (undefined !== data[6]) ? strBool(data[6])  : autoResize;\n\t\tbodyMarginStr      = data[7];\n\t\theightCalcMode     = (undefined !== data[8]) ? data[8]           : heightCalcMode;\n\t\tbodyBackground     = data[9];\n\t\tbodyPadding        = data[10];\n\t\ttolerance          = (undefined !== data[11]) ? Number(data[11]) : tolerance;\n\t\tinPageLinks.enable = (undefined !== data[12]) ? strBool(data[12]): false;\n\t}\n\n\tfunction chkCSS(attr,value){\n\t\tif (-1 !== value.indexOf('-')){\n\t\t\twarn('Negative CSS value ignored for '+attr);\n\t\t\tvalue='';\n\t\t}\n\t\treturn value;\n\t}\n\n\tfunction setBodyStyle(attr,value){\n\t\tif ((undefined !== value) && ('' !== value) && ('null' !== value)){\n\t\t\tdocument.body.style[attr] = value;\n\t\t\tlog('Body '+attr+' set to \"'+value+'\"');\n\t\t}\n\t}\n\n\tfunction setMargin(){\n\t\t//If called via V1 script, convert bodyMargin from int to str\n\t\tif (undefined === bodyMarginStr){\n\t\t\tbodyMarginStr = bodyMargin+'px';\n\t\t}\n\t\tchkCSS('margin',bodyMarginStr);\n\t\tsetBodyStyle('margin',bodyMarginStr);\n\t}\n\n\tfunction stopInfiniteResizingOfIFrame(){\n\t\tdocument.documentElement.style.height = '';\n\t\tdocument.body.style.height = '';\n\t\tlog('HTML & body height set to \"auto\"');\n\t}\n\n\n\tfunction addTriggerEvent(options){\n\t\tfunction addListener(eventName){\n\t\t\taddEventListener(window,eventName,function(e){\n\t\t\t\tsendSize(options.eventName,options.eventType);\n\t\t\t});\n\t\t}\n\n\t\tif(options.eventNames && Array.prototype.map){\n\t\t\toptions.eventName = options.eventNames[0];\n\t\t\toptions.eventNames.map(addListener);\n\t\t} else {\n\t\t\taddListener(options.eventName);\n\t\t}\n\n\t\tlog('Added event listener: ' + options.eventType);\n\t}\n\n\tfunction initEventListeners(){\n\t\taddTriggerEvent({ eventType: 'Animation Start',           eventNames: ['animationstart','webkitAnimationStart'] });\n\t\taddTriggerEvent({ eventType: 'Animation Iteration',       eventNames: ['animationiteration','webkitAnimationIteration'] });\n\t\taddTriggerEvent({ eventType: 'Animation End',             eventNames: ['animationend','webkitAnimationEnd'] });\n\t\taddTriggerEvent({ eventType: 'Device Orientation Change', eventName:  'deviceorientation' });\n\t\taddTriggerEvent({ eventType: 'Transition End',            eventNames: ['transitionend','webkitTransitionEnd','MSTransitionEnd','oTransitionEnd','otransitionend'] });\n\t\taddTriggerEvent({ eventType: 'Window Clicked',            eventName:  'click' });\n\t\t//addTriggerEvent({ eventType: 'Window Mouse Down',         eventName:  'mousedown' });\n\t\t//addTriggerEvent({ eventType: 'Window Mouse Up',           eventName:  'mouseup' });\n\t\taddTriggerEvent({ eventType: 'Window Resized',            eventName:  'resize' });\n\t}\n\n\tfunction checkHeightMode(){\n\t\tif (heightCalcModeDefault !== heightCalcMode){\n\t\t\tif (!(heightCalcMode in getHeight)){\n\t\t\t\twarn(heightCalcMode + ' is not a valid option for heightCalculationMethod.');\n\t\t\t\theightCalcMode='bodyScroll';\n\t\t\t}\n\t\t\tlog('Height calculation method set to \"'+heightCalcMode+'\"');\n\t\t}\n\t}\n\n\tfunction startEventListeners(){\n\t\tif ( true === autoResize ) {\n\t\t\tinitEventListeners();\n\t\t\tsetupMutationObserver();\n\t\t}\n\t\telse {\n\t\t\tlog('Auto Resize disabled');\n\t\t}\n\t}\n\n\tfunction injectClearFixIntoBodyElement(){\n\t\tvar clearFix = document.createElement('div');\n\t\tclearFix.style.clear = 'both';\n\t\tclearFix.style.display = 'block'; //Guard against this having been globally redefined in CSS.\n\t\tdocument.body.appendChild(clearFix);\n\t}\n\n\tfunction setupInPageLinks(){\n\n\t\tfunction getPagePosition (){\n\t\t\treturn {\n\t\t\t\tx: (window.pageXOffset !== undefined) ? window.pageXOffset : document.documentElement.scrollLeft,\n\t\t\t\ty: (window.pageYOffset !== undefined) ? window.pageYOffset : document.documentElement.scrollTop\n\t\t\t};\n\t\t}\n\n\t\tfunction getElementPosition(el){\n\t\t\tvar\n\t\t\t\telPosition   = el.getBoundingClientRect(),\n\t\t\t\tpagePosition = getPagePosition();\n\n\t\t\treturn {\n\t\t\t\tx: parseInt(elPosition.left,10) + parseInt(pagePosition.x,10),\n\t\t\t\ty: parseInt(elPosition.top,10)  + parseInt(pagePosition.y,10)\n\t\t\t};\n\t\t}\n\n\t\tfunction findTarget(location){\n\t\t\tvar hash = location.split(\"#\")[1] || \"\";\n\t\t\tvar hashData = decodeURIComponent(hash);\n\n\t\t\tfunction jumpToTarget(target){\n\t\t\t\tvar jumpPosition = getElementPosition(target);\n\n\t\t\t\tlog('Moving to in page link (#'+hash+') at x: '+jumpPosition.x+' y: '+jumpPosition.y);\n\t\t\t\tsendMsg(jumpPosition.y, jumpPosition.x, 'scrollToOffset'); // X&Y reversed at sendMsg uses height/width\n\t\t\t}\n\n\t\t\tvar target = document.getElementById(hashData) || document.getElementsByName(hashData)[0];\n\n\t\t\tif (target){\n\t\t\t\tjumpToTarget(target);\n\t\t\t} else {\n\t\t\t\tlog('In page link (#' + hash + ') not found in iFrame, so sending to parent');\n\t\t\t\tsendMsg(0,0,'inPageLink','#'+hash);\n\t\t\t}\n\t\t}\n\n\t\tfunction checkLocationHash(){\n\t\t\tif ('' !== location.hash && '#' !== location.hash){\n\t\t\t\tfindTarget(location.href);\n\t\t\t}\n\t\t}\n\n\t\tfunction bindAnchors(){\n\t\t\tfunction setupLink(el){\n\t\t\t\tfunction linkClicked(e){\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t/*jshint validthis:true */\n\t\t\t\t\tfindTarget(this.getAttribute('href'));\n\t\t\t\t}\n\n\t\t\t\tif ('#' !== el.getAttribute('href')){\n\t\t\t\t\taddEventListener(el,'click',linkClicked);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tArray.prototype.forEach.call( document.querySelectorAll( 'a[href^=\"#\"]' ), setupLink );\n\t\t}\n\n\t\tfunction bindLocationHash(){\n\t\t\taddEventListener(window,'hashchange',checkLocationHash);\n\t\t}\n\n\t\tfunction initCheck(){ //check if page loaded with location hash after init resize\n\t\t\tsetTimeout(checkLocationHash,eventCancelTimer);\n\t\t}\n\n\t\tfunction enableInPageLinks(){\n\t\t\tif(Array.prototype.forEach && document.querySelectorAll){\n\t\t\t\tlog('Setting up location.hash handlers');\n\t\t\t\tbindAnchors();\n\t\t\t\tbindLocationHash();\n\t\t\t\tinitCheck();\n\t\t\t} else {\n\t\t\t\twarn('In page linking not fully supported in this browser! (See README.md for IE8 workaround)');\n\t\t\t}\n\t\t}\n\n\t\tif(inPageLinks.enable){\n\t\t\tenableInPageLinks();\n\t\t} else {\n\t\t\tlog('In page linking not enabled');\n\t\t}\n\n\t\treturn {\n\t\t\tfindTarget:findTarget\n\t\t};\n\t}\n\n\tfunction setupPublicMethods(){\n\t\tif (publicMethods) {\n\t\t\tlog('Enable public methods');\n\n\t\t\twindow.parentIFrame = {\n\t\t\t\tclose: function closeF(){\n\t\t\t\t\tsendSize('close','parentIFrame.close()', 0, 0);\n\t\t\t\t},\n\t\t\t\tgetId: function getIdF(){\n\t\t\t\t\treturn myID;\n\t\t\t\t},\n\t\t\t\tmoveToAnchor: function moveToAnchorF(hash){\n\t\t\t\t\tinPageLinks.findTarget(hash);\n\t\t\t\t},\n\t\t\t\treset: function resetF(){\n\t\t\t\t\tresetIFrame('parentIFrame.reset');\n\t\t\t\t},\n\t\t\t\tscrollTo: function scrollToF(x,y){\n\t\t\t\t\tsendMsg(y,x,'scrollTo'); // X&Y reversed at sendMsg uses height/width\n\t\t\t\t},\n\t\t\t\tscrollToOffset: function scrollToF(x,y){\n\t\t\t\t\tsendMsg(y,x,'scrollToOffset'); // X&Y reversed at sendMsg uses height/width\n\t\t\t\t},\n\t\t\t\tsendMessage: function sendMessageF(msg,targetOrigin){\n\t\t\t\t\tsendMsg(0,0,'message',JSON.stringify(msg),targetOrigin);\n\t\t\t\t},\n\t\t\t\tsetHeightCalculationMethod: function setHeightCalculationMethodF(heightCalculationMethod){\n\t\t\t\t\theightCalcMode = heightCalculationMethod;\n\t\t\t\t\tcheckHeightMode();\n\t\t\t\t},\n\t\t\t\tsetTargetOrigin: function setTargetOriginF(targetOrigin){\n\t\t\t\t\tlog('Set targetOrigin: '+targetOrigin);\n\t\t\t\t\ttargetOriginDefault = targetOrigin;\n\t\t\t\t},\n\t\t\t\tsize: function sizeF(customHeight, customWidth){\n\t\t\t\t\tvar valString = ''+(customHeight?customHeight:'')+(customWidth?','+customWidth:'');\n\t\t\t\t\tlockTrigger();\n\t\t\t\t\tsendSize('size','parentIFrame.size('+valString+')', customHeight, customWidth);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction initInterval(){\n\t\tif ( 0 !== interval ){\n\t\t\tlog('setInterval: '+interval+'ms');\n\t\t\tsetInterval(function(){\n\t\t\t\tsendSize('interval','setInterval: '+interval);\n\t\t\t},Math.abs(interval));\n\t\t}\n\t}\n\n\tfunction setupInjectElementLoadListners(mutations){\n\t\tfunction addLoadListener(element){\n\t\t\tif (element.height === undefined || element.width === undefined || 0 === element.height || 0 === element.width){\n\t\t\t\tlog('Attach listerner to '+element.src);\n\t\t\t\taddEventListener(element,'load', function imageLoaded(){\n\t\t\t\t\tsendSize('imageLoad','Image loaded');\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tmutations.forEach(function (mutation) {\n\t\t\tif (mutation.type === 'attributes' && mutation.attributeName === 'src'){\n\t\t\t\taddLoadListener(mutation.target);\n\t\t\t} else if (mutation.type === 'childList'){\n\t\t\t\tvar images = mutation.target.querySelectorAll('img');\n\t\t\t\tArray.prototype.forEach.call(images,function (image) {\n\t\t\t\t\taddLoadListener(image);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction setupMutationObserver(){\n\n\t\tvar MutationObserver = window.MutationObserver || window.WebKitMutationObserver;\n\n\t\tfunction createMutationObserver(){\n\t\t\tvar\n\t\t\t\ttarget = document.querySelector('body'),\n\n\t\t\t\tconfig = {\n\t\t\t\t\tattributes            : true,\n\t\t\t\t\tattributeOldValue     : false,\n\t\t\t\t\tcharacterData         : true,\n\t\t\t\t\tcharacterDataOldValue : false,\n\t\t\t\t\tchildList             : true,\n\t\t\t\t\tsubtree               : true\n\t\t\t\t},\n\n\t\t\t\tobserver = new MutationObserver(function(mutations) {\n\t\t\t\t\tsendSize('mutationObserver','mutationObserver: ' + mutations[0].target + ' ' + mutations[0].type);\n\t\t\t\t\tsetupInjectElementLoadListners(mutations); //Deal with WebKit asyncing image loading when tags are injected into the page\n\t\t\t\t});\n\n\t\t\tlog('Enable MutationObserver');\n\t\t\tobserver.observe(target, config);\n\t\t}\n\n\t\tif (MutationObserver){\n\t\t\tif (0 > interval) {\n\t\t\t\tinitInterval();\n\t\t\t} else {\n\t\t\t\tcreateMutationObserver();\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\twarn('MutationObserver not supported in this browser!');\n\t\t\tinitInterval();\n\t\t}\n\t}\n\n\n\t// document.documentElement.offsetHeight is not reliable, so\n\t// we have to jump through hoops to get a better value.\n\tfunction getBodyOffsetHeight(){\n\t\tfunction getComputedBodyStyle(prop) {\n\t\t\tfunction convertUnitsToPxForIE8(value) {\n\t\t\t\tvar PIXEL = /^\\d+(px)?$/i;\n\n\t\t\t\tif (PIXEL.test(value)) {\n\t\t\t\t\treturn parseInt(value,base);\n\t\t\t\t}\n\n\t\t\t\tvar\n\t\t\t\t\tstyle = el.style.left,\n\t\t\t\t\truntimeStyle = el.runtimeStyle.left;\n\n\t\t\t\tel.runtimeStyle.left = el.currentStyle.left;\n\t\t\t\tel.style.left = value || 0;\n\t\t\t\tvalue = el.style.pixelLeft;\n\t\t\t\tel.style.left = style;\n\t\t\t\tel.runtimeStyle.left = runtimeStyle;\n\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\tvar\n\t\t\t\tel = document.body,\n\t\t\t\tretVal = 0;\n\n\t\t\tif (('defaultView' in document) && ('getComputedStyle' in document.defaultView)) {\n\t\t\t\tretVal = document.defaultView.getComputedStyle(el, null);\n\t\t\t\tretVal = (null !== retVal) ? retVal[prop] : 0;\n\t\t\t} else {//IE8\n\t\t\t\tretVal =  convertUnitsToPxForIE8(el.currentStyle[prop]);\n\t\t\t}\n\n\t\t\treturn parseInt(retVal,base);\n\t\t}\n\n\t\treturn  document.body.offsetHeight +\n\t\t\t\tgetComputedBodyStyle('marginTop') +\n\t\t\t\tgetComputedBodyStyle('marginBottom');\n\t}\n\n\tfunction getBodyScrollHeight(){\n\t\treturn document.body.scrollHeight;\n\t}\n\n\tfunction getDEOffsetHeight(){\n\t\treturn document.documentElement.offsetHeight;\n\t}\n\n\tfunction getDEScrollHeight(){\n\t\treturn document.documentElement.scrollHeight;\n\t}\n\n\t//From https://github.com/guardian/iframe-messenger\n\tfunction getLowestElementHeight() {\n\t\tvar\n\t\t\tallElements       = document.querySelectorAll('body *'),\n\t\t\tallElementsLength = allElements.length,\n\t\t\tmaxBottomVal      = 0,\n\t\t\ttimer             = new Date().getTime();\n\n\t\tfor (var i = 0; i < allElementsLength; i++) {\n\t\t\tif (allElements[i].getBoundingClientRect().bottom > maxBottomVal) {\n\t\t\t\tmaxBottomVal = allElements[i].getBoundingClientRect().bottom;\n\t\t\t}\n\t\t}\n\n\t\ttimer = new Date().getTime() - timer;\n\n\t\tlog('Parsed '+allElementsLength+' HTML elements');\n\t\tlog('LowestElement bottom position calculated in ' + timer + 'ms');\n\n\t\treturn maxBottomVal;\n\t}\n\n\tfunction getAllHeights(){\n\t\treturn [\n\t\t\tgetBodyOffsetHeight(),\n\t\t\tgetBodyScrollHeight(),\n\t\t\tgetDEOffsetHeight(),\n\t\t\tgetDEScrollHeight()\n\t\t];\n\t}\n\n\tfunction getMaxHeight(){\n\t\treturn Math.max.apply(null,getAllHeights());\n\t}\n\n\tfunction getMinHeight(){\n\t\treturn Math.min.apply(null,getAllHeights());\n\t}\n\n\tfunction getBestHeight(){\n\t\treturn Math.max(getBodyOffsetHeight(),getLowestElementHeight());\n\t}\n\n\tvar getHeight = {\n\t\toffset                : getBodyOffsetHeight, //Backward compatability\n\t\tbodyOffset            : getBodyOffsetHeight,\n\t\tbodyScroll            : getBodyScrollHeight,\n\t\tdocumentElementOffset : getDEOffsetHeight,\n\t\tscroll                : getDEScrollHeight, //Backward compatability\n\t\tdocumentElementScroll : getDEScrollHeight,\n\t\tmax                   : getMaxHeight,\n\t\tmin                   : getMinHeight,\n\t\tgrow                  : getMaxHeight,\n\t\tlowestElement         : getBestHeight\n\t};\n\n\tfunction getWidth(){\n\t\treturn Math.max(\n\t\t\tdocument.documentElement.scrollWidth,\n\t\t\tdocument.body.scrollWidth\n\t\t);\n\t}\n\n\tfunction sendSize(triggerEvent, triggerEventDesc, customHeight, customWidth){\n\n\t\tvar\tcurrentHeight,currentWidth;\n\n\t\tfunction recordTrigger(){\n\t\t\tif (!(triggerEvent in {'reset':1,'resetPage':1,'init':1})){\n\t\t\t\tlog( 'Trigger event: ' + triggerEventDesc );\n\t\t\t}\n\t\t}\n\n\t\tfunction resizeIFrame(){\n\t\t\theight = currentHeight;\n\t\t\twidth  = currentWidth;\n\n\t\t\tsendMsg(height,width,triggerEvent);\n\t\t}\n\n\t\tfunction isDoubleFiredEvent(){\n\t\t\treturn  triggerLocked && (triggerEvent in doubleEventList);\n\t\t}\n\n\t\tfunction isSizeChangeDetected(){\n\t\t\tfunction checkTolarance(a,b){\n\t\t\t\tvar retVal = Math.abs(a-b) <= tolerance;\n\t\t\t\treturn !retVal;\n\t\t\t}\n\n\t\t\tcurrentHeight = (undefined !== customHeight)  ? customHeight : getHeight[heightCalcMode]();\n\t\t\tcurrentWidth  = (undefined !== customWidth )  ? customWidth  : getWidth();\n\n\t\t\treturn\tcheckTolarance(height,currentHeight) ||\n\t\t\t\t\t(calculateWidth && checkTolarance(width,currentWidth));\n\n\t\t\t//return\t(height !== currentHeight) ||\n\t\t\t//\t\t(calculateWidth && width !== currentWidth);\n\t\t}\n\n\t\tfunction isForceResizableEvent(){\n\t\t\treturn !(triggerEvent in {'init':1,'interval':1,'size':1});\n\t\t}\n\n\t\tfunction isForceResizableHeightCalcMode(){\n\t\t\treturn (heightCalcMode in resetRequiredMethods);\n\t\t}\n\n\t\tfunction logIgnored(){\n\t\t\tlog('No change in size detected');\n\t\t}\n\n\t\tfunction checkDownSizing(){\n\t\t\tif (isForceResizableEvent() && isForceResizableHeightCalcMode()){\n\t\t\t\tresetIFrame(triggerEventDesc);\n\t\t\t} else if (!(triggerEvent in {'interval':1})){\n\t\t\t\trecordTrigger();\n\t\t\t\tlogIgnored();\n\t\t\t}\n\t\t}\n\n\t\tif (!isDoubleFiredEvent()){\n\t\t\tif (isSizeChangeDetected()){\n\t\t\t\trecordTrigger();\n\t\t\t\tlockTrigger();\n\t\t\t\tresizeIFrame();\n\t\t\t} else {\n\t\t\t\tcheckDownSizing();\n\t\t\t}\n\t\t} else {\n\t\t\tlog('Trigger event cancelled: '+triggerEvent);\n\t\t}\n\t}\n\n\tfunction lockTrigger(){\n\t\tif (!triggerLocked){\n\t\t\ttriggerLocked = true;\n\t\t\tlog('Trigger event lock on');\n\t\t}\n\t\tclearTimeout(triggerLockedTimer);\n\t\ttriggerLockedTimer = setTimeout(function(){\n\t\t\ttriggerLocked = false;\n\t\t\tlog('Trigger event lock off');\n\t\t\tlog('--');\n\t\t},eventCancelTimer);\n\t}\n\n\tfunction triggerReset(triggerEvent){\n\t\theight = getHeight[heightCalcMode]();\n\t\twidth  = getWidth();\n\n\t\tsendMsg(height,width,triggerEvent);\n\t}\n\n\tfunction resetIFrame(triggerEventDesc){\n\t\tvar hcm = heightCalcMode;\n\t\theightCalcMode = heightCalcModeDefault;\n\n\t\tlog('Reset trigger event: ' + triggerEventDesc);\n\t\tlockTrigger();\n\t\ttriggerReset('reset');\n\n\t\theightCalcMode = hcm;\n\t}\n\n\tfunction sendMsg(height,width,triggerEvent,msg,targetOrigin){\n\t\tfunction setTargetOrigin(){\n\t\t\tif (undefined === targetOrigin){\n\t\t\t\ttargetOrigin = targetOriginDefault;\n\t\t\t} else {\n\t\t\t\tlog('Message targetOrigin: '+targetOrigin);\n\t\t\t}\n\t\t}\n\n\t\tfunction sendToParent(){\n\t\t\tvar\n\t\t\t\tsize  = height + ':' + width,\n\t\t\t\tmessage = myID + ':' +  size + ':' + triggerEvent + (undefined !== msg ? ':' + msg : '');\n\n\t\t\tlog('Sending message to host page (' + message + ')');\n\t\t\ttarget.postMessage( msgID + message, targetOrigin);\n\t\t}\n\n\t\tsetTargetOrigin();\n\t\tsendToParent();\n\t}\n\n\tfunction receiver(event) {\n\t\tfunction isMessageForUs(){\n\t\t\treturn msgID === (''+event.data).substr(0,msgIdLen); //''+ Protects against non-string messages\n\t\t}\n\n\t\tfunction initFromParent(){\n\t\t\tinitMsg = event.data;\n\t\t\ttarget  = event.source;\n\n\t\t\tinit();\n\t\t\tfirstRun = false;\n\t\t\tsetTimeout(function(){ initLock = false;},eventCancelTimer);\n\t\t}\n\n\t\tfunction resetFromParent(){\n\t\t\tif (!initLock){\n\t\t\t\tlog('Page size reset by host page');\n\t\t\t\ttriggerReset('resetPage');\n\t\t\t} else {\n\t\t\t\tlog('Page reset ignored by init');\n\t\t\t}\n\t\t}\n\n\t\tfunction getMessageType(){\n\t\t\treturn event.data.split(']')[1];\n\t\t}\n\n\t\tfunction isMiddleTier(){\n\t\t\treturn ('iFrameResize' in window);\n\t\t}\n\n\t\tfunction isInitMsg(){\n\t\t\t//test if this message is from a child below us. This is an ugly test, however, updating\n\t\t\t//the message format would break backwards compatibity.\n\t\t\treturn event.data.split(':')[2] in {'true':1,'false':1};\n\t\t}\n\n\t\tif (isMessageForUs()){\n\t\t\tif (firstRun && isInitMsg()){ //Check msg ID\n\t\t\t\tinitFromParent();\n\t\t\t} else if ('reset' === getMessageType()){\n\t\t\t\tresetFromParent();\n\t\t\t} else if (event.data !== initMsg && !isMiddleTier()){\n\t\t\t\twarn('Unexpected message ('+event.data+')');\n\t\t\t}\n\t\t}\n\t}\n\n\taddEventListener(window, 'message', receiver);\n\n})();\n"],"sourceRoot":"/source/"}